{"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\app.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\app.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":18,"column":18},"end":{"line":18,"column":53}},"16":{"start":{"line":19,"column":29},"end":{"line":19,"column":75}},"17":{"start":{"line":20,"column":15},"end":{"line":20,"column":47}},"18":{"start":{"line":21,"column":23},"end":{"line":21,"column":65}},"19":{"start":{"line":22,"column":21},"end":{"line":22,"column":77}},"20":{"start":{"line":23,"column":21},"end":{"line":23,"column":78}},"21":{"start":{"line":24,"column":21},"end":{"line":24,"column":79}},"22":{"start":{"line":25,"column":21},"end":{"line":25,"column":81}},"23":{"start":{"line":26,"column":21},"end":{"line":26,"column":79}},"24":{"start":{"line":27,"column":21},"end":{"line":27,"column":77}},"25":{"start":{"line":28,"column":21},"end":{"line":28,"column":81}},"26":{"start":{"line":29,"column":21},"end":{"line":29,"column":81}},"27":{"start":{"line":30,"column":32},"end":{"line":30,"column":113}},"28":{"start":{"line":31,"column":21},"end":{"line":31,"column":77}},"29":{"start":{"line":32,"column":17},"end":{"line":32,"column":36}},"30":{"start":{"line":33,"column":12},"end":{"line":33,"column":36}},"31":{"start":{"line":35,"column":0},"end":{"line":37,"column":4}},"32":{"start":{"line":38,"column":0},"end":{"line":38,"column":34}},"33":{"start":{"line":39,"column":0},"end":{"line":39,"column":117}},"34":{"start":{"line":40,"column":0},"end":{"line":40,"column":39}},"35":{"start":{"line":41,"column":0},"end":{"line":49,"column":4}},"36":{"start":{"line":41,"column":28},"end":{"line":49,"column":2}},"37":{"start":{"line":43,"column":4},"end":{"line":43,"column":86}},"38":{"start":{"line":44,"column":4},"end":{"line":44,"column":85}},"39":{"start":{"line":45,"column":4},"end":{"line":45,"column":70}},"40":{"start":{"line":47,"column":4},"end":{"line":47,"column":24}},"41":{"start":{"line":48,"column":4},"end":{"line":48,"column":11}},"42":{"start":{"line":53,"column":0},"end":{"line":53,"column":47}},"43":{"start":{"line":55,"column":0},"end":{"line":55,"column":82}},"44":{"start":{"line":61,"column":0},"end":{"line":61,"column":52}},"45":{"start":{"line":62,"column":0},"end":{"line":62,"column":56}},"46":{"start":{"line":63,"column":0},"end":{"line":63,"column":58}},"47":{"start":{"line":64,"column":0},"end":{"line":64,"column":61}},"48":{"start":{"line":66,"column":0},"end":{"line":66,"column":57}},"49":{"start":{"line":68,"column":0},"end":{"line":68,"column":62}},"50":{"start":{"line":69,"column":0},"end":{"line":69,"column":69}},"51":{"start":{"line":70,"column":0},"end":{"line":70,"column":77}},"52":{"start":{"line":71,"column":0},"end":{"line":71,"column":59}},"53":{"start":{"line":72,"column":0},"end":{"line":72,"column":64}},"54":{"start":{"line":73,"column":0},"end":{"line":73,"column":65}},"55":{"start":{"line":74,"column":0},"end":{"line":74,"column":85}},"56":{"start":{"line":76,"column":0},"end":{"line":76,"column":64}},"57":{"start":{"line":77,"column":0},"end":{"line":77,"column":80}},"58":{"start":{"line":78,"column":0},"end":{"line":78,"column":64}},"59":{"start":{"line":79,"column":0},"end":{"line":79,"column":90}},"60":{"start":{"line":80,"column":0},"end":{"line":80,"column":84}},"61":{"start":{"line":81,"column":0},"end":{"line":81,"column":102}},"62":{"start":{"line":83,"column":0},"end":{"line":83,"column":58}},"63":{"start":{"line":84,"column":0},"end":{"line":84,"column":62}},"64":{"start":{"line":85,"column":0},"end":{"line":85,"column":55}},"65":{"start":{"line":86,"column":0},"end":{"line":86,"column":64}},"66":{"start":{"line":87,"column":0},"end":{"line":87,"column":67}},"67":{"start":{"line":89,"column":0},"end":{"line":89,"column":56}},"68":{"start":{"line":90,"column":0},"end":{"line":90,"column":60}},"69":{"start":{"line":91,"column":0},"end":{"line":91,"column":53}},"70":{"start":{"line":92,"column":0},"end":{"line":92,"column":62}},"71":{"start":{"line":93,"column":0},"end":{"line":93,"column":65}},"72":{"start":{"line":95,"column":0},"end":{"line":95,"column":52}},"73":{"start":{"line":96,"column":0},"end":{"line":96,"column":56}},"74":{"start":{"line":97,"column":0},"end":{"line":97,"column":49}},"75":{"start":{"line":98,"column":0},"end":{"line":98,"column":58}},"76":{"start":{"line":99,"column":0},"end":{"line":99,"column":61}},"77":{"start":{"line":101,"column":0},"end":{"line":101,"column":60}},"78":{"start":{"line":102,"column":0},"end":{"line":102,"column":64}},"79":{"start":{"line":103,"column":0},"end":{"line":103,"column":57}},"80":{"start":{"line":104,"column":0},"end":{"line":104,"column":66}},"81":{"start":{"line":105,"column":0},"end":{"line":105,"column":69}},"82":{"start":{"line":106,"column":0},"end":{"line":106,"column":85}},"83":{"start":{"line":107,"column":0},"end":{"line":107,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":41,"column":8},"end":{"line":41,"column":9}},"loc":{"start":{"line":41,"column":28},"end":{"line":49,"column":2}},"line":41},"9":{"name":"(anonymous_9)","decl":{"start":{"line":41,"column":62},"end":{"line":41,"column":63}},"loc":{"start":{"line":41,"column":75},"end":{"line":49,"column":1}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":14,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":14,"8":0,"9":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[10,4],"7":[14,14]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/app.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/app.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\r\n/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport express, {\r\n  Request, Response, Application, NextFunction,\r\n} from 'express';\r\nimport swaggerUi from 'swagger-ui-express';\r\nimport cors from 'cors';\r\nimport openapi from './openapi.json';\r\nimport authController from './components/auth/controller';\r\nimport userController from './components/users/controller';\r\nimport lecturerController from './components/lector/controller';\r\nimport subjectController from './components/subjects/controller';\r\nimport courseController from './components/course/controller';\r\nimport roomController from './components/room/controller';\r\nimport scheduleController from './components/schedule/controller';\r\nimport homeworkController from './components/homework/controller';\r\n\r\n// Järgnevad ESLint errorid on keelatud teadlikult ja lähevad eemaldamisele,\r\n// kui midllewared saavad uuesti rakendatud\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nimport isAdmin from './components/auth/isAdminMiddleware';\r\n// eslint-disable-next-line no-unused-vars\r\nimport isLoggedIn from './components/auth/isLoggedInMiddleware';\r\nimport checkAlphabet from './components/general/middleware/checkLetterMiddleware';\r\n// eslint-disable-next-line no-unused-vars\r\nimport checkAlphabetAndNumber from './components/general/middleware/checkLetterAndNumberMiddleware';\r\nimport ping from './components/ping/controller';\r\nimport courseService from './components/course/service';\r\nimport { logger } from './logger';\r\n\r\nconst app = express(); // create express app\r\n// app.use(cors()); //use cors\r\napp.use(cors({\r\n  origin: '*',\r\n}));\r\napp.use(express.json()); // For creating body object inside middleware request object\r\napp.use('/api-docs', swaggerUi.serve, swaggerUi.setup(openapi));\r\n\r\napp.get('/ping', ping);\r\n\r\napp.use(async (req: Request, res: Response, next: NextFunction) => {\r\n  // Log request details\r\n  logger.info(`Request from ${req.ip} using ${req.headers['user-agent']}`);\r\n  logger.info(`Request method and URL: ${req.method} ${req.originalUrl}`);\r\n  logger.info(`Request body: ${JSON.stringify(req.body)}`);\r\n  // eslint-disable-next-line no-console\r\n  console.log(req.ip);\r\n\r\n  next();\r\n});\r\n// Schedule API\r\n\r\n// ----LOGIN AND USER ENDPOINTS NOT IN USE----\r\n\r\n// Login\r\n\r\napp.post('/login', authController.login);\r\n\r\n// User endpoints\r\napp.post('/users', checkAlphabet, userController.addUser);\r\n// login middelware from this point\r\n// app.use(isLoggedIn);\r\n// isAdmin,\r\n//-------\r\n// app.get(\"/users\", isAdmin, userController.getAllUsers);\r\napp.get('/users', userController.getAllUsers);\r\napp.get('/users/:id', userController.getUserById);\r\napp.delete('/users/:id', userController.deleteUser);\r\napp.patch('/users/:id', userController.updateUserById);\r\n// app.patch(\"/users/:id\", checkAlphabet, userController.updateUserById);\r\n\r\napp.post('/googleauth', authController.googleAuth);\r\n\r\n// Schedule endpoints\r\napp.get('/schedule/', scheduleController.getEntireSchedule);\r\napp.get('/schedule/:atDate', scheduleController.getEntireSchedule);\r\napp.get('/schedule/:atDate/:toDate', scheduleController.getEntireSchedule);\r\napp.post('/schedule', scheduleController.createSchedule);\r\napp.patch('/schedule/:id', scheduleController.updateSchedule);\r\napp.delete('/schedule/:id', scheduleController.deleteSchedule);\r\napp.get('/gcal/:atDate/:toDate/:courseId/:lecturerId', scheduleController.getgcal);\r\n\r\n// Lecturer endpoints\r\napp.get('/lecturers', lecturerController.getAllLecturersById);\r\napp.get('/lecturers/activeSubjects', lecturerController.getLecturersSubjects);\r\napp.get('/lecturers/:id', lecturerController.getLecturerById);\r\napp.post('/lecturers', checkAlphabet, lecturerController.addLecturer);\r\napp.delete(\r\n  '/lecturers/:id',\r\n  lecturerController.deleteLecturerWhenNoSubjectsById,\r\n);\r\napp.patch(\r\n  '/lecturers/:id',\r\n  checkAlphabet,\r\n  lecturerController.updateLecturerById,\r\n);\r\n\r\n// Subjects endpoints\r\napp.get('/subjects', subjectController.getAllSubjects);\r\napp.get('/subjects/:id', subjectController.getSubjectById);\r\napp.post('/subjects', subjectController.addSubject);\r\napp.delete('/subjects/:id', subjectController.deleteSubject);\r\napp.patch('/subjects/:id', subjectController.updateSubjectById);\r\n\r\n// Course endpoints\r\n\r\napp.get('/courses', courseController.getAllCourses);\r\napp.get('/courses/:id', courseController.getCourseById);\r\napp.post('/courses', courseController.addCourse);\r\napp.delete('/courses/:id', courseController.deleteCourse);\r\napp.patch('/courses/:id', courseController.updateCourseById);\r\n\r\n// Room endpoints\r\n\r\napp.get('/rooms', roomController.getAllRooms);\r\napp.get('/rooms/:id', roomController.getRoomById);\r\napp.post('/rooms', roomController.addRoom);\r\napp.delete('/rooms/:id', roomController.deleteRoom);\r\napp.patch('/rooms/:id', roomController.updateRoomById);\r\n\r\n// homework\r\n\r\napp.get('/homeworks', homeworkController.getAllHomeworks);\r\napp.get('/homeworks/:id', homeworkController.getHomeworkById);\r\napp.post('/homeworks', homeworkController.addHomework);\r\napp.delete('/homeworks/:id', homeworkController.deleteHomework);\r\napp.patch('/homeworks/:id', homeworkController.updateHomeworkById);\r\n\r\napp.get('/homeworkbycode/:code/:actualDate', homeworkController.getHomeworkByCode);\r\n\r\nexport default app;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"569edb06bf341964e058612fb0c35705ab34486a","contentHash":"9b543f3c00393c5eb3439e9e97c52ee53f76ee0d90ccb6664cf477557016fcaf"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\auth\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\auth\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":16},"end":{"line":15,"column":49}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":24},"end":{"line":17,"column":76}},"18":{"start":{"line":18,"column":23},"end":{"line":64,"column":1}},"19":{"start":{"line":19,"column":30},"end":{"line":41,"column":6}},"20":{"start":{"line":20,"column":8},"end":{"line":40,"column":9}},"21":{"start":{"line":21,"column":31},"end":{"line":21,"column":56}},"22":{"start":{"line":22,"column":32},"end":{"line":22,"column":112}},"23":{"start":{"line":23,"column":12},"end":{"line":27,"column":13}},"24":{"start":{"line":24,"column":16},"end":{"line":26,"column":19}},"25":{"start":{"line":28,"column":29},"end":{"line":32,"column":14}},"26":{"start":{"line":34,"column":33},"end":{"line":34,"column":89}},"27":{"start":{"line":35,"column":12},"end":{"line":35,"column":77}},"28":{"start":{"line":39,"column":12},"end":{"line":39,"column":64}},"29":{"start":{"line":42,"column":25},"end":{"line":63,"column":6}},"30":{"start":{"line":43,"column":36},"end":{"line":43,"column":44}},"31":{"start":{"line":44,"column":22},"end":{"line":44,"column":68}},"32":{"start":{"line":45,"column":8},"end":{"line":49,"column":9}},"33":{"start":{"line":46,"column":12},"end":{"line":48,"column":15}},"34":{"start":{"line":50,"column":8},"end":{"line":54,"column":9}},"35":{"start":{"line":51,"column":12},"end":{"line":53,"column":15}},"36":{"start":{"line":55,"column":8},"end":{"line":59,"column":9}},"37":{"start":{"line":56,"column":12},"end":{"line":58,"column":15}},"38":{"start":{"line":60,"column":8},"end":{"line":62,"column":11}},"39":{"start":{"line":65,"column":0},"end":{"line":65,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":16},"end":{"line":19,"column":17}},"loc":{"start":{"line":19,"column":30},"end":{"line":41,"column":6}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":64},"end":{"line":19,"column":65}},"loc":{"start":{"line":19,"column":77},"end":{"line":41,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":42,"column":11},"end":{"line":42,"column":12}},"loc":{"start":{"line":42,"column":25},"end":{"line":63,"column":6}},"line":42},"11":{"name":"(anonymous_11)","decl":{"start":{"line":42,"column":59},"end":{"line":42,"column":60}},"loc":{"start":{"line":42,"column":72},"end":{"line":63,"column":5}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":22,"column":32},"end":{"line":22,"column":112}},"type":"cond-expr","locations":[{"start":{"line":22,"column":79},"end":{"line":22,"column":85}},{"start":{"line":22,"column":88},"end":{"line":22,"column":112}}],"line":22},"9":{"loc":{"start":{"line":22,"column":32},"end":{"line":22,"column":76}},"type":"binary-expr","locations":[{"start":{"line":22,"column":32},"end":{"line":22,"column":51}},{"start":{"line":22,"column":55},"end":{"line":22,"column":76}}],"line":22},"10":{"loc":{"start":{"line":23,"column":12},"end":{"line":27,"column":13}},"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":27,"column":13}},{"start":{"line":23,"column":12},"end":{"line":27,"column":13}}],"line":23},"11":{"loc":{"start":{"line":45,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":49,"column":9}},{"start":{"line":45,"column":8},"end":{"line":49,"column":9}}],"line":45},"12":{"loc":{"start":{"line":50,"column":8},"end":{"line":54,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":54,"column":9}},{"start":{"line":50,"column":8},"end":{"line":54,"column":9}}],"line":50},"13":{"loc":{"start":{"line":55,"column":8},"end":{"line":59,"column":9}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":59,"column":9}},{"start":{"line":55,"column":8},"end":{"line":59,"column":9}}],"line":55}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":0,"9":0,"10":0,"11":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,1],"7":[3,3],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/auth/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/auth/controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,kDAA0B;AAC1B,wDAAqC;AACrC,6EAAqD;AAErD,MAAM,cAAc,GAAG;IACrB,UAAU,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QAChD,IAAI;YACF,MAAM,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;YAC7C,MAAM,WAAW,GAAG,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,WAAW,EAAE;gBAChB,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;oBAClD,KAAK,EAAE,yBAAyB;iBACjC,CAAC,CAAC;aACJ;YAED,MAAM,QAAQ,GAAG,MAAM,eAAK,CAAC,GAAG,CAAC,+CAA+C,EAAE;gBAChF,OAAO,EAAE;oBACP,aAAa,EAAE,UAAU,WAAW,EAAE;iBACvC;aACF,CAAC,CAAC;YAEH,wDAAwD;YACxD,MAAM,YAAY,GAAG,MAAM,iBAAY,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACzE,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CACtC,YAAY,CACb,CAAC;SACH;QAAC,OAAO,KAAK,EAAE;YAChB,+CAA+C;YAC7C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;SACrD;IACH,CAAC,CAAA;IACD,KAAK,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QAC3C,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QACrC,MAAM,KAAK,GAAG,MAAM,iBAAY,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACxD,IAAI,KAAK,KAAK,SAAS,EAAE;YACvB,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;gBAClD,KAAK,EAAE,mBAAmB;aAC3B,CAAC,CAAC;SACJ;QACD,IAAI,CAAC,KAAK,EAAE;YACV,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;gBAChD,KAAK,EAAE,cAAc;aACtB,CAAC,CAAC;SACJ;QACD,IAAI,KAAK,KAAK,GAAG,EAAE;YACjB,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;gBAClD,KAAK,EAAE,gBAAgB;aACxB,CAAC,CAAC;SACJ;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;YACvC,KAAK;SACN,CAAC,CAAC;IACL,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,cAAc,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport axios from 'axios';\r\nimport loginService from './service';\r\nimport responseCodes from '../general/responseCodes';\r\n\r\nconst authController = {\r\n  googleAuth: async (req: Request, res: Response) => {\r\n    try {\r\n      const authHeader = req.headers.authorization;\r\n      const googleToken = authHeader?.split(' ')[1];\r\n      if (!googleToken) {\r\n        return res.status(responseCodes.notAuthorized).json({\r\n          error: 'No googleToken provided',\r\n        });\r\n      }\r\n\r\n      const response = await axios.get('https://www.googleapis.com/oauth2/v1/userinfo', {\r\n        headers: {\r\n          Authorization: `Bearer ${googleToken}`,\r\n        },\r\n      });\r\n\r\n      // console.log('Google response:', response.data.email);\r\n      const loginProfile = await loginService.googleLogin(response.data.email);\r\n      return res.status(responseCodes.ok).json(\r\n        loginProfile,\r\n      );\r\n    } catch (error) {\r\n    // console.error('External API error:', error);\r\n      return res.status(500).send('Google autenth error');\r\n    }\r\n  },\r\n  login: async (req: Request, res: Response) => {\r\n    const { email, password } = req.body;\r\n    const token = await loginService.login(email, password);\r\n    if (token === undefined) {\r\n      return res.status(responseCodes.notAuthorized).json({\r\n        error: 'Check credentials',\r\n      });\r\n    }\r\n    if (!token) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    if (token === '0') {\r\n      return res.status(responseCodes.notAuthorized).json({\r\n        error: 'Check password',\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      token,\r\n    });\r\n  },\r\n};\r\n\r\nexport default authController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3d099bf19ff26b9d99eb61b182523c60aef77435","contentHash":"764d30a8123f3000cb5b9be06528377a8d958e73637b36ea3b1c1408bcf38213"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\auth\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\auth\\service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":17,"column":18},"end":{"line":17,"column":62}},"16":{"start":{"line":18,"column":22},"end":{"line":18,"column":81}},"17":{"start":{"line":19,"column":21},"end":{"line":19,"column":79}},"18":{"start":{"line":20,"column":21},"end":{"line":42,"column":1}},"19":{"start":{"line":21,"column":32},"end":{"line":32,"column":6}},"20":{"start":{"line":22,"column":21},"end":{"line":22,"column":66}},"21":{"start":{"line":23,"column":8},"end":{"line":24,"column":29}},"22":{"start":{"line":24,"column":12},"end":{"line":24,"column":29}},"23":{"start":{"line":25,"column":8},"end":{"line":26,"column":25}},"24":{"start":{"line":26,"column":12},"end":{"line":26,"column":25}},"25":{"start":{"line":27,"column":22},"end":{"line":27,"column":80}},"26":{"start":{"line":28,"column":8},"end":{"line":29,"column":23}},"27":{"start":{"line":29,"column":12},"end":{"line":29,"column":23}},"28":{"start":{"line":30,"column":22},"end":{"line":30,"column":59}},"29":{"start":{"line":31,"column":8},"end":{"line":31,"column":21}},"30":{"start":{"line":33,"column":28},"end":{"line":41,"column":6}},"31":{"start":{"line":34,"column":21},"end":{"line":34,"column":66}},"32":{"start":{"line":35,"column":8},"end":{"line":36,"column":29}},"33":{"start":{"line":36,"column":12},"end":{"line":36,"column":29}},"34":{"start":{"line":37,"column":8},"end":{"line":38,"column":25}},"35":{"start":{"line":38,"column":12},"end":{"line":38,"column":25}},"36":{"start":{"line":39,"column":22},"end":{"line":39,"column":59}},"37":{"start":{"line":40,"column":8},"end":{"line":40,"column":31}},"38":{"start":{"line":43,"column":0},"end":{"line":43,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":21,"column":11},"end":{"line":21,"column":12}},"loc":{"start":{"line":21,"column":32},"end":{"line":32,"column":6}},"line":21},"9":{"name":"(anonymous_9)","decl":{"start":{"line":21,"column":66},"end":{"line":21,"column":67}},"loc":{"start":{"line":21,"column":79},"end":{"line":32,"column":5}},"line":21},"10":{"name":"(anonymous_10)","decl":{"start":{"line":33,"column":17},"end":{"line":33,"column":18}},"loc":{"start":{"line":33,"column":28},"end":{"line":41,"column":6}},"line":33},"11":{"name":"(anonymous_11)","decl":{"start":{"line":33,"column":62},"end":{"line":33,"column":63}},"loc":{"start":{"line":33,"column":75},"end":{"line":41,"column":5}},"line":33}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":23,"column":8},"end":{"line":24,"column":29}},"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":24,"column":29}},{"start":{"line":23,"column":8},"end":{"line":24,"column":29}}],"line":23},"9":{"loc":{"start":{"line":25,"column":8},"end":{"line":26,"column":25}},"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":26,"column":25}},{"start":{"line":25,"column":8},"end":{"line":26,"column":25}}],"line":25},"10":{"loc":{"start":{"line":28,"column":8},"end":{"line":29,"column":23}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":29,"column":23}},{"start":{"line":28,"column":8},"end":{"line":29,"column":23}}],"line":28},"11":{"loc":{"start":{"line":35,"column":8},"end":{"line":36,"column":29}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":36,"column":29}},{"start":{"line":35,"column":8},"end":{"line":36,"column":29}}],"line":35},"12":{"loc":{"start":{"line":37,"column":8},"end":{"line":38,"column":25}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":38,"column":25}},{"start":{"line":37,"column":8},"end":{"line":38,"column":25}}],"line":37}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":0,"9":0,"10":0,"11":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/auth/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/auth/service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,sCAAsC;AACtC,yCAAyC;AACzC,+DAA2C;AAC3C,kFAA0D;AAC1D,gFAAwD;AAExD,MAAM,YAAY,GAAG;IACnB,KAAK,EAAE,CAAO,KAAa,EAAE,QAAgB,EAAE,EAAE;QAC/C,MAAM,IAAI,GAAQ,MAAM,iBAAW,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,IAAI,KAAK,SAAS;YAAE,OAAO,SAAS,CAAC;QACzC,IAAI,CAAC,IAAI;YAAE,OAAO,KAAK,CAAC;QACxB,MAAM,KAAK,GAAG,MAAM,qBAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/D,IAAI,CAAC,KAAK;YAAE,OAAO,GAAG,CAAC;QACvB,MAAM,KAAK,GAAG,MAAM,oBAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,OAAO,KAAK,CAAC;IACf,CAAC,CAAA;IACD,WAAW,EAAE,CAAO,KAAa,EAAE,EAAE;QACnC,MAAM,IAAI,GAAQ,MAAM,iBAAW,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,IAAI,KAAK,SAAS;YAAE,OAAO,SAAS,CAAC;QACzC,IAAI,CAAC,IAAI;YAAE,OAAO,KAAK,CAAC;QACxB,MAAM,KAAK,GAAG,MAAM,oBAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;IACzB,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,YAAY,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport userService from '../users/service';\r\nimport hashService from '../general/services/hashService';\r\nimport jwtService from '../general/services/jwtService';\r\n\r\nconst loginService = {\r\n  login: async (email: string, password: string) => {\r\n    const user: any = await userService.getUserByEmail(email);\r\n    if (user === undefined) return undefined;\r\n    if (!user) return false;\r\n    const match = await hashService.match(password, user.password);\r\n    if (!match) return '0';\r\n    const token = await jwtService.sign(user);\r\n    return token;\r\n  },\r\n  googleLogin: async (email: string) => {\r\n    const user: any = await userService.getUserByEmail(email);\r\n    if (user === undefined) return undefined;\r\n    if (!user) return false;\r\n    const token = await jwtService.sign(user);\r\n    return { token, user };\r\n  },\r\n};\r\n\r\nexport default loginService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"801670231393521a3043d1d855d641865f03892a","contentHash":"0b4bbbb204a1d9fc9b512b9a5c49cd1077226540ee6c53ff35b8e505fb3ea353"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\users\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\users\\service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":20},"end":{"line":83,"column":1}},"17":{"start":{"line":17,"column":23},"end":{"line":25,"column":6}},"18":{"start":{"line":18,"column":8},"end":{"line":24,"column":9}},"19":{"start":{"line":19,"column":28},"end":{"line":19,"column":142}},"20":{"start":{"line":20,"column":12},"end":{"line":20,"column":25}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":25}},"22":{"start":{"line":26,"column":25},"end":{"line":37,"column":6}},"23":{"start":{"line":27,"column":8},"end":{"line":36,"column":9}},"24":{"start":{"line":28,"column":27},"end":{"line":28,"column":206}},"25":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"26":{"start":{"line":30,"column":16},"end":{"line":30,"column":31}},"27":{"start":{"line":32,"column":12},"end":{"line":32,"column":25}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"29":{"start":{"line":38,"column":31},"end":{"line":49,"column":6}},"30":{"start":{"line":39,"column":8},"end":{"line":48,"column":9}},"31":{"start":{"line":40,"column":27},"end":{"line":40,"column":160}},"32":{"start":{"line":41,"column":12},"end":{"line":43,"column":13}},"33":{"start":{"line":42,"column":16},"end":{"line":42,"column":31}},"34":{"start":{"line":44,"column":12},"end":{"line":44,"column":25}},"35":{"start":{"line":47,"column":12},"end":{"line":47,"column":25}},"36":{"start":{"line":50,"column":29},"end":{"line":58,"column":6}},"37":{"start":{"line":51,"column":8},"end":{"line":57,"column":9}},"38":{"start":{"line":52,"column":29},"end":{"line":52,"column":97}},"39":{"start":{"line":53,"column":12},"end":{"line":53,"column":35}},"40":{"start":{"line":56,"column":12},"end":{"line":56,"column":25}},"41":{"start":{"line":59,"column":36},"end":{"line":70,"column":6}},"42":{"start":{"line":60,"column":8},"end":{"line":69,"column":9}},"43":{"start":{"line":61,"column":29},"end":{"line":61,"column":123}},"44":{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},"45":{"start":{"line":63,"column":16},"end":{"line":63,"column":28}},"46":{"start":{"line":65,"column":12},"end":{"line":65,"column":25}},"47":{"start":{"line":68,"column":12},"end":{"line":68,"column":25}},"48":{"start":{"line":71,"column":24},"end":{"line":82,"column":6}},"49":{"start":{"line":72,"column":8},"end":{"line":81,"column":9}},"50":{"start":{"line":73,"column":29},"end":{"line":73,"column":159}},"51":{"start":{"line":74,"column":12},"end":{"line":76,"column":13}},"52":{"start":{"line":75,"column":16},"end":{"line":75,"column":28}},"53":{"start":{"line":77,"column":12},"end":{"line":77,"column":25}},"54":{"start":{"line":80,"column":12},"end":{"line":80,"column":25}},"55":{"start":{"line":84,"column":0},"end":{"line":84,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":18}},"loc":{"start":{"line":17,"column":23},"end":{"line":25,"column":6}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":57},"end":{"line":17,"column":58}},"loc":{"start":{"line":17,"column":70},"end":{"line":25,"column":5}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":17},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":25},"end":{"line":37,"column":6}},"line":26},"11":{"name":"(anonymous_11)","decl":{"start":{"line":26,"column":59},"end":{"line":26,"column":60}},"loc":{"start":{"line":26,"column":72},"end":{"line":37,"column":5}},"line":26},"12":{"name":"(anonymous_12)","decl":{"start":{"line":38,"column":20},"end":{"line":38,"column":21}},"loc":{"start":{"line":38,"column":31},"end":{"line":49,"column":6}},"line":38},"13":{"name":"(anonymous_13)","decl":{"start":{"line":38,"column":65},"end":{"line":38,"column":66}},"loc":{"start":{"line":38,"column":78},"end":{"line":49,"column":5}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":50,"column":16},"end":{"line":50,"column":17}},"loc":{"start":{"line":50,"column":29},"end":{"line":58,"column":6}},"line":50},"15":{"name":"(anonymous_15)","decl":{"start":{"line":50,"column":63},"end":{"line":50,"column":64}},"loc":{"start":{"line":50,"column":76},"end":{"line":58,"column":5}},"line":50},"16":{"name":"(anonymous_16)","decl":{"start":{"line":59,"column":20},"end":{"line":59,"column":21}},"loc":{"start":{"line":59,"column":36},"end":{"line":70,"column":6}},"line":59},"17":{"name":"(anonymous_17)","decl":{"start":{"line":59,"column":70},"end":{"line":59,"column":71}},"loc":{"start":{"line":59,"column":83},"end":{"line":70,"column":5}},"line":59},"18":{"name":"(anonymous_18)","decl":{"start":{"line":71,"column":16},"end":{"line":71,"column":17}},"loc":{"start":{"line":71,"column":24},"end":{"line":82,"column":6}},"line":71},"19":{"name":"(anonymous_19)","decl":{"start":{"line":71,"column":58},"end":{"line":71,"column":59}},"loc":{"start":{"line":71,"column":71},"end":{"line":82,"column":5}},"line":71}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},{"start":{"line":29,"column":12},"end":{"line":31,"column":13}}],"line":29},"9":{"loc":{"start":{"line":41,"column":12},"end":{"line":43,"column":13}},"type":"if","locations":[{"start":{"line":41,"column":12},"end":{"line":43,"column":13}},{"start":{"line":41,"column":12},"end":{"line":43,"column":13}}],"line":41},"10":{"loc":{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},{"start":{"line":62,"column":12},"end":{"line":64,"column":13}}],"line":62},"11":{"loc":{"start":{"line":74,"column":12},"end":{"line":76,"column":13}},"type":"if","locations":[{"start":{"line":74,"column":12},"end":{"line":76,"column":13}},{"start":{"line":74,"column":12},"end":{"line":76,"column":13}}],"line":74}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/users/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/users/service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAIA,8DAAkC;AAElC,MAAM,WAAW,GAAG;IAClB,WAAW,EAAE,GAAmC,EAAE;QAChD,IAAI;YACF,MAAM,CAAC,KAAK,CAAC,GAA6B,MAAM,kBAAI,CAAC,KAAK,CACxD,kFAAkF,CACnF,CAAC;YACF,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,WAAW,EAAE,CAAO,EAAU,EAAsC,EAAE;QACpE,IAAI;YACF,MAAM,CAAC,IAAI,CAAC,GAA6B,MAAM,kBAAI,CAAC,KAAK,CACvD,6IAA6I,EAC7I,CAAC,EAAE,CAAC,CACL,CAAC;YACF,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;gBACzB,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;aAChB;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,KAAa,EAAsC,EAAE;QAC1E,IAAI;YACF,MAAM,CAAC,IAAI,CAAC,GAA6B,MAAM,kBAAI,CAAC,KAAK,CACvD,4FAA4F,EAC5F,CAAC,KAAK,CAAC,CACR,CAAC;YACF,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;gBACzB,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;aAChB;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,OAAiB,EAA2B,EAAE;QAC/D,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,yBAAyB,EACzB,CAAC,OAAO,CAAC,CACV,CAAC;YACF,OAAO,MAAM,CAAC,QAAQ,CAAC;SACxB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,UAAe,EAAgC,EAAE;QACtE,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,iCAAiC,EACjC,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,CAAC,CAC5B,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC3B,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,EAAU,EAAgC,EAAE;QAC7D,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,gFAAgF,EAChF,CAAC,IAAI,IAAI,EAAE,EAAE,EAAE,CAAC,CACjB,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC3B,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,WAAW,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport { INewUser, IUser } from './interfaces';\r\nimport pool from '../../database';\r\n\r\nconst userService = {\r\n  getAllUsers: async (): Promise<IUser[] | false> => {\r\n    try {\r\n      const [users]: [IUser[], FieldPacket[]] = await pool.query(\r\n        'SELECT id, firstName, lastName, email, role FROM users WHERE dateDeleted is NULL',\r\n      );\r\n      return users;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  getUserById: async (id: number): Promise<IUser | false | undefined> => {\r\n    try {\r\n      const [user]: [IUser[], FieldPacket[]] = await pool.query(\r\n        'SELECT id, firstName, lastName, email, role, dateCreated, dateUpdated, dateDeleted  FROM users WHERE id = ? AND dateDeleted is NULL LIMIT 1',\r\n        [id],\r\n      );\r\n      if (user[0] !== undefined) {\r\n        return user[0];\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  getUserByEmail: async (email: string): Promise<IUser | false | undefined> => {\r\n    try {\r\n      const [user]: [IUser[], FieldPacket[]] = await pool.query(\r\n        'SELECT firstName, lastName, email, role FROM users WHERE email = ? AND dateDeleted is NULL',\r\n        [email],\r\n      );\r\n      if (user[0] !== undefined) {\r\n        return user[0];\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  createUser: async (newUser: INewUser): Promise<number | false> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'INSERT INTO users SET ?',\r\n        [newUser],\r\n      );\r\n      return result.insertId;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  updateUserById: async (updateUser: any): Promise<boolean | undefined> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE users SET ? WHERE Id = ?',\r\n        [updateUser, updateUser.id],\r\n      );\r\n      if (result.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  deleteUser: async (id: number): Promise<boolean | undefined> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        \"UPDATE users SET dateDeleted = ?, email = CONCAT('deleted',email) WHERE id = ?\",\r\n        [new Date(), id],\r\n      );\r\n      if (result.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default userService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"01908749f4cd2c7c06be096ea271e11a336ccb12","contentHash":"e39123163f3d3a56dff970dc005c979efbe5be4253e593d0856780b899bc88c8"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\database.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\database.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":13},"end":{"line":18,"column":14}},"5":{"start":{"line":19,"column":0},"end":{"line":19,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/database.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/database.ts"],"names":[],"mappings":";;;;;AAAA,oDAA2B;AAE3B,MAAM,IAAI,GAAG,gBAAK;KACf,UAAU,CAAC;IACV,IAAI,EAAE,cAAc;IACpB,IAAI,EAAE,OAAO;IACb,QAAQ,EAAE,QAAQ;IAClB,QAAQ,EAAE,YAAY;IACtB,kBAAkB,EAAE,IAAI;IACxB,eAAe,EAAE,EAAE;IACnB,UAAU,EAAE,CAAC;IACb,OAAO,EAAE,SAAS;CACnB,CAAC;KACD,OAAO,EAAE,CAAC;AAEb,kBAAe,IAAI,CAAC","sourcesContent":["import mysql from 'mysql2';\r\n\r\nconst pool = mysql\r\n  .createPool({\r\n    host: 'mysql_server',\r\n    user: 'admin',\r\n    password: 'parool',\r\n    database: 'scheduleDb',\r\n    waitForConnections: true,\r\n    connectionLimit: 10,\r\n    queueLimit: 0,\r\n    charset: 'UTF8MB4',\r\n  })\r\n  .promise();\r\n\r\nexport default pool;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"370fba584ae9ef988a26a9b8066f057af8610002","contentHash":"72772be7fda885ede1d54900e50f124a4e4671893187a2cbbfbe8aee6668584f"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\services\\hashService.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\services\\hashService.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":17},"end":{"line":15,"column":51}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":21}},"17":{"start":{"line":17,"column":20},"end":{"line":26,"column":1}},"18":{"start":{"line":18,"column":24},"end":{"line":21,"column":6}},"19":{"start":{"line":19,"column":21},"end":{"line":19,"column":70}},"20":{"start":{"line":20,"column":8},"end":{"line":20,"column":20}},"21":{"start":{"line":22,"column":31},"end":{"line":25,"column":6}},"22":{"start":{"line":23,"column":22},"end":{"line":23,"column":68}},"23":{"start":{"line":24,"column":8},"end":{"line":24,"column":21}},"24":{"start":{"line":27,"column":0},"end":{"line":27,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":10},"end":{"line":18,"column":11}},"loc":{"start":{"line":18,"column":24},"end":{"line":21,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":58},"end":{"line":18,"column":59}},"loc":{"start":{"line":18,"column":71},"end":{"line":21,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":22,"column":11},"end":{"line":22,"column":12}},"loc":{"start":{"line":22,"column":31},"end":{"line":25,"column":6}},"line":22},"11":{"name":"(anonymous_11)","decl":{"start":{"line":22,"column":65},"end":{"line":22,"column":66}},"loc":{"start":{"line":22,"column":78},"end":{"line":25,"column":5}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[0,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/services/hashService.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/services/hashService.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,oDAA4B;AAE5B,MAAM,UAAU,GAAG,EAAE,CAAC;AACtB,MAAM,WAAW,GAAG;IAClB,IAAI,EAAE,CAAO,QAAgB,EAAmB,EAAE;QAChD,MAAM,IAAI,GAAG,MAAM,gBAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QACrD,OAAO,IAAI,CAAC;IACd,CAAC,CAAA;IACD,KAAK,EAAE,CAAO,QAAgB,EAAE,IAAY,EAAoB,EAAE;QAChE,MAAM,KAAK,GAAG,MAAM,gBAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACnD,OAAO,KAAK,CAAC;IACf,CAAC,CAAA;CACF,CAAC;AACF,kBAAe,WAAW,CAAC","sourcesContent":["import bcrypt from 'bcrypt';\r\n\r\nconst saltRounds = 10;\r\nconst hashService = {\r\n  hash: async (password: string): Promise<string> => {\r\n    const hash = await bcrypt.hash(password, saltRounds);\r\n    return hash;\r\n  },\r\n  match: async (password: string, hash: string): Promise<boolean> => {\r\n    const match = await bcrypt.compare(password, hash);\r\n    return match;\r\n  },\r\n};\r\nexport default hashService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e3b3dd5f4e6d263f0739b42dc5c1c75412ce5a09","contentHash":"4831f20364be290fb0c77991a6b1134a50a4263e6207c426b23900f01eb52436"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\services\\jwtService.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\services\\jwtService.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":8,"column":23},"end":{"line":8,"column":63}},"4":{"start":{"line":9,"column":20},"end":{"line":9,"column":51}},"5":{"start":{"line":10,"column":19},"end":{"line":28,"column":1}},"6":{"start":{"line":12,"column":24},"end":{"line":15,"column":9}},"7":{"start":{"line":16,"column":22},"end":{"line":16,"column":92}},"8":{"start":{"line":17,"column":8},"end":{"line":17,"column":21}},"9":{"start":{"line":20,"column":8},"end":{"line":26,"column":9}},"10":{"start":{"line":21,"column":27},"end":{"line":21,"column":76}},"11":{"start":{"line":22,"column":12},"end":{"line":22,"column":26}},"12":{"start":{"line":25,"column":12},"end":{"line":25,"column":25}},"13":{"start":{"line":29,"column":0},"end":{"line":29,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":10},"end":{"line":11,"column":11}},"loc":{"start":{"line":11,"column":20},"end":{"line":18,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":12},"end":{"line":19,"column":13}},"loc":{"start":{"line":19,"column":23},"end":{"line":27,"column":5}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/services/jwtService.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/services/jwtService.ts"],"names":[],"mappings":";;;;;AAAA,sCAAsC;AACtC,yCAAyC;AACzC,gEAA+B;AAG/B,MAAM,WAAW,GAAG,+BAA+B,CAAC;AAEpD,MAAM,UAAU,GAAG;IACjB,IAAI,EAAE,CAAC,IAAW,EAAE,EAAE;QACpB,MAAM,OAAO,GAAG;YACd,EAAE,EAAE,IAAI,CAAC,EAAE;YACX,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB,CAAC;QACF,MAAM,KAAK,GAAG,sBAAG,CAAC,IAAI,CAAC,OAAO,EAAE,WAAW,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;QAClE,OAAO,KAAK,CAAC;IACf,CAAC;IACD,MAAM,EAAE,CAAC,KAAa,EAAE,EAAE;QACxB,IAAI;YACF,MAAM,MAAM,GAAG,sBAAG,CAAC,MAAM,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;YAC9C,OAAO,MAAM,CAAC;SACf;QAAC,WAAM;YACN,OAAO,KAAK,CAAC;SACd;IACH,CAAC;CACF,CAAC;AAEF,kBAAe,UAAU,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport jwt from 'jsonwebtoken';\r\nimport { IUser } from '../../users/interfaces';\r\n\r\nconst jwtPassword = 'jagj9032jfKJKJgka903dsksfjsöd';\r\n\r\nconst jwtService = {\r\n  sign: (user: IUser) => {\r\n    const payload = {\r\n      id: user.id,\r\n      role: user.role,\r\n    };\r\n    const token = jwt.sign(payload, jwtPassword, { expiresIn: '1h' });\r\n    return token;\r\n  },\r\n  verify: (token: string) => {\r\n    try {\r\n      const verify = jwt.verify(token, jwtPassword);\r\n      return verify;\r\n    } catch {\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default jwtService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4ff4ab486795cbc8dbbbc8cc2386a999ef06a87d","contentHash":"bbdf8656dedf82bd3eeafdd223df3fa20b4f0af550dd8f908a04e01c728f7271"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\responseCodes.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\responseCodes.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":4,"column":22},"end":{"line":12,"column":1}},"2":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/responseCodes.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/responseCodes.ts"],"names":[],"mappings":";;AAAA,sBAAsB;AACtB,MAAM,aAAa,GAAG;IACpB,EAAE,EAAE,GAAG;IACP,OAAO,EAAE,GAAG;IACZ,SAAS,EAAE,GAAG;IACd,UAAU,EAAE,GAAG;IACf,aAAa,EAAE,GAAG;IAClB,QAAQ,EAAE,GAAG;IACb,WAAW,EAAE,GAAG;CACjB,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["// Http response codes\r\nconst responseCodes = {\r\n  ok: 200,\r\n  created: 201,\r\n  noContent: 204,\r\n  badRequest: 400,\r\n  notAuthorized: 401,\r\n  notFound: 404,\r\n  ServerError: 500,\r\n};\r\n\r\nexport default responseCodes;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b7f0eaf3f25a2fa382f0b4ca9ff563f7dbb03df1","contentHash":"f75473e3e4acb9a4fdbf2cd29f9980cbb4d31888efa1b954e916aa4779b62c24"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\users\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\users\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":76}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":23},"end":{"line":147,"column":1}},"18":{"start":{"line":18,"column":31},"end":{"line":28,"column":6}},"19":{"start":{"line":19,"column":22},"end":{"line":19,"column":59}},"20":{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},"21":{"start":{"line":21,"column":12},"end":{"line":23,"column":15}},"22":{"start":{"line":25,"column":8},"end":{"line":27,"column":11}},"23":{"start":{"line":29,"column":31},"end":{"line":55,"column":6}},"24":{"start":{"line":30,"column":19},"end":{"line":30,"column":46}},"25":{"start":{"line":31,"column":21},"end":{"line":31,"column":60}},"26":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"27":{"start":{"line":33,"column":12},"end":{"line":35,"column":15}},"28":{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},"29":{"start":{"line":39,"column":12},"end":{"line":41,"column":15}},"30":{"start":{"line":43,"column":8},"end":{"line":47,"column":9}},"31":{"start":{"line":44,"column":12},"end":{"line":46,"column":15}},"32":{"start":{"line":48,"column":8},"end":{"line":50,"column":11}},"33":{"start":{"line":56,"column":30},"end":{"line":75,"column":6}},"34":{"start":{"line":57,"column":19},"end":{"line":57,"column":46}},"35":{"start":{"line":58,"column":8},"end":{"line":62,"column":9}},"36":{"start":{"line":59,"column":12},"end":{"line":61,"column":15}},"37":{"start":{"line":63,"column":27},"end":{"line":63,"column":65}},"38":{"start":{"line":64,"column":8},"end":{"line":68,"column":9}},"39":{"start":{"line":65,"column":12},"end":{"line":67,"column":15}},"40":{"start":{"line":69,"column":8},"end":{"line":73,"column":9}},"41":{"start":{"line":70,"column":12},"end":{"line":72,"column":15}},"42":{"start":{"line":74,"column":8},"end":{"line":74,"column":68}},"43":{"start":{"line":76,"column":27},"end":{"line":113,"column":6}},"44":{"start":{"line":77,"column":54},"end":{"line":77,"column":62}},"45":{"start":{"line":78,"column":8},"end":{"line":82,"column":9}},"46":{"start":{"line":79,"column":12},"end":{"line":81,"column":15}},"47":{"start":{"line":83,"column":8},"end":{"line":87,"column":9}},"48":{"start":{"line":84,"column":12},"end":{"line":86,"column":15}},"49":{"start":{"line":88,"column":8},"end":{"line":92,"column":9}},"50":{"start":{"line":89,"column":12},"end":{"line":91,"column":15}},"51":{"start":{"line":93,"column":8},"end":{"line":97,"column":9}},"52":{"start":{"line":94,"column":12},"end":{"line":96,"column":15}},"53":{"start":{"line":98,"column":24},"end":{"line":103,"column":9}},"54":{"start":{"line":104,"column":19},"end":{"line":104,"column":62}},"55":{"start":{"line":105,"column":8},"end":{"line":109,"column":9}},"56":{"start":{"line":106,"column":12},"end":{"line":108,"column":15}},"57":{"start":{"line":110,"column":8},"end":{"line":112,"column":11}},"58":{"start":{"line":114,"column":34},"end":{"line":146,"column":6}},"59":{"start":{"line":115,"column":19},"end":{"line":115,"column":46}},"60":{"start":{"line":116,"column":54},"end":{"line":116,"column":62}},"61":{"start":{"line":117,"column":8},"end":{"line":121,"column":9}},"62":{"start":{"line":118,"column":12},"end":{"line":120,"column":15}},"63":{"start":{"line":122,"column":8},"end":{"line":126,"column":9}},"64":{"start":{"line":123,"column":12},"end":{"line":125,"column":15}},"65":{"start":{"line":127,"column":27},"end":{"line":133,"column":9}},"66":{"start":{"line":134,"column":27},"end":{"line":134,"column":77}},"67":{"start":{"line":135,"column":8},"end":{"line":139,"column":9}},"68":{"start":{"line":136,"column":12},"end":{"line":138,"column":15}},"69":{"start":{"line":140,"column":8},"end":{"line":144,"column":9}},"70":{"start":{"line":141,"column":12},"end":{"line":143,"column":15}},"71":{"start":{"line":145,"column":8},"end":{"line":145,"column":68}},"72":{"start":{"line":148,"column":0},"end":{"line":148,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":17},"end":{"line":18,"column":18}},"loc":{"start":{"line":18,"column":31},"end":{"line":28,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":65},"end":{"line":18,"column":66}},"loc":{"start":{"line":18,"column":78},"end":{"line":28,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":18}},"loc":{"start":{"line":29,"column":31},"end":{"line":55,"column":6}},"line":29},"11":{"name":"(anonymous_11)","decl":{"start":{"line":29,"column":65},"end":{"line":29,"column":66}},"loc":{"start":{"line":29,"column":78},"end":{"line":55,"column":5}},"line":29},"12":{"name":"(anonymous_12)","decl":{"start":{"line":56,"column":16},"end":{"line":56,"column":17}},"loc":{"start":{"line":56,"column":30},"end":{"line":75,"column":6}},"line":56},"13":{"name":"(anonymous_13)","decl":{"start":{"line":56,"column":64},"end":{"line":56,"column":65}},"loc":{"start":{"line":56,"column":77},"end":{"line":75,"column":5}},"line":56},"14":{"name":"(anonymous_14)","decl":{"start":{"line":76,"column":13},"end":{"line":76,"column":14}},"loc":{"start":{"line":76,"column":27},"end":{"line":113,"column":6}},"line":76},"15":{"name":"(anonymous_15)","decl":{"start":{"line":76,"column":61},"end":{"line":76,"column":62}},"loc":{"start":{"line":76,"column":74},"end":{"line":113,"column":5}},"line":76},"16":{"name":"(anonymous_16)","decl":{"start":{"line":114,"column":20},"end":{"line":114,"column":21}},"loc":{"start":{"line":114,"column":34},"end":{"line":146,"column":6}},"line":114},"17":{"name":"(anonymous_17)","decl":{"start":{"line":114,"column":68},"end":{"line":114,"column":69}},"loc":{"start":{"line":114,"column":81},"end":{"line":146,"column":5}},"line":114}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},{"start":{"line":20,"column":8},"end":{"line":24,"column":9}}],"line":20},"9":{"loc":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},{"start":{"line":32,"column":8},"end":{"line":36,"column":9}}],"line":32},"10":{"loc":{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},{"start":{"line":38,"column":8},"end":{"line":42,"column":9}}],"line":38},"11":{"loc":{"start":{"line":43,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":47,"column":9}},{"start":{"line":43,"column":8},"end":{"line":47,"column":9}}],"line":43},"12":{"loc":{"start":{"line":58,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":62,"column":9}},{"start":{"line":58,"column":8},"end":{"line":62,"column":9}}],"line":58},"13":{"loc":{"start":{"line":64,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":68,"column":9}},{"start":{"line":64,"column":8},"end":{"line":68,"column":9}}],"line":64},"14":{"loc":{"start":{"line":69,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":73,"column":9}},{"start":{"line":69,"column":8},"end":{"line":73,"column":9}}],"line":69},"15":{"loc":{"start":{"line":78,"column":8},"end":{"line":82,"column":9}},"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":82,"column":9}},{"start":{"line":78,"column":8},"end":{"line":82,"column":9}}],"line":78},"16":{"loc":{"start":{"line":83,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":83,"column":8},"end":{"line":87,"column":9}},{"start":{"line":83,"column":8},"end":{"line":87,"column":9}}],"line":83},"17":{"loc":{"start":{"line":88,"column":8},"end":{"line":92,"column":9}},"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":92,"column":9}},{"start":{"line":88,"column":8},"end":{"line":92,"column":9}}],"line":88},"18":{"loc":{"start":{"line":93,"column":8},"end":{"line":97,"column":9}},"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":97,"column":9}},{"start":{"line":93,"column":8},"end":{"line":97,"column":9}}],"line":93},"19":{"loc":{"start":{"line":105,"column":8},"end":{"line":109,"column":9}},"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":109,"column":9}},{"start":{"line":105,"column":8},"end":{"line":109,"column":9}}],"line":105},"20":{"loc":{"start":{"line":117,"column":8},"end":{"line":121,"column":9}},"type":"if","locations":[{"start":{"line":117,"column":8},"end":{"line":121,"column":9}},{"start":{"line":117,"column":8},"end":{"line":121,"column":9}}],"line":117},"21":{"loc":{"start":{"line":122,"column":8},"end":{"line":126,"column":9}},"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":126,"column":9}},{"start":{"line":122,"column":8},"end":{"line":126,"column":9}}],"line":122},"22":{"loc":{"start":{"line":122,"column":12},"end":{"line":122,"column":54}},"type":"binary-expr","locations":[{"start":{"line":122,"column":12},"end":{"line":122,"column":22}},{"start":{"line":122,"column":26},"end":{"line":122,"column":35}},{"start":{"line":122,"column":39},"end":{"line":122,"column":45}},{"start":{"line":122,"column":49},"end":{"line":122,"column":54}}],"line":122},"23":{"loc":{"start":{"line":135,"column":8},"end":{"line":139,"column":9}},"type":"if","locations":[{"start":{"line":135,"column":8},"end":{"line":139,"column":9}},{"start":{"line":135,"column":8},"end":{"line":139,"column":9}}],"line":135},"24":{"loc":{"start":{"line":140,"column":8},"end":{"line":144,"column":9}},"type":"if","locations":[{"start":{"line":140,"column":8},"end":{"line":144,"column":9}},{"start":{"line":140,"column":8},"end":{"line":144,"column":9}}],"line":140}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0,0],"23":[0,0],"24":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/users/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/users/controller.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\nimport { INewUser } from './interfaces';\r\nimport userService from './service';\r\n\r\nconst userController = {\r\n  getAllUsers: async (req: Request, res: Response) => {\r\n    const users = await userService.getAllUsers();\r\n    if (users) {\r\n      return res.status(responseCodes.ok).json({\r\n        users,\r\n      });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n  getUserById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const user = await userService.getUserById(id);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    // if (id === res.locals.user.id || res.locals.user.role === \"Admin\") {\r\n    if (user === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No user found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!user) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      user,\r\n    });\r\n    // }\r\n    // return res.status(responseCodes.badRequest).json({\r\n    //   error: `You have no permission for this`,\r\n    // });\r\n  },\r\n  deleteUser: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    const userExists = await userService.deleteUser(id);\r\n    if (userExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        message: `User not found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!userExists) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n\r\n    return res.status(responseCodes.noContent).send();\r\n  },\r\n\r\n  addUser: async (req: Request, res: Response) => {\r\n    const {\r\n      firstName, lastName, role, email,\r\n    } = req.body;\r\n    if (!firstName) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'First name is required',\r\n      });\r\n    }\r\n    if (!lastName) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Last name is required',\r\n      });\r\n    }\r\n    if (!role) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Role is required',\r\n      });\r\n    }\r\n    if (!email) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Email is required',\r\n      });\r\n    }\r\n    const newUser: INewUser = {\r\n      firstName,\r\n      lastName,\r\n      email,\r\n      role,\r\n    };\r\n    const id = await userService.createUser(newUser);\r\n    if (!id) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.created).json({\r\n      id,\r\n    });\r\n  },\r\n  updateUserById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const {\r\n      firstName, lastName, email, role,\r\n    } = req.body;\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (!firstName && !lastName && !email && !role) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Nothing to update',\r\n      });\r\n    }\r\n    const updateUser: any = {\r\n      id,\r\n      firstName,\r\n      lastName,\r\n      email,\r\n      role,\r\n    };\r\n    const userExists = await userService.updateUserById(updateUser);\r\n    if (userExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No user found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!userExists) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.noContent).send();\r\n  },\r\n};\r\n\r\nexport default userController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"83143bb0961413d60bf98daac143b9e237e246a4","contentHash":"fd8306dcc741274ee4db549b2299e7517009aba9370d3bd139bbdcba1142845e"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\lector\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\lector\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":76}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":27},"end":{"line":157,"column":1}},"18":{"start":{"line":18,"column":39},"end":{"line":27,"column":6}},"19":{"start":{"line":19,"column":26},"end":{"line":19,"column":67}},"20":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"21":{"start":{"line":22,"column":12},"end":{"line":22,"column":78}},"22":{"start":{"line":24,"column":8},"end":{"line":26,"column":11}},"23":{"start":{"line":28,"column":40},"end":{"line":38,"column":6}},"24":{"start":{"line":29,"column":40},"end":{"line":29,"column":86}},"25":{"start":{"line":30,"column":8},"end":{"line":34,"column":9}},"26":{"start":{"line":31,"column":12},"end":{"line":33,"column":15}},"27":{"start":{"line":35,"column":8},"end":{"line":37,"column":11}},"28":{"start":{"line":39,"column":35},"end":{"line":60,"column":6}},"29":{"start":{"line":40,"column":19},"end":{"line":40,"column":46}},"30":{"start":{"line":41,"column":25},"end":{"line":41,"column":68}},"31":{"start":{"line":42,"column":8},"end":{"line":46,"column":9}},"32":{"start":{"line":43,"column":12},"end":{"line":45,"column":15}},"33":{"start":{"line":47,"column":8},"end":{"line":51,"column":9}},"34":{"start":{"line":48,"column":12},"end":{"line":50,"column":15}},"35":{"start":{"line":52,"column":8},"end":{"line":56,"column":9}},"36":{"start":{"line":53,"column":12},"end":{"line":55,"column":15}},"37":{"start":{"line":57,"column":8},"end":{"line":59,"column":11}},"38":{"start":{"line":62,"column":52},"end":{"line":81,"column":6}},"39":{"start":{"line":63,"column":19},"end":{"line":63,"column":46}},"40":{"start":{"line":64,"column":8},"end":{"line":68,"column":9}},"41":{"start":{"line":65,"column":12},"end":{"line":67,"column":15}},"42":{"start":{"line":69,"column":30},"end":{"line":69,"column":76}},"43":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"44":{"start":{"line":71,"column":12},"end":{"line":73,"column":15}},"45":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"46":{"start":{"line":76,"column":12},"end":{"line":76,"column":72}},"47":{"start":{"line":78,"column":8},"end":{"line":80,"column":11}},"48":{"start":{"line":83,"column":31},"end":{"line":115,"column":6}},"49":{"start":{"line":84,"column":47},"end":{"line":84,"column":55}},"50":{"start":{"line":86,"column":8},"end":{"line":90,"column":9}},"51":{"start":{"line":87,"column":12},"end":{"line":89,"column":15}},"52":{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},"53":{"start":{"line":92,"column":12},"end":{"line":94,"column":15}},"54":{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},"55":{"start":{"line":97,"column":12},"end":{"line":99,"column":15}},"56":{"start":{"line":101,"column":28},"end":{"line":105,"column":9}},"57":{"start":{"line":106,"column":19},"end":{"line":106,"column":70}},"58":{"start":{"line":107,"column":8},"end":{"line":111,"column":9}},"59":{"start":{"line":108,"column":12},"end":{"line":110,"column":15}},"60":{"start":{"line":112,"column":8},"end":{"line":114,"column":11}},"61":{"start":{"line":116,"column":38},"end":{"line":156,"column":6}},"62":{"start":{"line":117,"column":19},"end":{"line":117,"column":46}},"63":{"start":{"line":118,"column":47},"end":{"line":118,"column":55}},"64":{"start":{"line":119,"column":8},"end":{"line":123,"column":9}},"65":{"start":{"line":120,"column":12},"end":{"line":122,"column":15}},"66":{"start":{"line":124,"column":8},"end":{"line":128,"column":9}},"67":{"start":{"line":125,"column":12},"end":{"line":127,"column":15}},"68":{"start":{"line":129,"column":8},"end":{"line":133,"column":9}},"69":{"start":{"line":130,"column":12},"end":{"line":132,"column":15}},"70":{"start":{"line":134,"column":8},"end":{"line":138,"column":9}},"71":{"start":{"line":135,"column":12},"end":{"line":137,"column":15}},"72":{"start":{"line":139,"column":28},"end":{"line":143,"column":9}},"73":{"start":{"line":144,"column":31},"end":{"line":144,"column":90}},"74":{"start":{"line":145,"column":8},"end":{"line":149,"column":9}},"75":{"start":{"line":146,"column":12},"end":{"line":148,"column":15}},"76":{"start":{"line":150,"column":8},"end":{"line":152,"column":9}},"77":{"start":{"line":151,"column":12},"end":{"line":151,"column":72}},"78":{"start":{"line":153,"column":8},"end":{"line":155,"column":11}},"79":{"start":{"line":158,"column":0},"end":{"line":158,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":25},"end":{"line":18,"column":26}},"loc":{"start":{"line":18,"column":39},"end":{"line":27,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":73},"end":{"line":18,"column":74}},"loc":{"start":{"line":18,"column":86},"end":{"line":27,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":28,"column":26},"end":{"line":28,"column":27}},"loc":{"start":{"line":28,"column":40},"end":{"line":38,"column":6}},"line":28},"11":{"name":"(anonymous_11)","decl":{"start":{"line":28,"column":74},"end":{"line":28,"column":75}},"loc":{"start":{"line":28,"column":87},"end":{"line":38,"column":5}},"line":28},"12":{"name":"(anonymous_12)","decl":{"start":{"line":39,"column":21},"end":{"line":39,"column":22}},"loc":{"start":{"line":39,"column":35},"end":{"line":60,"column":6}},"line":39},"13":{"name":"(anonymous_13)","decl":{"start":{"line":39,"column":69},"end":{"line":39,"column":70}},"loc":{"start":{"line":39,"column":82},"end":{"line":60,"column":5}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":62,"column":38},"end":{"line":62,"column":39}},"loc":{"start":{"line":62,"column":52},"end":{"line":81,"column":6}},"line":62},"15":{"name":"(anonymous_15)","decl":{"start":{"line":62,"column":86},"end":{"line":62,"column":87}},"loc":{"start":{"line":62,"column":99},"end":{"line":81,"column":5}},"line":62},"16":{"name":"(anonymous_16)","decl":{"start":{"line":83,"column":17},"end":{"line":83,"column":18}},"loc":{"start":{"line":83,"column":31},"end":{"line":115,"column":6}},"line":83},"17":{"name":"(anonymous_17)","decl":{"start":{"line":83,"column":65},"end":{"line":83,"column":66}},"loc":{"start":{"line":83,"column":78},"end":{"line":115,"column":5}},"line":83},"18":{"name":"(anonymous_18)","decl":{"start":{"line":116,"column":24},"end":{"line":116,"column":25}},"loc":{"start":{"line":116,"column":38},"end":{"line":156,"column":6}},"line":116},"19":{"name":"(anonymous_19)","decl":{"start":{"line":116,"column":72},"end":{"line":116,"column":73}},"loc":{"start":{"line":116,"column":85},"end":{"line":156,"column":5}},"line":116}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"9":{"loc":{"start":{"line":30,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":34,"column":9}},{"start":{"line":30,"column":8},"end":{"line":34,"column":9}}],"line":30},"10":{"loc":{"start":{"line":42,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":46,"column":9}},{"start":{"line":42,"column":8},"end":{"line":46,"column":9}}],"line":42},"11":{"loc":{"start":{"line":47,"column":8},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":51,"column":9}},{"start":{"line":47,"column":8},"end":{"line":51,"column":9}}],"line":47},"12":{"loc":{"start":{"line":52,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":56,"column":9}},{"start":{"line":52,"column":8},"end":{"line":56,"column":9}}],"line":52},"13":{"loc":{"start":{"line":64,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":68,"column":9}},{"start":{"line":64,"column":8},"end":{"line":68,"column":9}}],"line":64},"14":{"loc":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},{"start":{"line":70,"column":8},"end":{"line":74,"column":9}}],"line":70},"15":{"loc":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},{"start":{"line":75,"column":8},"end":{"line":77,"column":9}}],"line":75},"16":{"loc":{"start":{"line":86,"column":8},"end":{"line":90,"column":9}},"type":"if","locations":[{"start":{"line":86,"column":8},"end":{"line":90,"column":9}},{"start":{"line":86,"column":8},"end":{"line":90,"column":9}}],"line":86},"17":{"loc":{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},{"start":{"line":91,"column":8},"end":{"line":95,"column":9}}],"line":91},"18":{"loc":{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},"type":"if","locations":[{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},{"start":{"line":96,"column":8},"end":{"line":100,"column":9}}],"line":96},"19":{"loc":{"start":{"line":107,"column":8},"end":{"line":111,"column":9}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":111,"column":9}},{"start":{"line":107,"column":8},"end":{"line":111,"column":9}}],"line":107},"20":{"loc":{"start":{"line":119,"column":8},"end":{"line":123,"column":9}},"type":"if","locations":[{"start":{"line":119,"column":8},"end":{"line":123,"column":9}},{"start":{"line":119,"column":8},"end":{"line":123,"column":9}}],"line":119},"21":{"loc":{"start":{"line":124,"column":8},"end":{"line":128,"column":9}},"type":"if","locations":[{"start":{"line":124,"column":8},"end":{"line":128,"column":9}},{"start":{"line":124,"column":8},"end":{"line":128,"column":9}}],"line":124},"22":{"loc":{"start":{"line":129,"column":8},"end":{"line":133,"column":9}},"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":133,"column":9}},{"start":{"line":129,"column":8},"end":{"line":133,"column":9}}],"line":129},"23":{"loc":{"start":{"line":134,"column":8},"end":{"line":138,"column":9}},"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":138,"column":9}},{"start":{"line":134,"column":8},"end":{"line":138,"column":9}}],"line":134},"24":{"loc":{"start":{"line":145,"column":8},"end":{"line":149,"column":9}},"type":"if","locations":[{"start":{"line":145,"column":8},"end":{"line":149,"column":9}},{"start":{"line":145,"column":8},"end":{"line":149,"column":9}}],"line":145},"25":{"loc":{"start":{"line":150,"column":8},"end":{"line":152,"column":9}},"type":"if","locations":[{"start":{"line":150,"column":8},"end":{"line":152,"column":9}},{"start":{"line":150,"column":8},"end":{"line":152,"column":9}}],"line":150}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/lector/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/lector/controller.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\nimport { INewLector } from './interfaces';\r\nimport lecturerService from './service';\r\n\r\nconst lecturerController = {\r\n  getAllLecturersById: async (req: Request, res: Response) => {\r\n    const lecturers = await lecturerService.getAllLecturers();\r\n    // console.log(lecturers);\r\n    if (lecturers) {\r\n      return res.status(responseCodes.ok).json({ lecturers });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n  getLecturersSubjects: async (req: Request, res: Response) => {\r\n    const lecturersActiveSubjects = await lecturerService.getLecturersSubjects();\r\n    if (lecturersActiveSubjects) {\r\n      return res.status(responseCodes.ok).json({\r\n        lecturersActiveSubjects,\r\n      });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n  getLecturerById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const lecturer = await lecturerService.getLecturerById(id);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (lecturer === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No lecturer found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!lecturer) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      lecturer,\r\n    });\r\n  },\r\n\r\n  // Õppejõu kustutamine ainult siis kui tal antavaid ained pole.\r\n\r\n  deleteLecturerWhenNoSubjectsById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    const subjectExists = await lecturerService.deleteLecturerById(id);\r\n    if (subjectExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        message: `Lecturer not found with id: ${id}`,\r\n      });\r\n    }\r\n    if (subjectExists) {\r\n      return res.status(responseCodes.noContent).send();\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n\r\n  // Uue Õppejõu lisamine\r\n\r\n  addLecturer: async (req: Request, res: Response) => {\r\n    const { firstName, lastName, email } = req.body;\r\n    // console.log(firstName, lastName, email);\r\n    if (!firstName) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'First name is required',\r\n      });\r\n    }\r\n    if (!lastName) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Last name is required',\r\n      });\r\n    }\r\n    if (!email) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Email is required',\r\n      });\r\n    }\r\n    const newLecturer: INewLector = {\r\n      firstName,\r\n      lastName,\r\n      email,\r\n    };\r\n    const id = await lecturerService.createlecturer(newLecturer);\r\n    if (id) {\r\n      return res.status(responseCodes.created).json({\r\n        id,\r\n      });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n  updateLecturerById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const { firstName, lastName, email } = req.body;\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (!firstName) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Provide firstname',\r\n      });\r\n    }\r\n    if (!lastName) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Provide lastname',\r\n      });\r\n    }\r\n    if (!email) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Email is required',\r\n      });\r\n    }\r\n    const newLecturer: INewLector = {\r\n      firstName,\r\n      lastName,\r\n      email,\r\n    };\r\n    const lecturerExists = await lecturerService.updateLecturerById(\r\n      newLecturer,\r\n      id,\r\n    );\r\n    if (lecturerExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No user found with id: ${id}`,\r\n      });\r\n    }\r\n    if (lecturerExists) {\r\n      return res.status(responseCodes.noContent).send();\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n};\r\n\r\nexport default lecturerController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d8414edb359a1297483885c7080c87633a47f54b","contentHash":"605f243016eae63248a1504025bc493567e2a958ab15f6191ffb3e7d3f9ee499"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\lector\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\lector\\service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":24},"end":{"line":86,"column":1}},"17":{"start":{"line":17,"column":27},"end":{"line":26,"column":6}},"18":{"start":{"line":18,"column":8},"end":{"line":25,"column":9}},"19":{"start":{"line":19,"column":32},"end":{"line":19,"column":115}},"20":{"start":{"line":20,"column":12},"end":{"line":20,"column":29}},"21":{"start":{"line":24,"column":12},"end":{"line":24,"column":25}},"22":{"start":{"line":27,"column":32},"end":{"line":40,"column":6}},"23":{"start":{"line":28,"column":8},"end":{"line":39,"column":9}},"24":{"start":{"line":29,"column":37},"end":{"line":34,"column":75}},"25":{"start":{"line":35,"column":12},"end":{"line":35,"column":34}},"26":{"start":{"line":38,"column":12},"end":{"line":38,"column":25}},"27":{"start":{"line":41,"column":29},"end":{"line":52,"column":6}},"28":{"start":{"line":42,"column":8},"end":{"line":51,"column":9}},"29":{"start":{"line":43,"column":29},"end":{"line":43,"column":147}},"30":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"31":{"start":{"line":45,"column":16},"end":{"line":45,"column":35}},"32":{"start":{"line":47,"column":12},"end":{"line":47,"column":25}},"33":{"start":{"line":50,"column":12},"end":{"line":50,"column":25}},"34":{"start":{"line":53,"column":32},"end":{"line":64,"column":6}},"35":{"start":{"line":54,"column":8},"end":{"line":63,"column":9}},"36":{"start":{"line":55,"column":28},"end":{"line":55,"column":153}},"37":{"start":{"line":56,"column":12},"end":{"line":58,"column":13}},"38":{"start":{"line":57,"column":16},"end":{"line":57,"column":42}},"39":{"start":{"line":59,"column":12},"end":{"line":59,"column":25}},"40":{"start":{"line":62,"column":12},"end":{"line":62,"column":25}},"41":{"start":{"line":65,"column":37},"end":{"line":73,"column":6}},"42":{"start":{"line":66,"column":8},"end":{"line":72,"column":9}},"43":{"start":{"line":67,"column":29},"end":{"line":67,"column":125}},"44":{"start":{"line":68,"column":12},"end":{"line":68,"column":35}},"45":{"start":{"line":71,"column":12},"end":{"line":71,"column":25}},"46":{"start":{"line":74,"column":45},"end":{"line":85,"column":6}},"47":{"start":{"line":75,"column":8},"end":{"line":84,"column":9}},"48":{"start":{"line":76,"column":29},"end":{"line":76,"column":136}},"49":{"start":{"line":77,"column":12},"end":{"line":79,"column":13}},"50":{"start":{"line":78,"column":16},"end":{"line":78,"column":28}},"51":{"start":{"line":80,"column":12},"end":{"line":80,"column":25}},"52":{"start":{"line":83,"column":12},"end":{"line":83,"column":25}},"53":{"start":{"line":87,"column":0},"end":{"line":87,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":21},"end":{"line":17,"column":22}},"loc":{"start":{"line":17,"column":27},"end":{"line":26,"column":6}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":61},"end":{"line":17,"column":62}},"loc":{"start":{"line":17,"column":74},"end":{"line":26,"column":5}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":27,"column":26},"end":{"line":27,"column":27}},"loc":{"start":{"line":27,"column":32},"end":{"line":40,"column":6}},"line":27},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":66},"end":{"line":27,"column":67}},"loc":{"start":{"line":27,"column":79},"end":{"line":40,"column":5}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":41,"column":21},"end":{"line":41,"column":22}},"loc":{"start":{"line":41,"column":29},"end":{"line":52,"column":6}},"line":41},"13":{"name":"(anonymous_13)","decl":{"start":{"line":41,"column":63},"end":{"line":41,"column":64}},"loc":{"start":{"line":41,"column":76},"end":{"line":52,"column":5}},"line":41},"14":{"name":"(anonymous_14)","decl":{"start":{"line":53,"column":24},"end":{"line":53,"column":25}},"loc":{"start":{"line":53,"column":32},"end":{"line":64,"column":6}},"line":53},"15":{"name":"(anonymous_15)","decl":{"start":{"line":53,"column":66},"end":{"line":53,"column":67}},"loc":{"start":{"line":53,"column":79},"end":{"line":64,"column":5}},"line":53},"16":{"name":"(anonymous_16)","decl":{"start":{"line":65,"column":20},"end":{"line":65,"column":21}},"loc":{"start":{"line":65,"column":37},"end":{"line":73,"column":6}},"line":65},"17":{"name":"(anonymous_17)","decl":{"start":{"line":65,"column":71},"end":{"line":65,"column":72}},"loc":{"start":{"line":65,"column":84},"end":{"line":73,"column":5}},"line":65},"18":{"name":"(anonymous_18)","decl":{"start":{"line":74,"column":24},"end":{"line":74,"column":25}},"loc":{"start":{"line":74,"column":45},"end":{"line":85,"column":6}},"line":74},"19":{"name":"(anonymous_19)","decl":{"start":{"line":74,"column":79},"end":{"line":74,"column":80}},"loc":{"start":{"line":74,"column":92},"end":{"line":85,"column":5}},"line":74}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},{"start":{"line":44,"column":12},"end":{"line":46,"column":13}}],"line":44},"9":{"loc":{"start":{"line":56,"column":12},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":56,"column":12},"end":{"line":58,"column":13}},{"start":{"line":56,"column":12},"end":{"line":58,"column":13}}],"line":56},"10":{"loc":{"start":{"line":77,"column":12},"end":{"line":79,"column":13}},"type":"if","locations":[{"start":{"line":77,"column":12},"end":{"line":79,"column":13}},{"start":{"line":77,"column":12},"end":{"line":79,"column":13}}],"line":77}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/lector/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/lector/service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,8DAAkC;AAGlC,MAAM,eAAe,GAAG;IACtB,eAAe,EAAE,GAAqC,EAAE;QACtD,IAAI;YACF,MAAM,CAAC,SAAS,CAAC,GAA+B,MAAM,kBAAI,CAAC,KAAK,CAC9D,mDAAmD,CACpD,CAAC;YACF,OAAO,SAAS,CAAC;SAClB;QAAC,OAAO,KAAK,EAAE;YACd,sBAAsB;YACtB,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,oBAAoB,EAAE,GAA+C,EAAE;QACrE,IAAI;YACF,MAAM,CAAC,cAAc,CAAC,GAAyC,MAAM,kBAAI,CAAC,KAAK,CAC7E;;;;;0EAKkE,CACnE,CAAC;YACF,OAAO,cAAc,CAAC;SACvB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,eAAe,EAAE,CACf,EAAU,EAC8B,EAAE;QAC1C,IAAI;YACF,MAAM,QAAQ,GAA+B,MAAM,kBAAI,CAAC,KAAK,CAC3D,gFAAgF,EAChF,CAAC,EAAE,CAAC,CACL,CAAC;YACF,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;gBAChC,OAAO,QAAQ,CAAC,CAAC,CAAC,CAAC;aACpB;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,kBAAkB,EAAE,CAClB,EAAU,EAC2B,EAAE;QACvC,IAAI;YACF,MAAM,CAAC,KAAK,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CAChE,2EAA2E,EAC3E,CAAC,IAAI,IAAI,EAAE,EAAE,EAAE,CAAC,CACjB,CAAC;YACF,IAAI,KAAK,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC1B,OAAO,KAAK,CAAC,YAAY,CAAC;aAC3B;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,WAAuB,EAA2B,EAAE;QACzE,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,8BAA8B,EAC9B,mBAAM,WAAW,EAAG,CACrB,CAAC;YACF,OAAO,MAAM,CAAC,QAAQ,CAAC;SACxB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,kBAAkB,EAAE,CAClB,WAAuB,EACvB,EAAU,EACoB,EAAE;QAChC,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,qCAAqC,EACrC,mBAAM,WAAW,GAAI,EAAE,CAAC,CACzB,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC3B,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,eAAe,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport { ILector, INewLector, ILecturerSubjects } from './interfaces';\r\n\r\nconst lecturerService = {\r\n  getAllLecturers: async (): Promise<ILector[] | false> => {\r\n    try {\r\n      const [lecturers]: [ILector[], FieldPacket[]] = await pool.query(\r\n        'SELECT * FROM lecturers WHERE dateDeleted IS NULL',\r\n      );\r\n      return lecturers;\r\n    } catch (error) {\r\n      // console.log(error);\r\n      return false;\r\n    }\r\n  },\r\n  getLecturersSubjects: async (): Promise<ILecturerSubjects[] | false> => {\r\n    try {\r\n      const [activeSubjects]: [ILecturerSubjects[], FieldPacket[]] = await pool.query(\r\n        `SELECT CONCAT(lecturers.firstName,\" \",lecturers.lastName) AS fullName,\r\n          (SELECT GROUP_CONCAT(subject) FROM subjects \r\n          WHERE lecturers.id = lecturers_id) AS activeSubjects \r\n          FROM lecturers INNER JOIN subjects ON lecturers.id = subjects.lecturers_id \r\n          WHERE lecturers.dateDeleted IS NULL \r\n          GROUP BY fullName, activeSubjects ORDER BY activeSubjects DESC;`,\r\n      );\r\n      return activeSubjects;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  getLecturerById: async (\r\n    id: number,\r\n  ): Promise<ILector[] | false | undefined> => {\r\n    try {\r\n      const lecturer: [ILector[], FieldPacket[]] = await pool.query(\r\n        'SELECT firstName, lastName FROM lecturers WHERE id = ? AND dateDeleted IS NULL',\r\n        [id],\r\n      );\r\n      if (lecturer[0][0] !== undefined) {\r\n        return lecturer[0];\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  deleteLecturerById: async (\r\n    id: number,\r\n  ): Promise<number | false | undefined> => {\r\n    try {\r\n      const [index]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE lecturers SET dateDeleted = ? WHERE dateDeleted IS NULL AND id = ?',\r\n        [new Date(), id],\r\n      );\r\n      if (index.affectedRows > 0) {\r\n        return index.affectedRows;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  createlecturer: async (newLecturer: INewLector): Promise<number | false> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'INSERT INTO lecturers SET ? ',\r\n        [{ ...newLecturer }],\r\n      );\r\n      return result.insertId;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  updateLecturerById: async (\r\n    newLecturer: INewLector,\r\n    id: number,\r\n  ): Promise<boolean | undefined> => {\r\n    try {\r\n      const [update]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE lecturers SET ? WHERE id = ?',\r\n        [{ ...newLecturer }, id],\r\n      );\r\n      if (update.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default lecturerService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c6996191a5c53602329284579d29de522f7f06cd","contentHash":"4bf855a4205906e9270ceaaf8d871eec63c3dd0251774ea0206c8670ced4a0c7"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\subjects\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\subjects\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":76}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":26},"end":{"line":153,"column":1}},"18":{"start":{"line":18,"column":34},"end":{"line":26,"column":6}},"19":{"start":{"line":19,"column":25},"end":{"line":19,"column":65}},"20":{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},"21":{"start":{"line":21,"column":12},"end":{"line":21,"column":77}},"22":{"start":{"line":23,"column":8},"end":{"line":25,"column":11}},"23":{"start":{"line":27,"column":34},"end":{"line":67,"column":6}},"24":{"start":{"line":28,"column":19},"end":{"line":28,"column":46}},"25":{"start":{"line":29,"column":32},"end":{"line":29,"column":40}},"26":{"start":{"line":30,"column":8},"end":{"line":34,"column":9}},"27":{"start":{"line":31,"column":12},"end":{"line":33,"column":15}},"28":{"start":{"line":35,"column":8},"end":{"line":50,"column":9}},"29":{"start":{"line":36,"column":28},"end":{"line":36,"column":81}},"30":{"start":{"line":37,"column":12},"end":{"line":41,"column":13}},"31":{"start":{"line":38,"column":16},"end":{"line":40,"column":19}},"32":{"start":{"line":42,"column":12},"end":{"line":46,"column":13}},"33":{"start":{"line":43,"column":16},"end":{"line":45,"column":19}},"34":{"start":{"line":47,"column":12},"end":{"line":49,"column":15}},"35":{"start":{"line":51,"column":8},"end":{"line":66,"column":9}},"36":{"start":{"line":52,"column":28},"end":{"line":52,"column":70}},"37":{"start":{"line":53,"column":12},"end":{"line":57,"column":13}},"38":{"start":{"line":54,"column":16},"end":{"line":56,"column":19}},"39":{"start":{"line":58,"column":12},"end":{"line":62,"column":13}},"40":{"start":{"line":59,"column":16},"end":{"line":61,"column":19}},"41":{"start":{"line":63,"column":12},"end":{"line":65,"column":15}},"42":{"start":{"line":68,"column":30},"end":{"line":100,"column":6}},"43":{"start":{"line":69,"column":54},"end":{"line":69,"column":62}},"44":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"45":{"start":{"line":71,"column":12},"end":{"line":73,"column":15}},"46":{"start":{"line":85,"column":28},"end":{"line":89,"column":9}},"47":{"start":{"line":90,"column":19},"end":{"line":90,"column":69}},"48":{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},"49":{"start":{"line":92,"column":12},"end":{"line":94,"column":15}},"50":{"start":{"line":96,"column":8},"end":{"line":98,"column":11}},"51":{"start":{"line":101,"column":33},"end":{"line":120,"column":6}},"52":{"start":{"line":102,"column":19},"end":{"line":102,"column":46}},"53":{"start":{"line":103,"column":8},"end":{"line":107,"column":9}},"54":{"start":{"line":104,"column":12},"end":{"line":106,"column":15}},"55":{"start":{"line":108,"column":30},"end":{"line":108,"column":71}},"56":{"start":{"line":109,"column":8},"end":{"line":113,"column":9}},"57":{"start":{"line":110,"column":12},"end":{"line":112,"column":15}},"58":{"start":{"line":114,"column":8},"end":{"line":116,"column":9}},"59":{"start":{"line":115,"column":12},"end":{"line":115,"column":72}},"60":{"start":{"line":117,"column":8},"end":{"line":119,"column":11}},"61":{"start":{"line":121,"column":37},"end":{"line":152,"column":6}},"62":{"start":{"line":122,"column":19},"end":{"line":122,"column":46}},"63":{"start":{"line":123,"column":54},"end":{"line":123,"column":62}},"64":{"start":{"line":124,"column":8},"end":{"line":128,"column":9}},"65":{"start":{"line":125,"column":12},"end":{"line":127,"column":15}},"66":{"start":{"line":129,"column":8},"end":{"line":133,"column":9}},"67":{"start":{"line":130,"column":12},"end":{"line":132,"column":15}},"68":{"start":{"line":134,"column":28},"end":{"line":139,"column":9}},"69":{"start":{"line":140,"column":30},"end":{"line":140,"column":84}},"70":{"start":{"line":141,"column":8},"end":{"line":145,"column":9}},"71":{"start":{"line":142,"column":12},"end":{"line":144,"column":15}},"72":{"start":{"line":146,"column":8},"end":{"line":150,"column":9}},"73":{"start":{"line":147,"column":12},"end":{"line":149,"column":15}},"74":{"start":{"line":151,"column":8},"end":{"line":151,"column":68}},"75":{"start":{"line":154,"column":0},"end":{"line":154,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":20},"end":{"line":18,"column":21}},"loc":{"start":{"line":18,"column":34},"end":{"line":26,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":68},"end":{"line":18,"column":69}},"loc":{"start":{"line":18,"column":81},"end":{"line":26,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":27,"column":20},"end":{"line":27,"column":21}},"loc":{"start":{"line":27,"column":34},"end":{"line":67,"column":6}},"line":27},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":68},"end":{"line":27,"column":69}},"loc":{"start":{"line":27,"column":81},"end":{"line":67,"column":5}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":68,"column":16},"end":{"line":68,"column":17}},"loc":{"start":{"line":68,"column":30},"end":{"line":100,"column":6}},"line":68},"13":{"name":"(anonymous_13)","decl":{"start":{"line":68,"column":64},"end":{"line":68,"column":65}},"loc":{"start":{"line":68,"column":77},"end":{"line":100,"column":5}},"line":68},"14":{"name":"(anonymous_14)","decl":{"start":{"line":101,"column":19},"end":{"line":101,"column":20}},"loc":{"start":{"line":101,"column":33},"end":{"line":120,"column":6}},"line":101},"15":{"name":"(anonymous_15)","decl":{"start":{"line":101,"column":67},"end":{"line":101,"column":68}},"loc":{"start":{"line":101,"column":80},"end":{"line":120,"column":5}},"line":101},"16":{"name":"(anonymous_16)","decl":{"start":{"line":121,"column":23},"end":{"line":121,"column":24}},"loc":{"start":{"line":121,"column":37},"end":{"line":152,"column":6}},"line":121},"17":{"name":"(anonymous_17)","decl":{"start":{"line":121,"column":71},"end":{"line":121,"column":72}},"loc":{"start":{"line":121,"column":84},"end":{"line":152,"column":5}},"line":121}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},{"start":{"line":20,"column":8},"end":{"line":22,"column":9}}],"line":20},"9":{"loc":{"start":{"line":30,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":34,"column":9}},{"start":{"line":30,"column":8},"end":{"line":34,"column":9}}],"line":30},"10":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":31}},"type":"binary-expr","locations":[{"start":{"line":30,"column":12},"end":{"line":30,"column":24}},{"start":{"line":30,"column":28},"end":{"line":30,"column":31}}],"line":30},"11":{"loc":{"start":{"line":35,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":50,"column":9}},{"start":{"line":35,"column":8},"end":{"line":50,"column":9}}],"line":35},"12":{"loc":{"start":{"line":37,"column":12},"end":{"line":41,"column":13}},"type":"if","locations":[{"start":{"line":37,"column":12},"end":{"line":41,"column":13}},{"start":{"line":37,"column":12},"end":{"line":41,"column":13}}],"line":37},"13":{"loc":{"start":{"line":42,"column":12},"end":{"line":46,"column":13}},"type":"if","locations":[{"start":{"line":42,"column":12},"end":{"line":46,"column":13}},{"start":{"line":42,"column":12},"end":{"line":46,"column":13}}],"line":42},"14":{"loc":{"start":{"line":51,"column":8},"end":{"line":66,"column":9}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":66,"column":9}},{"start":{"line":51,"column":8},"end":{"line":66,"column":9}}],"line":51},"15":{"loc":{"start":{"line":53,"column":12},"end":{"line":57,"column":13}},"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":57,"column":13}},{"start":{"line":53,"column":12},"end":{"line":57,"column":13}}],"line":53},"16":{"loc":{"start":{"line":58,"column":12},"end":{"line":62,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":12},"end":{"line":62,"column":13}},{"start":{"line":58,"column":12},"end":{"line":62,"column":13}}],"line":58},"17":{"loc":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},{"start":{"line":70,"column":8},"end":{"line":74,"column":9}}],"line":70},"18":{"loc":{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},{"start":{"line":91,"column":8},"end":{"line":95,"column":9}}],"line":91},"19":{"loc":{"start":{"line":103,"column":8},"end":{"line":107,"column":9}},"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":107,"column":9}},{"start":{"line":103,"column":8},"end":{"line":107,"column":9}}],"line":103},"20":{"loc":{"start":{"line":109,"column":8},"end":{"line":113,"column":9}},"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":113,"column":9}},{"start":{"line":109,"column":8},"end":{"line":113,"column":9}}],"line":109},"21":{"loc":{"start":{"line":114,"column":8},"end":{"line":116,"column":9}},"type":"if","locations":[{"start":{"line":114,"column":8},"end":{"line":116,"column":9}},{"start":{"line":114,"column":8},"end":{"line":116,"column":9}}],"line":114},"22":{"loc":{"start":{"line":124,"column":8},"end":{"line":128,"column":9}},"type":"if","locations":[{"start":{"line":124,"column":8},"end":{"line":128,"column":9}},{"start":{"line":124,"column":8},"end":{"line":128,"column":9}}],"line":124},"23":{"loc":{"start":{"line":129,"column":8},"end":{"line":133,"column":9}},"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":133,"column":9}},{"start":{"line":129,"column":8},"end":{"line":133,"column":9}}],"line":129},"24":{"loc":{"start":{"line":129,"column":12},"end":{"line":129,"column":51}},"type":"binary-expr","locations":[{"start":{"line":129,"column":12},"end":{"line":129,"column":20}},{"start":{"line":129,"column":24},"end":{"line":129,"column":36}},{"start":{"line":129,"column":40},"end":{"line":129,"column":51}}],"line":129},"25":{"loc":{"start":{"line":141,"column":8},"end":{"line":145,"column":9}},"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":145,"column":9}},{"start":{"line":141,"column":8},"end":{"line":145,"column":9}}],"line":141},"26":{"loc":{"start":{"line":146,"column":8},"end":{"line":150,"column":9}},"type":"if","locations":[{"start":{"line":146,"column":8},"end":{"line":150,"column":9}},{"start":{"line":146,"column":8},"end":{"line":150,"column":9}}],"line":146}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0,0],"25":[0,0],"26":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/subjects/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/subjects/controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,6EAAqD;AAGrD,wDAAwC;AAExC,MAAM,iBAAiB,GAAG;IACxB,cAAc,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QACpD,MAAM,QAAQ,GAAG,MAAM,iBAAe,CAAC,cAAc,EAAE,CAAC;QACxD,IAAI,QAAQ,EAAE;YACZ,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;SACxD;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;YAChD,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;IACL,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QACpD,MAAM,EAAE,GAAW,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC/C,MAAM,EAAE,WAAW,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QACjC,IAAI,CAAC,WAAW,IAAI,CAAC,EAAE,EAAE;YACvB,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,qCAAqC;aAC7C,CAAC,CAAC;SACJ;QAED,IAAI,CAAC,EAAE,EAAE;YACP,MAAM,OAAO,GAAG,MAAM,iBAAe,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;YACpE,IAAI,OAAO,KAAK,KAAK,EAAE;gBACrB,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;oBAChD,KAAK,EAAE,cAAc;iBACtB,CAAC,CAAC;aACJ;YACD,IAAI,CAAC,OAAO,EAAE;gBACZ,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;oBAC/C,KAAK,EAAE,sCAAsC,WAAW,EAAE;iBAC3D,CAAC,CAAC;aACJ;YACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;gBACvC,OAAO;aACR,CAAC,CAAC;SACJ;QAED,IAAI,CAAC,WAAW,EAAE;YAChB,MAAM,OAAO,GAAG,MAAM,iBAAe,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;YAEzD,IAAI,OAAO,KAAK,KAAK,EAAE;gBACrB,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;oBAChD,KAAK,EAAE,cAAc;iBACtB,CAAC,CAAC;aACJ;YACD,IAAI,CAAC,OAAO,EAAE;gBACZ,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;oBAC/C,KAAK,EAAE,6BAA6B,EAAE,EAAE;iBACzC,CAAC,CAAC;aACJ;YACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;gBACvC,OAAO;aACR,CAAC,CAAC;SACJ;IACH,CAAC,CAAA;IAED,UAAU,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QAChD,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QACvD,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,oBAAoB;aAC5B,CAAC,CAAC;SACJ;QACD,sBAAsB;QACtB,uDAAuD;QACvD,uCAAuC;QACvC,QAAQ;QACR,IAAI;QACJ,sBAAsB;QACtB,uDAAuD;QACvD,uCAAuC;QACvC,QAAQ;QACR,WAAW;QACX,MAAM,WAAW,GAAgB;YAC/B,OAAO;YACP,WAAW;YACX,WAAW;SACZ,CAAC;QAEF,MAAM,EAAE,GAAG,MAAM,iBAAe,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAC5D,IAAI,EAAE,EAAE;YACN,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;gBAC5C,EAAE;aACH,CAAC,CAAC;SACJ;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;YAChD,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;QACH,IAAI;IACN,CAAC,CAAA;IACD,aAAa,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QACnD,MAAM,EAAE,GAAW,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,EAAE,EAAE;YACP,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,sBAAsB;aAC9B,CAAC,CAAC;SACJ;QACD,MAAM,aAAa,GAAG,MAAM,iBAAe,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;QAC9D,IAAI,aAAa,KAAK,SAAS,EAAE;YAC/B,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,OAAO,EAAE,8BAA8B,EAAE,EAAE;aAC5C,CAAC,CAAC;SACJ;QACD,IAAI,aAAa,EAAE;YACjB,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;SACnD;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;YAChD,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;IACL,CAAC,CAAA;IAED,iBAAiB,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QACvD,MAAM,EAAE,GAAW,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC/C,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QACvD,IAAI,CAAC,EAAE,EAAE;YACP,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,sBAAsB;aAC9B,CAAC,CAAC;SACJ;QACD,IAAI,CAAC,OAAO,IAAI,CAAC,WAAW,IAAI,WAAW,EAAE;YAC3C,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,mBAAmB;aAC3B,CAAC,CAAC;SACJ;QAED,MAAM,WAAW,GAAQ;YACvB,EAAE;YACF,OAAO;YACP,WAAW;YACX,WAAW;SACZ,CAAC;QAEF,MAAM,aAAa,GAAG,MAAM,iBAAe,CAAC,iBAAiB,CAC3D,WAAW,CACZ,CAAC;QACF,IAAI,aAAa,KAAK,SAAS,EAAE;YAC/B,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,6BAA6B,EAAE,EAAE;aACzC,CAAC,CAAC;SACJ;QACD,IAAI,aAAa,KAAK,KAAK,EAAE;YAC3B,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;gBAChD,KAAK,EAAE,cAAc;aACtB,CAAC,CAAC;SACJ;QAED,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;IACpD,CAAC,CAAA;CAEF,CAAC;AAEF,kBAAe,iBAAiB,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\nimport { INewSubject } from './interfaces';\r\n\r\nimport subjectServices from './service';\r\n\r\nconst subjectController = {\r\n  getAllSubjects: async (req: Request, res: Response) => {\r\n    const subjects = await subjectServices.getAllSubjects();\r\n    if (subjects) {\r\n      return res.status(responseCodes.ok).json({ subjects });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n  getSubjectById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const { subjectCode } = req.body;\r\n    if (!subjectCode && !id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id or subjedtCode provided',\r\n      });\r\n    }\r\n\r\n    if (!id) {\r\n      const subject = await subjectServices.getSubjectByCode(subjectCode);\r\n      if (subject === false) {\r\n        return res.status(responseCodes.ServerError).json({\r\n          error: 'Server error',\r\n        });\r\n      }\r\n      if (!subject) {\r\n        return res.status(responseCodes.badRequest).json({\r\n          error: `No subject found with subjectCode: ${subjectCode}`,\r\n        });\r\n      }\r\n      return res.status(responseCodes.ok).json({\r\n        subject,\r\n      });\r\n    }\r\n\r\n    if (!subjectCode) {\r\n      const subject = await subjectServices.getSubjectById(id);\r\n\r\n      if (subject === false) {\r\n        return res.status(responseCodes.ServerError).json({\r\n          error: 'Server error',\r\n        });\r\n      }\r\n      if (!subject) {\r\n        return res.status(responseCodes.badRequest).json({\r\n          error: `No subject found with id: ${id}`,\r\n        });\r\n      }\r\n      return res.status(responseCodes.ok).json({\r\n        subject,\r\n      });\r\n    }\r\n  },\r\n\r\n  addSubject: async (req: Request, res: Response) => {\r\n    const { subject, subjectCode, creditPoint } = req.body;\r\n    if (!subject) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Subject is missing',\r\n      });\r\n    }\r\n    // if (!subjectCode) {\r\n    //   return res.status(responseCodes.badRequest).json({\r\n    //     error: \"subjectCode is missing\",\r\n    //   });\r\n    // }\r\n    // if (!creditPoint) {\r\n    //   return res.status(responseCodes.badRequest).json({\r\n    //     error: \"Lecturer id is missing\",\r\n    //   });\r\n    // } else {\r\n    const subjectData: INewSubject = {\r\n      subject,\r\n      subjectCode,\r\n      creditPoint,\r\n    };\r\n\r\n    const id = await subjectServices.createSubject(subjectData);\r\n    if (id) {\r\n      return res.status(responseCodes.created).json({\r\n        id,\r\n      });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n    // }\r\n  },\r\n  deleteSubject: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    const subjectExists = await subjectServices.deleteSubject(id);\r\n    if (subjectExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        message: `Subject not found with id: ${id}`,\r\n      });\r\n    }\r\n    if (subjectExists) {\r\n      return res.status(responseCodes.noContent).send();\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n\r\n  updateSubjectById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const { subject, subjectCode, creditPoint } = req.body;\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (!subject && !subjectCode && creditPoint) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Nothing to update',\r\n      });\r\n    }\r\n\r\n    const subjectData: any = {\r\n      id,\r\n      subject,\r\n      subjectCode,\r\n      creditPoint,\r\n    };\r\n\r\n    const subjectExists = await subjectServices.updateSubjectById(\r\n      subjectData,\r\n    );\r\n    if (subjectExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No subject found with id: ${id}`,\r\n      });\r\n    }\r\n    if (subjectExists === false) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n\r\n    return res.status(responseCodes.noContent).send();\r\n  },\r\n\r\n};\r\n\r\nexport default subjectController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"aaf87d5fb0bbd82636b117f2f5153a062f24681b","contentHash":"b592d090ac2321998deca2bb644851734668d0afae1de61a0ab1f6e6135eaf92"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\subjects\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\subjects\\service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":24},"end":{"line":79,"column":1}},"17":{"start":{"line":17,"column":26},"end":{"line":25,"column":6}},"18":{"start":{"line":18,"column":8},"end":{"line":24,"column":9}},"19":{"start":{"line":19,"column":31},"end":{"line":19,"column":113}},"20":{"start":{"line":20,"column":12},"end":{"line":20,"column":28}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":25}},"22":{"start":{"line":26,"column":28},"end":{"line":34,"column":6}},"23":{"start":{"line":27,"column":8},"end":{"line":33,"column":9}},"24":{"start":{"line":28,"column":30},"end":{"line":28,"column":204}},"25":{"start":{"line":29,"column":12},"end":{"line":29,"column":30}},"26":{"start":{"line":32,"column":12},"end":{"line":32,"column":25}},"27":{"start":{"line":35,"column":36},"end":{"line":43,"column":6}},"28":{"start":{"line":36,"column":8},"end":{"line":42,"column":9}},"29":{"start":{"line":37,"column":29},"end":{"line":37,"column":209}},"30":{"start":{"line":38,"column":12},"end":{"line":38,"column":35}},"31":{"start":{"line":41,"column":12},"end":{"line":41,"column":25}},"32":{"start":{"line":44,"column":27},"end":{"line":55,"column":6}},"33":{"start":{"line":45,"column":8},"end":{"line":54,"column":9}},"34":{"start":{"line":46,"column":29},"end":{"line":46,"column":129}},"35":{"start":{"line":47,"column":12},"end":{"line":49,"column":13}},"36":{"start":{"line":48,"column":16},"end":{"line":48,"column":28}},"37":{"start":{"line":50,"column":12},"end":{"line":50,"column":25}},"38":{"start":{"line":53,"column":12},"end":{"line":53,"column":25}},"39":{"start":{"line":56,"column":33},"end":{"line":69,"column":6}},"40":{"start":{"line":57,"column":8},"end":{"line":68,"column":9}},"41":{"start":{"line":58,"column":29},"end":{"line":58,"column":115}},"42":{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},"43":{"start":{"line":61,"column":16},"end":{"line":61,"column":28}},"44":{"start":{"line":63,"column":12},"end":{"line":63,"column":25}},"45":{"start":{"line":66,"column":12},"end":{"line":66,"column":31}},"46":{"start":{"line":67,"column":12},"end":{"line":67,"column":25}},"47":{"start":{"line":70,"column":32},"end":{"line":78,"column":6}},"48":{"start":{"line":71,"column":8},"end":{"line":77,"column":9}},"49":{"start":{"line":72,"column":30},"end":{"line":72,"column":215}},"50":{"start":{"line":73,"column":12},"end":{"line":73,"column":30}},"51":{"start":{"line":76,"column":12},"end":{"line":76,"column":25}},"52":{"start":{"line":80,"column":0},"end":{"line":80,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":20},"end":{"line":17,"column":21}},"loc":{"start":{"line":17,"column":26},"end":{"line":25,"column":6}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":60},"end":{"line":17,"column":61}},"loc":{"start":{"line":17,"column":73},"end":{"line":25,"column":5}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":20},"end":{"line":26,"column":21}},"loc":{"start":{"line":26,"column":28},"end":{"line":34,"column":6}},"line":26},"11":{"name":"(anonymous_11)","decl":{"start":{"line":26,"column":62},"end":{"line":26,"column":63}},"loc":{"start":{"line":26,"column":75},"end":{"line":34,"column":5}},"line":26},"12":{"name":"(anonymous_12)","decl":{"start":{"line":35,"column":19},"end":{"line":35,"column":20}},"loc":{"start":{"line":35,"column":36},"end":{"line":43,"column":6}},"line":35},"13":{"name":"(anonymous_13)","decl":{"start":{"line":35,"column":70},"end":{"line":35,"column":71}},"loc":{"start":{"line":35,"column":83},"end":{"line":43,"column":5}},"line":35},"14":{"name":"(anonymous_14)","decl":{"start":{"line":44,"column":19},"end":{"line":44,"column":20}},"loc":{"start":{"line":44,"column":27},"end":{"line":55,"column":6}},"line":44},"15":{"name":"(anonymous_15)","decl":{"start":{"line":44,"column":61},"end":{"line":44,"column":62}},"loc":{"start":{"line":44,"column":74},"end":{"line":55,"column":5}},"line":44},"16":{"name":"(anonymous_16)","decl":{"start":{"line":56,"column":23},"end":{"line":56,"column":24}},"loc":{"start":{"line":56,"column":33},"end":{"line":69,"column":6}},"line":56},"17":{"name":"(anonymous_17)","decl":{"start":{"line":56,"column":67},"end":{"line":56,"column":68}},"loc":{"start":{"line":56,"column":80},"end":{"line":69,"column":5}},"line":56},"18":{"name":"(anonymous_18)","decl":{"start":{"line":70,"column":22},"end":{"line":70,"column":23}},"loc":{"start":{"line":70,"column":32},"end":{"line":78,"column":6}},"line":70},"19":{"name":"(anonymous_19)","decl":{"start":{"line":70,"column":66},"end":{"line":70,"column":67}},"loc":{"start":{"line":70,"column":79},"end":{"line":78,"column":5}},"line":70}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":47,"column":12},"end":{"line":49,"column":13}},"type":"if","locations":[{"start":{"line":47,"column":12},"end":{"line":49,"column":13}},{"start":{"line":47,"column":12},"end":{"line":49,"column":13}}],"line":47},"9":{"loc":{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},"type":"if","locations":[{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},{"start":{"line":60,"column":12},"end":{"line":62,"column":13}}],"line":60}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/subjects/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/subjects/service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,8DAAkC;AAGlC,MAAM,eAAe,GAAG;IACtB,cAAc,EAAE,GAAsC,EAAE;QACtD,IAAI;YACF,MAAM,CAAC,QAAQ,CAAC,GAAgC,MAAM,kBAAI,CAAC,KAAK,CAC9D,kDAAkD,CACnD,CAAC;YACF,OAAO,QAAQ,CAAC;SACjB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,EAAU,EAA6B,EAAE;QAC9D,IAAI;YACF,MAAM,CAAC,OAAO,CAAC,GAAgC,MAAM,kBAAI,CAAC,KAAK,CAC7D,wIAAwI,EACxI,CAAC,EAAE,CAAC,CACL,CAAC;YACF,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;SACnB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,aAAa,EAAE,CAAO,WAAwB,EAA2B,EAAE;QACzE,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,2EAA2E,EAC3E,CAAC,WAAW,CAAC,OAAO,EAAE,WAAW,CAAC,WAAW,EAAE,WAAW,CAAC,WAAW,CAAC,CACxE,CAAC;YACF,OAAO,MAAM,CAAC,QAAQ,CAAC;SACxB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IAED,aAAa,EAAE,CAAO,EAAU,EAAgC,EAAE;QAChE,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,kDAAkD,EAClD,CAAC,IAAI,IAAI,EAAE,EAAE,EAAE,CAAC,CACjB,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC3B,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,iBAAiB,EAAE,CAAO,IAMzB,EAAgC,EAAE;QACjC,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CAAC,qCAAqC,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;YAC5H,0EAA0E;YAE1E,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC3B,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IAED,gBAAgB,EAAE,CAAO,IAAY,EAA6B,EAAE;QAClE,IAAI;YACF,MAAM,CAAC,OAAO,CAAC,GAAgC,MAAM,kBAAI,CAAC,KAAK,CAC7D,iJAAiJ,EACjJ,CAAC,IAAI,CAAC,CACP,CAAC;YACF,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;SACnB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,eAAe,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport { ISubject, INewSubject } from './interfaces';\r\n\r\nconst subjectServices = {\r\n  getAllSubjects: async (): Promise<ISubject[] | false> => {\r\n    try {\r\n      const [subjects]: [ISubject[], FieldPacket[]] = await pool.query(\r\n        'SELECT * FROM subjects WHERE dateDeleted is NULL',\r\n      );\r\n      return subjects;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  getSubjectById: async (id: number): Promise<ISubject | false> => {\r\n    try {\r\n      const [subject]: [ISubject[], FieldPacket[]] = await pool.query(\r\n        'SELECT id, subject, subjectCode, creditPoint, dateCreated, dateUpdated, dateDeleted FROM subjects WHERE id = ? AND dateDeleted is NULL',\r\n        [id],\r\n      );\r\n      return subject[0];\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  createSubject: async (subjectData: INewSubject): Promise<number | false> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'INSERT INTO subjects (subject, subjectCode, creditPoint) VALUES (?, ?, ?)',\r\n        [subjectData.subject, subjectData.subjectCode, subjectData.creditPoint],\r\n      );\r\n      return result.insertId;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  deleteSubject: async (id: number): Promise<boolean | undefined> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE subjects SET dateDeleted = ? WHERE id = ?',\r\n        [new Date(), id],\r\n      );\r\n      if (result.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  updateSubjectById: async (data: {\r\n    id: number;\r\n    subject?: string;\r\n    subjectCode?: string;\r\n    creditPoint?: string;\r\n\r\n  }): Promise<boolean | undefined> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query('UPDATE subjects SET  ? WHERE id = ?', [data, data.id]);\r\n      // [{ ...data }, data.id]  - subject = ?, subjectCode = ?, creditPoint = ?\r\n\r\n      if (result.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.log(error);\r\n      return false;\r\n    }\r\n  },\r\n\r\n  getSubjectByCode: async (code: string): Promise<ISubject | false> => {\r\n    try {\r\n      const [subject]: [ISubject[], FieldPacket[]] = await pool.query(\r\n        'SELECT id, subject, subjectCode, creditPoint, dateCreated, dateUpdated, dateDeleted FROM subjects WHERE subjectCode = ? AND dateDeleted is NULL',\r\n        [code],\r\n      );\r\n      return subject[0];\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default subjectServices;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1ccf5371d5614f494fae11edb90effced4e79a17","contentHash":"580b1b61fdd1ca039b377335ae5843b39f88ea97f53a3489c73e1651d4524b09"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\course\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\course\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":76}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":25},"end":{"line":114,"column":1}},"18":{"start":{"line":18,"column":33},"end":{"line":28,"column":6}},"19":{"start":{"line":19,"column":24},"end":{"line":19,"column":63}},"20":{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},"21":{"start":{"line":21,"column":12},"end":{"line":23,"column":15}},"22":{"start":{"line":25,"column":8},"end":{"line":27,"column":11}},"23":{"start":{"line":29,"column":33},"end":{"line":50,"column":6}},"24":{"start":{"line":30,"column":19},"end":{"line":30,"column":46}},"25":{"start":{"line":31,"column":23},"end":{"line":31,"column":62}},"26":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"27":{"start":{"line":33,"column":12},"end":{"line":35,"column":15}},"28":{"start":{"line":37,"column":8},"end":{"line":41,"column":9}},"29":{"start":{"line":38,"column":12},"end":{"line":40,"column":15}},"30":{"start":{"line":42,"column":8},"end":{"line":46,"column":9}},"31":{"start":{"line":43,"column":12},"end":{"line":45,"column":15}},"32":{"start":{"line":47,"column":8},"end":{"line":49,"column":11}},"33":{"start":{"line":51,"column":29},"end":{"line":67,"column":6}},"34":{"start":{"line":52,"column":43},"end":{"line":52,"column":51}},"35":{"start":{"line":53,"column":8},"end":{"line":57,"column":9}},"36":{"start":{"line":54,"column":12},"end":{"line":56,"column":15}},"37":{"start":{"line":58,"column":19},"end":{"line":58,"column":79}},"38":{"start":{"line":59,"column":8},"end":{"line":63,"column":9}},"39":{"start":{"line":60,"column":12},"end":{"line":62,"column":15}},"40":{"start":{"line":64,"column":8},"end":{"line":66,"column":11}},"41":{"start":{"line":68,"column":32},"end":{"line":87,"column":6}},"42":{"start":{"line":69,"column":19},"end":{"line":69,"column":46}},"43":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"44":{"start":{"line":71,"column":12},"end":{"line":73,"column":15}},"45":{"start":{"line":75,"column":30},"end":{"line":75,"column":70}},"46":{"start":{"line":76,"column":8},"end":{"line":80,"column":9}},"47":{"start":{"line":77,"column":12},"end":{"line":79,"column":15}},"48":{"start":{"line":81,"column":8},"end":{"line":85,"column":9}},"49":{"start":{"line":82,"column":12},"end":{"line":84,"column":15}},"50":{"start":{"line":86,"column":8},"end":{"line":86,"column":68}},"51":{"start":{"line":88,"column":36},"end":{"line":113,"column":6}},"52":{"start":{"line":89,"column":19},"end":{"line":89,"column":46}},"53":{"start":{"line":90,"column":43},"end":{"line":90,"column":51}},"54":{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},"55":{"start":{"line":92,"column":12},"end":{"line":94,"column":15}},"56":{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},"57":{"start":{"line":97,"column":12},"end":{"line":99,"column":15}},"58":{"start":{"line":101,"column":29},"end":{"line":101,"column":93}},"59":{"start":{"line":102,"column":8},"end":{"line":106,"column":9}},"60":{"start":{"line":103,"column":12},"end":{"line":105,"column":15}},"61":{"start":{"line":107,"column":8},"end":{"line":111,"column":9}},"62":{"start":{"line":108,"column":12},"end":{"line":110,"column":15}},"63":{"start":{"line":112,"column":8},"end":{"line":112,"column":68}},"64":{"start":{"line":115,"column":0},"end":{"line":115,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":19},"end":{"line":18,"column":20}},"loc":{"start":{"line":18,"column":33},"end":{"line":28,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":67},"end":{"line":18,"column":68}},"loc":{"start":{"line":18,"column":80},"end":{"line":28,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":29,"column":19},"end":{"line":29,"column":20}},"loc":{"start":{"line":29,"column":33},"end":{"line":50,"column":6}},"line":29},"11":{"name":"(anonymous_11)","decl":{"start":{"line":29,"column":67},"end":{"line":29,"column":68}},"loc":{"start":{"line":29,"column":80},"end":{"line":50,"column":5}},"line":29},"12":{"name":"(anonymous_12)","decl":{"start":{"line":51,"column":15},"end":{"line":51,"column":16}},"loc":{"start":{"line":51,"column":29},"end":{"line":67,"column":6}},"line":51},"13":{"name":"(anonymous_13)","decl":{"start":{"line":51,"column":63},"end":{"line":51,"column":64}},"loc":{"start":{"line":51,"column":76},"end":{"line":67,"column":5}},"line":51},"14":{"name":"(anonymous_14)","decl":{"start":{"line":68,"column":18},"end":{"line":68,"column":19}},"loc":{"start":{"line":68,"column":32},"end":{"line":87,"column":6}},"line":68},"15":{"name":"(anonymous_15)","decl":{"start":{"line":68,"column":66},"end":{"line":68,"column":67}},"loc":{"start":{"line":68,"column":79},"end":{"line":87,"column":5}},"line":68},"16":{"name":"(anonymous_16)","decl":{"start":{"line":88,"column":22},"end":{"line":88,"column":23}},"loc":{"start":{"line":88,"column":36},"end":{"line":113,"column":6}},"line":88},"17":{"name":"(anonymous_17)","decl":{"start":{"line":88,"column":70},"end":{"line":88,"column":71}},"loc":{"start":{"line":88,"column":83},"end":{"line":113,"column":5}},"line":88}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},{"start":{"line":20,"column":8},"end":{"line":24,"column":9}}],"line":20},"9":{"loc":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},{"start":{"line":32,"column":8},"end":{"line":36,"column":9}}],"line":32},"10":{"loc":{"start":{"line":37,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":41,"column":9}},{"start":{"line":37,"column":8},"end":{"line":41,"column":9}}],"line":37},"11":{"loc":{"start":{"line":42,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":46,"column":9}},{"start":{"line":42,"column":8},"end":{"line":46,"column":9}}],"line":42},"12":{"loc":{"start":{"line":53,"column":8},"end":{"line":57,"column":9}},"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":57,"column":9}},{"start":{"line":53,"column":8},"end":{"line":57,"column":9}}],"line":53},"13":{"loc":{"start":{"line":53,"column":12},"end":{"line":53,"column":38}},"type":"binary-expr","locations":[{"start":{"line":53,"column":12},"end":{"line":53,"column":23}},{"start":{"line":53,"column":27},"end":{"line":53,"column":38}}],"line":53},"14":{"loc":{"start":{"line":59,"column":8},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":63,"column":9}},{"start":{"line":59,"column":8},"end":{"line":63,"column":9}}],"line":59},"15":{"loc":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},{"start":{"line":70,"column":8},"end":{"line":74,"column":9}}],"line":70},"16":{"loc":{"start":{"line":76,"column":8},"end":{"line":80,"column":9}},"type":"if","locations":[{"start":{"line":76,"column":8},"end":{"line":80,"column":9}},{"start":{"line":76,"column":8},"end":{"line":80,"column":9}}],"line":76},"17":{"loc":{"start":{"line":81,"column":8},"end":{"line":85,"column":9}},"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":85,"column":9}},{"start":{"line":81,"column":8},"end":{"line":85,"column":9}}],"line":81},"18":{"loc":{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},{"start":{"line":91,"column":8},"end":{"line":95,"column":9}}],"line":91},"19":{"loc":{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},"type":"if","locations":[{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},{"start":{"line":96,"column":8},"end":{"line":100,"column":9}}],"line":96},"20":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":38}},"type":"binary-expr","locations":[{"start":{"line":96,"column":12},"end":{"line":96,"column":23}},{"start":{"line":96,"column":27},"end":{"line":96,"column":38}}],"line":96},"21":{"loc":{"start":{"line":102,"column":8},"end":{"line":106,"column":9}},"type":"if","locations":[{"start":{"line":102,"column":8},"end":{"line":106,"column":9}},{"start":{"line":102,"column":8},"end":{"line":106,"column":9}}],"line":102},"22":{"loc":{"start":{"line":107,"column":8},"end":{"line":111,"column":9}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":111,"column":9}},{"start":{"line":107,"column":8},"end":{"line":111,"column":9}}],"line":107}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/course/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/course/controller.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\nimport courseService from './service';\r\n\r\nconst courseController = {\r\n  getAllCourses: async (req: Request, res: Response) => {\r\n    const courses = await courseService.getAllCourses();\r\n    if (!courses) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      courses,\r\n    });\r\n  },\r\n  getCourseById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const course = await courseService.getCourseId(id);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (course === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No course found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!course) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      course,\r\n    });\r\n  },\r\n  addCourse: async (req: Request, res: Response) => {\r\n    const { courseCode, courseName } = req.body;\r\n    if (!courseCode && !courseName) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'CourseCode or CourseName is missing',\r\n      });\r\n    }\r\n    const id = await courseService.createCourse(courseCode, courseName);\r\n    if (!id) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.created).json({\r\n      id,\r\n    });\r\n  },\r\n  deleteCourse: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    const subjectExists = await courseService.deleteCourse(id);\r\n    if (subjectExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        message: `Course not found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!subjectExists) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.noContent).send();\r\n  },\r\n  updateCourseById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const { courseCode, courseName } = req.body;\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (!courseCode || !courseName) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Nothing to update',\r\n      });\r\n    }\r\n    const courseExists = await courseService.updateCourse(id, courseCode, courseName);\r\n    if (courseExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No course found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!courseExists) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.noContent).send();\r\n  },\r\n};\r\n\r\nexport default courseController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"135af141f7ff6ebc227d01e0083acbdb11f975ea","contentHash":"70df830ebe1b5607df2fd4e648adea2b158f8836e34cb1ace953a7e0881a9b3f"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\course\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\course\\service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":22},"end":{"line":71,"column":1}},"17":{"start":{"line":17,"column":25},"end":{"line":25,"column":6}},"18":{"start":{"line":18,"column":8},"end":{"line":24,"column":9}},"19":{"start":{"line":19,"column":30},"end":{"line":19,"column":167}},"20":{"start":{"line":20,"column":12},"end":{"line":20,"column":27}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":25}},"22":{"start":{"line":26,"column":25},"end":{"line":37,"column":6}},"23":{"start":{"line":27,"column":8},"end":{"line":36,"column":9}},"24":{"start":{"line":28,"column":27},"end":{"line":28,"column":178}},"25":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"26":{"start":{"line":30,"column":16},"end":{"line":30,"column":33}},"27":{"start":{"line":32,"column":12},"end":{"line":32,"column":25}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"29":{"start":{"line":38,"column":42},"end":{"line":46,"column":6}},"30":{"start":{"line":39,"column":8},"end":{"line":45,"column":9}},"31":{"start":{"line":40,"column":25},"end":{"line":40,"column":134}},"32":{"start":{"line":41,"column":12},"end":{"line":41,"column":31}},"33":{"start":{"line":44,"column":12},"end":{"line":44,"column":25}},"34":{"start":{"line":47,"column":26},"end":{"line":58,"column":6}},"35":{"start":{"line":48,"column":8},"end":{"line":57,"column":9}},"36":{"start":{"line":49,"column":29},"end":{"line":49,"column":128}},"37":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"38":{"start":{"line":51,"column":16},"end":{"line":51,"column":28}},"39":{"start":{"line":53,"column":12},"end":{"line":53,"column":25}},"40":{"start":{"line":56,"column":12},"end":{"line":56,"column":25}},"41":{"start":{"line":59,"column":50},"end":{"line":70,"column":6}},"42":{"start":{"line":60,"column":8},"end":{"line":69,"column":9}},"43":{"start":{"line":61,"column":29},"end":{"line":61,"column":151}},"44":{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},"45":{"start":{"line":63,"column":16},"end":{"line":63,"column":28}},"46":{"start":{"line":65,"column":12},"end":{"line":65,"column":25}},"47":{"start":{"line":68,"column":12},"end":{"line":68,"column":25}},"48":{"start":{"line":72,"column":0},"end":{"line":72,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":19},"end":{"line":17,"column":20}},"loc":{"start":{"line":17,"column":25},"end":{"line":25,"column":6}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":59},"end":{"line":17,"column":60}},"loc":{"start":{"line":17,"column":72},"end":{"line":25,"column":5}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":17},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":25},"end":{"line":37,"column":6}},"line":26},"11":{"name":"(anonymous_11)","decl":{"start":{"line":26,"column":59},"end":{"line":26,"column":60}},"loc":{"start":{"line":26,"column":72},"end":{"line":37,"column":5}},"line":26},"12":{"name":"(anonymous_12)","decl":{"start":{"line":38,"column":18},"end":{"line":38,"column":19}},"loc":{"start":{"line":38,"column":42},"end":{"line":46,"column":6}},"line":38},"13":{"name":"(anonymous_13)","decl":{"start":{"line":38,"column":76},"end":{"line":38,"column":77}},"loc":{"start":{"line":38,"column":89},"end":{"line":46,"column":5}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":47,"column":18},"end":{"line":47,"column":19}},"loc":{"start":{"line":47,"column":26},"end":{"line":58,"column":6}},"line":47},"15":{"name":"(anonymous_15)","decl":{"start":{"line":47,"column":60},"end":{"line":47,"column":61}},"loc":{"start":{"line":47,"column":73},"end":{"line":58,"column":5}},"line":47},"16":{"name":"(anonymous_16)","decl":{"start":{"line":59,"column":18},"end":{"line":59,"column":19}},"loc":{"start":{"line":59,"column":50},"end":{"line":70,"column":6}},"line":59},"17":{"name":"(anonymous_17)","decl":{"start":{"line":59,"column":84},"end":{"line":59,"column":85}},"loc":{"start":{"line":59,"column":97},"end":{"line":70,"column":5}},"line":59}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},{"start":{"line":29,"column":12},"end":{"line":31,"column":13}}],"line":29},"9":{"loc":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},{"start":{"line":50,"column":12},"end":{"line":52,"column":13}}],"line":50},"10":{"loc":{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},{"start":{"line":62,"column":12},"end":{"line":64,"column":13}}],"line":62}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/course/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/course/service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,8DAAkC;AAGlC,MAAM,aAAa,GAAG;IACpB,aAAa,EAAE,GAAqC,EAAE;QACpD,IAAI;YACF,MAAM,CAAC,OAAO,CAAC,GAA+B,MAAM,kBAAI,CAAC,KAAK,CAC5D,yGAAyG,CAC1G,CAAC;YACF,OAAO,OAAO,CAAC;SAChB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,WAAW,EAAE,CAAO,EAAU,EAA0C,EAAE;QACxE,IAAI;YACF,MAAM,MAAM,GAA+B,MAAM,kBAAI,CAAC,KAAK,CACzD,iHAAiH,EACjH,CAAC,EAAE,CAAC,CACL,CAAC;YACF,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;gBAC9B,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;aAClB;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,YAAY,EAAE,CAAO,MAAc,EAAE,UAAkB,EAAuC,EAAE;QAC9F,IAAI;YACF,MAAM,CAAC,EAAE,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CAC7D,uDAAuD,EACvD,CAAC,MAAM,EAAE,UAAU,CAAC,CACrB,CAAC;YACF,OAAO,EAAE,CAAC,QAAQ,CAAC;SACpB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,YAAY,EAAE,CAAO,EAAU,EAAgC,EAAE;QAC/D,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,iDAAiD,EACjD,CAAC,IAAI,IAAI,EAAE,EAAE,EAAE,CAAC,CACjB,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC3B,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,YAAY,EACV,CAAO,EAAU,EAAE,UAAkB,EAAE,UAAkB,EAAgC,EAAE;QACzF,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,4DAA4D,EAC5D,CAAC,UAAU,EAAE,UAAU,EAAE,EAAE,CAAC,CAC7B,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC3B,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;CACJ,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport ICourse from './interface';\r\n\r\nconst courseService = {\r\n  getAllCourses: async (): Promise<ICourse[] | false> => {\r\n    try {\r\n      const [courses]: [ICourse[], FieldPacket[]] = await pool.query(\r\n        'SELECT id AS id, course AS courseCode, courseLong AS courseName  FROM courses WHERE dateDeleted IS NULL',\r\n      );\r\n      return courses;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  getCourseId: async (id: number): Promise<ICourse[] | false | undefined> => {\r\n    try {\r\n      const course: [ICourse[], FieldPacket[]] = await pool.query(\r\n        'SELECT course AS courseCode, courseLong AS courseName FROM courses WHERE id = ? AND dateDeleted IS NULL LIMIT 1',\r\n        [id],\r\n      );\r\n      if (course[0][0] !== undefined) {\r\n        return course[0];\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  createCourse: async (course: string, courseLong: string): Promise<number | false | undefined> => {\r\n    try {\r\n      const [id]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'INSERT INTO courses (course, courseLong) VALUES (?,?)',\r\n        [course, courseLong],\r\n      );\r\n      return id.insertId;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  deleteCourse: async (id: number): Promise<boolean | undefined> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE courses SET dateDeleted = ? WHERE id = ?',\r\n        [new Date(), id],\r\n      );\r\n      if (result.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  updateCourse:\r\n    async (id: number, courseCode: string, courseName: string): Promise<boolean | undefined> => {\r\n      try {\r\n        const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n          'UPDATE courses SET course = ?, courseLong = ? WHERE id = ?',\r\n          [courseCode, courseName, id],\r\n        );\r\n        if (result.affectedRows > 0) {\r\n          return true;\r\n        }\r\n        return false;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    },\r\n};\r\n\r\nexport default courseService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0040fb70cc26eccc21b7e4b86eb31ba7a914363f","contentHash":"e6079364f438256406b945c0af21a7967ce3c3e622b9c07ca4537682206d46d9"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\room\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\room\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":76}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":23},"end":{"line":113,"column":1}},"18":{"start":{"line":18,"column":31},"end":{"line":28,"column":6}},"19":{"start":{"line":19,"column":22},"end":{"line":19,"column":59}},"20":{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},"21":{"start":{"line":21,"column":12},"end":{"line":23,"column":15}},"22":{"start":{"line":25,"column":8},"end":{"line":27,"column":11}},"23":{"start":{"line":29,"column":31},"end":{"line":45,"column":6}},"24":{"start":{"line":30,"column":19},"end":{"line":30,"column":46}},"25":{"start":{"line":31,"column":21},"end":{"line":31,"column":58}},"26":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"27":{"start":{"line":33,"column":12},"end":{"line":35,"column":15}},"28":{"start":{"line":37,"column":8},"end":{"line":41,"column":9}},"29":{"start":{"line":38,"column":12},"end":{"line":40,"column":15}},"30":{"start":{"line":42,"column":8},"end":{"line":44,"column":11}},"31":{"start":{"line":46,"column":27},"end":{"line":62,"column":6}},"32":{"start":{"line":47,"column":25},"end":{"line":47,"column":33}},"33":{"start":{"line":48,"column":8},"end":{"line":52,"column":9}},"34":{"start":{"line":49,"column":12},"end":{"line":51,"column":15}},"35":{"start":{"line":53,"column":19},"end":{"line":53,"column":59}},"36":{"start":{"line":54,"column":8},"end":{"line":58,"column":9}},"37":{"start":{"line":55,"column":12},"end":{"line":57,"column":15}},"38":{"start":{"line":59,"column":8},"end":{"line":61,"column":11}},"39":{"start":{"line":63,"column":30},"end":{"line":83,"column":6}},"40":{"start":{"line":64,"column":19},"end":{"line":64,"column":46}},"41":{"start":{"line":65,"column":8},"end":{"line":69,"column":9}},"42":{"start":{"line":66,"column":12},"end":{"line":68,"column":15}},"43":{"start":{"line":70,"column":27},"end":{"line":70,"column":64}},"44":{"start":{"line":71,"column":8},"end":{"line":75,"column":9}},"45":{"start":{"line":72,"column":12},"end":{"line":74,"column":15}},"46":{"start":{"line":76,"column":27},"end":{"line":76,"column":65}},"47":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"48":{"start":{"line":78,"column":12},"end":{"line":78,"column":72}},"49":{"start":{"line":80,"column":8},"end":{"line":82,"column":11}},"50":{"start":{"line":84,"column":34},"end":{"line":112,"column":6}},"51":{"start":{"line":85,"column":19},"end":{"line":85,"column":46}},"52":{"start":{"line":86,"column":25},"end":{"line":86,"column":33}},"53":{"start":{"line":87,"column":8},"end":{"line":91,"column":9}},"54":{"start":{"line":88,"column":12},"end":{"line":90,"column":15}},"55":{"start":{"line":92,"column":8},"end":{"line":96,"column":9}},"56":{"start":{"line":93,"column":12},"end":{"line":95,"column":15}},"57":{"start":{"line":97,"column":27},"end":{"line":100,"column":10}},"58":{"start":{"line":101,"column":8},"end":{"line":105,"column":9}},"59":{"start":{"line":102,"column":12},"end":{"line":104,"column":15}},"60":{"start":{"line":106,"column":8},"end":{"line":108,"column":9}},"61":{"start":{"line":107,"column":12},"end":{"line":107,"column":72}},"62":{"start":{"line":109,"column":8},"end":{"line":111,"column":11}},"63":{"start":{"line":114,"column":0},"end":{"line":114,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":17},"end":{"line":18,"column":18}},"loc":{"start":{"line":18,"column":31},"end":{"line":28,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":65},"end":{"line":18,"column":66}},"loc":{"start":{"line":18,"column":78},"end":{"line":28,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":18}},"loc":{"start":{"line":29,"column":31},"end":{"line":45,"column":6}},"line":29},"11":{"name":"(anonymous_11)","decl":{"start":{"line":29,"column":65},"end":{"line":29,"column":66}},"loc":{"start":{"line":29,"column":78},"end":{"line":45,"column":5}},"line":29},"12":{"name":"(anonymous_12)","decl":{"start":{"line":46,"column":13},"end":{"line":46,"column":14}},"loc":{"start":{"line":46,"column":27},"end":{"line":62,"column":6}},"line":46},"13":{"name":"(anonymous_13)","decl":{"start":{"line":46,"column":61},"end":{"line":46,"column":62}},"loc":{"start":{"line":46,"column":74},"end":{"line":62,"column":5}},"line":46},"14":{"name":"(anonymous_14)","decl":{"start":{"line":63,"column":16},"end":{"line":63,"column":17}},"loc":{"start":{"line":63,"column":30},"end":{"line":83,"column":6}},"line":63},"15":{"name":"(anonymous_15)","decl":{"start":{"line":63,"column":64},"end":{"line":63,"column":65}},"loc":{"start":{"line":63,"column":77},"end":{"line":83,"column":5}},"line":63},"16":{"name":"(anonymous_16)","decl":{"start":{"line":84,"column":20},"end":{"line":84,"column":21}},"loc":{"start":{"line":84,"column":34},"end":{"line":112,"column":6}},"line":84},"17":{"name":"(anonymous_17)","decl":{"start":{"line":84,"column":68},"end":{"line":84,"column":69}},"loc":{"start":{"line":84,"column":81},"end":{"line":112,"column":5}},"line":84}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":24,"column":9}},{"start":{"line":20,"column":8},"end":{"line":24,"column":9}}],"line":20},"9":{"loc":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},{"start":{"line":32,"column":8},"end":{"line":36,"column":9}}],"line":32},"10":{"loc":{"start":{"line":37,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":41,"column":9}},{"start":{"line":37,"column":8},"end":{"line":41,"column":9}}],"line":37},"11":{"loc":{"start":{"line":48,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":52,"column":9}},{"start":{"line":48,"column":8},"end":{"line":52,"column":9}}],"line":48},"12":{"loc":{"start":{"line":54,"column":8},"end":{"line":58,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":58,"column":9}},{"start":{"line":54,"column":8},"end":{"line":58,"column":9}}],"line":54},"13":{"loc":{"start":{"line":65,"column":8},"end":{"line":69,"column":9}},"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":69,"column":9}},{"start":{"line":65,"column":8},"end":{"line":69,"column":9}}],"line":65},"14":{"loc":{"start":{"line":71,"column":8},"end":{"line":75,"column":9}},"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":75,"column":9}},{"start":{"line":71,"column":8},"end":{"line":75,"column":9}}],"line":71},"15":{"loc":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},{"start":{"line":77,"column":8},"end":{"line":79,"column":9}}],"line":77},"16":{"loc":{"start":{"line":87,"column":8},"end":{"line":91,"column":9}},"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":91,"column":9}},{"start":{"line":87,"column":8},"end":{"line":91,"column":9}}],"line":87},"17":{"loc":{"start":{"line":92,"column":8},"end":{"line":96,"column":9}},"type":"if","locations":[{"start":{"line":92,"column":8},"end":{"line":96,"column":9}},{"start":{"line":92,"column":8},"end":{"line":96,"column":9}}],"line":92},"18":{"loc":{"start":{"line":101,"column":8},"end":{"line":105,"column":9}},"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":105,"column":9}},{"start":{"line":101,"column":8},"end":{"line":105,"column":9}}],"line":101},"19":{"loc":{"start":{"line":106,"column":8},"end":{"line":108,"column":9}},"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":108,"column":9}},{"start":{"line":106,"column":8},"end":{"line":108,"column":9}}],"line":106}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/room/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/room/controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,6EAAqD;AACrD,wDAAoC;AAEpC,MAAM,cAAc,GAAG;IACrB,WAAW,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QACjD,MAAM,KAAK,GAAG,MAAM,iBAAW,CAAC,WAAW,EAAE,CAAC;QAC9C,IAAI,KAAK,EAAE;YACT,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;gBACvC,KAAK;aACN,CAAC,CAAC;SACJ;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;YAChD,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;IACL,CAAC,CAAA;IACD,WAAW,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QACjD,MAAM,EAAE,GAAW,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC/C,MAAM,IAAI,GAAG,MAAM,iBAAW,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,EAAE,EAAE;YACP,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,sBAAsB;aAC9B,CAAC,CAAC;SACJ;QACD,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,0BAA0B,EAAE,EAAE;aACtC,CAAC,CAAC;SACJ;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;YACvC,IAAI;SACL,CAAC,CAAC;IACL,CAAC,CAAA;IACD,OAAO,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QAC7C,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QAC1B,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,iBAAiB;aACzB,CAAC,CAAC;SACJ;QACD,MAAM,EAAE,GAAG,MAAM,iBAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC9C,IAAI,EAAE,EAAE;YACN,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;gBAC5C,EAAE;aACH,CAAC,CAAC;SACJ;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;YAChD,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;IACL,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QAChD,MAAM,EAAE,GAAW,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,EAAE,EAAE;YACP,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,sBAAsB;aAC9B,CAAC,CAAC;SACJ;QACD,MAAM,UAAU,GAAG,MAAM,iBAAW,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QACnD,IAAI,UAAU,KAAK,SAAS,EAAE;YAC5B,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,OAAO,EAAE,2BAA2B,EAAE,EAAE;aACzC,CAAC,CAAC;SACJ;QACD,MAAM,UAAU,GAAG,MAAM,iBAAW,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QACpD,IAAI,UAAU,EAAE;YACd,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;SACnD;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;YAChD,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;IACL,CAAC,CAAA;IACD,cAAc,EAAE,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;QACpD,MAAM,EAAE,GAAW,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC/C,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QAC1B,IAAI,CAAC,EAAE,EAAE;YACP,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,sBAAsB;aAC9B,CAAC,CAAC;SACJ;QACD,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,mBAAmB;aAC3B,CAAC,CAAC;SACJ;QACD,MAAM,UAAU,GAAG,MAAM,iBAAW,CAAC,UAAU,CAAC;YAC9C,EAAE;YACF,IAAI;SACL,CAAC,CAAC;QACH,IAAI,UAAU,KAAK,SAAS,EAAE;YAC5B,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;gBAC/C,KAAK,EAAE,0BAA0B,EAAE,EAAE;aACtC,CAAC,CAAC;SACJ;QACD,IAAI,UAAU,EAAE;YACd,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;SACnD;QACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;YAChD,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;IACL,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,cAAc,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\nimport roomService from './service';\r\n\r\nconst roomController = {\r\n  getAllRooms: async (req: Request, res: Response) => {\r\n    const rooms = await roomService.getAllRooms();\r\n    if (rooms) {\r\n      return res.status(responseCodes.ok).json({\r\n        rooms,\r\n      });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n  getRoomById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const room = await roomService.getRoomId(id);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (!room) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No room found with id: ${id}`,\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      room,\r\n    });\r\n  },\r\n  addRoom: async (req: Request, res: Response) => {\r\n    const { room } = req.body;\r\n    if (!room) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Room is missing',\r\n      });\r\n    }\r\n    const id = await roomService.createRoom(room);\r\n    if (id) {\r\n      return res.status(responseCodes.created).json({\r\n        id,\r\n      });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n  deleteRoom: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    const roomExists = await roomService.getRoomId(id);\r\n    if (roomExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        message: `Room not found with id: ${id}`,\r\n      });\r\n    }\r\n    const deleteRoom = await roomService.deleteRoom(id);\r\n    if (deleteRoom) {\r\n      return res.status(responseCodes.noContent).send();\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n  updateRoomById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const { room } = req.body;\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (!room) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Nothing to update',\r\n      });\r\n    }\r\n    const roomExists = await roomService.updateRoom({\r\n      id,\r\n      room,\r\n    });\r\n    if (roomExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No room found with id: ${id}`,\r\n      });\r\n    }\r\n    if (roomExists) {\r\n      return res.status(responseCodes.noContent).send();\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n};\r\n\r\nexport default roomController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"24aeb8a1b656c39417f76f7ebb1c979f93e4b0b4","contentHash":"07b70bf9c1ec0ed95514228bbe3fe500353952de7b6266c8ad9790fad85844a9"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\room\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\room\\service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":20},"end":{"line":68,"column":1}},"17":{"start":{"line":17,"column":23},"end":{"line":25,"column":6}},"18":{"start":{"line":18,"column":8},"end":{"line":24,"column":9}},"19":{"start":{"line":19,"column":28},"end":{"line":19,"column":107}},"20":{"start":{"line":20,"column":12},"end":{"line":20,"column":25}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":25}},"22":{"start":{"line":26,"column":23},"end":{"line":34,"column":6}},"23":{"start":{"line":27,"column":8},"end":{"line":33,"column":9}},"24":{"start":{"line":28,"column":27},"end":{"line":28,"column":134}},"25":{"start":{"line":29,"column":12},"end":{"line":29,"column":27}},"26":{"start":{"line":32,"column":12},"end":{"line":32,"column":25}},"27":{"start":{"line":35,"column":26},"end":{"line":43,"column":6}},"28":{"start":{"line":36,"column":8},"end":{"line":42,"column":9}},"29":{"start":{"line":37,"column":29},"end":{"line":37,"column":101}},"30":{"start":{"line":38,"column":12},"end":{"line":38,"column":35}},"31":{"start":{"line":41,"column":12},"end":{"line":41,"column":25}},"32":{"start":{"line":44,"column":24},"end":{"line":55,"column":6}},"33":{"start":{"line":45,"column":8},"end":{"line":54,"column":9}},"34":{"start":{"line":46,"column":12},"end":{"line":49,"column":15}},"35":{"start":{"line":50,"column":12},"end":{"line":50,"column":24}},"36":{"start":{"line":53,"column":12},"end":{"line":53,"column":25}},"37":{"start":{"line":56,"column":26},"end":{"line":67,"column":6}},"38":{"start":{"line":57,"column":8},"end":{"line":66,"column":9}},"39":{"start":{"line":58,"column":29},"end":{"line":58,"column":123}},"40":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"41":{"start":{"line":60,"column":16},"end":{"line":60,"column":28}},"42":{"start":{"line":62,"column":12},"end":{"line":62,"column":25}},"43":{"start":{"line":65,"column":12},"end":{"line":65,"column":25}},"44":{"start":{"line":69,"column":0},"end":{"line":69,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":18}},"loc":{"start":{"line":17,"column":23},"end":{"line":25,"column":6}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":57},"end":{"line":17,"column":58}},"loc":{"start":{"line":17,"column":70},"end":{"line":25,"column":5}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":15},"end":{"line":26,"column":16}},"loc":{"start":{"line":26,"column":23},"end":{"line":34,"column":6}},"line":26},"11":{"name":"(anonymous_11)","decl":{"start":{"line":26,"column":57},"end":{"line":26,"column":58}},"loc":{"start":{"line":26,"column":70},"end":{"line":34,"column":5}},"line":26},"12":{"name":"(anonymous_12)","decl":{"start":{"line":35,"column":16},"end":{"line":35,"column":17}},"loc":{"start":{"line":35,"column":26},"end":{"line":43,"column":6}},"line":35},"13":{"name":"(anonymous_13)","decl":{"start":{"line":35,"column":60},"end":{"line":35,"column":61}},"loc":{"start":{"line":35,"column":73},"end":{"line":43,"column":5}},"line":35},"14":{"name":"(anonymous_14)","decl":{"start":{"line":44,"column":16},"end":{"line":44,"column":17}},"loc":{"start":{"line":44,"column":24},"end":{"line":55,"column":6}},"line":44},"15":{"name":"(anonymous_15)","decl":{"start":{"line":44,"column":58},"end":{"line":44,"column":59}},"loc":{"start":{"line":44,"column":71},"end":{"line":55,"column":5}},"line":44},"16":{"name":"(anonymous_16)","decl":{"start":{"line":56,"column":16},"end":{"line":56,"column":17}},"loc":{"start":{"line":56,"column":26},"end":{"line":67,"column":6}},"line":56},"17":{"name":"(anonymous_17)","decl":{"start":{"line":56,"column":60},"end":{"line":56,"column":61}},"loc":{"start":{"line":56,"column":73},"end":{"line":67,"column":5}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"type":"if","locations":[{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},{"start":{"line":59,"column":12},"end":{"line":61,"column":13}}],"line":59}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/room/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/room/service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,8DAAkC;AAGlC,MAAM,WAAW,GAAG;IAClB,WAAW,EAAE,GAAmC,EAAE;QAChD,IAAI;YACF,MAAM,CAAC,KAAK,CAAC,GAA6B,MAAM,kBAAI,CAAC,KAAK,CACxD,+CAA+C,CAChD,CAAC;YACF,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,SAAS,EAAE,CAAO,EAAU,EAA0B,EAAE;QACtD,IAAI;YACF,MAAM,CAAC,IAAI,CAAC,GAA6B,MAAM,kBAAI,CAAC,KAAK,CACvD,qEAAqE,EACrE,CAAC,EAAE,CAAC,CACL,CAAC;YACF,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;SAChB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,IAAY,EAA2B,EAAE;QAC1D,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,gCAAgC,EAChC,CAAC,IAAI,CAAC,CACP,CAAC;YACF,OAAO,MAAM,CAAC,QAAQ,CAAC;SACxB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,EAAU,EAAoB,EAAE;QACjD,IAAI;YACF,MAAM,kBAAI,CAAC,KAAK,CAAC,+CAA+C,EAAE;gBAChE,IAAI,IAAI,EAAE;gBACV,EAAE;aACH,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACb;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;IACD,UAAU,EAAE,CAAO,IAGlB,EAAgC,EAAE;QACjC,IAAI;YACF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CACjE,wCAAwC,EACxC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CACrB,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;gBAC3B,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAA;CACF,CAAC;AAEF,kBAAe,WAAW,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport IRoom from './interface';\r\n\r\nconst roomService = {\r\n  getAllRooms: async (): Promise<IRoom[] | false> => {\r\n    try {\r\n      const [rooms]: [IRoom[], FieldPacket[]] = await pool.query(\r\n        'SELECT * FROM rooms WHERE dateDeleted is NULL',\r\n      );\r\n      return rooms;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  getRoomId: async (id: number): Promise<IRoom | false> => {\r\n    try {\r\n      const [room]: [IRoom[], FieldPacket[]] = await pool.query(\r\n        'SELECT room FROM rooms WHERE id = ? AND dateDeleted IS NULL LIMIT 1',\r\n        [id],\r\n      );\r\n      return room[0];\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  createRoom: async (room: string): Promise<number | false> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'INSERT INTO rooms SET room = ?',\r\n        [room],\r\n      );\r\n      return result.insertId;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  deleteRoom: async (id: number): Promise<boolean> => {\r\n    try {\r\n      await pool.query('UPDATE rooms SET dateDeleted = ? WHERE id = ?', [\r\n        new Date(),\r\n        id,\r\n      ]);\r\n      return true;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  updateRoom: async (data: {\r\n    id: number;\r\n    room: string;\r\n  }): Promise<boolean | undefined> => {\r\n    try {\r\n      const [update]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE rooms SET room = ? WHERE id = ?',\r\n        [data.room, data.id],\r\n      );\r\n      if (update.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default roomService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"904544f79ac829a457edd8dbdb30b2de15be8348","contentHash":"4a108022ae31404ad6c588b144c463993ecdabc2228dfe2d8e1c0a5460075ea3"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\schedule\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\schedule\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":76}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":21},"end":{"line":17,"column":71}},"18":{"start":{"line":18,"column":27},"end":{"line":148,"column":1}},"19":{"start":{"line":19,"column":37},"end":{"line":42,"column":6}},"20":{"start":{"line":20,"column":33},"end":{"line":20,"column":43}},"21":{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},"22":{"start":{"line":23,"column":12},"end":{"line":23,"column":73}},"23":{"start":{"line":26,"column":12},"end":{"line":26,"column":57}},"24":{"start":{"line":28,"column":8},"end":{"line":33,"column":9}},"25":{"start":{"line":29,"column":12},"end":{"line":29,"column":34}},"26":{"start":{"line":32,"column":12},"end":{"line":32,"column":57}},"27":{"start":{"line":35,"column":25},"end":{"line":35,"column":82}},"28":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"29":{"start":{"line":37,"column":12},"end":{"line":37,"column":77}},"30":{"start":{"line":39,"column":8},"end":{"line":41,"column":11}},"31":{"start":{"line":43,"column":34},"end":{"line":74,"column":6}},"32":{"start":{"line":44,"column":83},"end":{"line":44,"column":91}},"33":{"start":{"line":45,"column":48},"end":{"line":45,"column":56}},"34":{"start":{"line":46,"column":8},"end":{"line":50,"column":9}},"35":{"start":{"line":47,"column":12},"end":{"line":49,"column":15}},"36":{"start":{"line":51,"column":8},"end":{"line":54,"column":9}},"37":{"start":{"line":52,"column":36},"end":{"line":52,"column":89}},"38":{"start":{"line":53,"column":12},"end":{"line":53,"column":43}},"39":{"start":{"line":55,"column":8},"end":{"line":59,"column":9}},"40":{"start":{"line":56,"column":12},"end":{"line":58,"column":15}},"41":{"start":{"line":60,"column":8},"end":{"line":60,"column":67}},"42":{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},"43":{"start":{"line":62,"column":12},"end":{"line":64,"column":15}},"44":{"start":{"line":66,"column":8},"end":{"line":66,"column":63}},"45":{"start":{"line":67,"column":27},"end":{"line":67,"column":146}},"46":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"47":{"start":{"line":69,"column":12},"end":{"line":69,"column":79}},"48":{"start":{"line":71,"column":8},"end":{"line":73,"column":11}},"49":{"start":{"line":75,"column":34},"end":{"line":107,"column":6}},"50":{"start":{"line":76,"column":83},"end":{"line":76,"column":91}},"51":{"start":{"line":77,"column":48},"end":{"line":77,"column":56}},"52":{"start":{"line":78,"column":19},"end":{"line":78,"column":46}},"53":{"start":{"line":79,"column":8},"end":{"line":83,"column":9}},"54":{"start":{"line":80,"column":12},"end":{"line":82,"column":15}},"55":{"start":{"line":84,"column":8},"end":{"line":84,"column":67}},"56":{"start":{"line":85,"column":8},"end":{"line":89,"column":9}},"57":{"start":{"line":86,"column":12},"end":{"line":88,"column":15}},"58":{"start":{"line":90,"column":8},"end":{"line":90,"column":63}},"59":{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},"60":{"start":{"line":92,"column":12},"end":{"line":94,"column":15}},"61":{"start":{"line":96,"column":8},"end":{"line":99,"column":9}},"62":{"start":{"line":97,"column":36},"end":{"line":97,"column":89}},"63":{"start":{"line":98,"column":12},"end":{"line":98,"column":43}},"64":{"start":{"line":100,"column":24},"end":{"line":100,"column":147}},"65":{"start":{"line":101,"column":8},"end":{"line":103,"column":9}},"66":{"start":{"line":102,"column":12},"end":{"line":102,"column":76}},"67":{"start":{"line":104,"column":8},"end":{"line":106,"column":11}},"68":{"start":{"line":108,"column":34},"end":{"line":122,"column":6}},"69":{"start":{"line":109,"column":19},"end":{"line":109,"column":46}},"70":{"start":{"line":110,"column":8},"end":{"line":114,"column":9}},"71":{"start":{"line":111,"column":12},"end":{"line":113,"column":15}},"72":{"start":{"line":115,"column":27},"end":{"line":115,"column":69}},"73":{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},"74":{"start":{"line":117,"column":12},"end":{"line":117,"column":79}},"75":{"start":{"line":119,"column":8},"end":{"line":121,"column":11}},"76":{"start":{"line":123,"column":27},"end":{"line":147,"column":6}},"77":{"start":{"line":124,"column":25},"end":{"line":124,"column":35}},"78":{"start":{"line":125,"column":25},"end":{"line":125,"column":35}},"79":{"start":{"line":126,"column":25},"end":{"line":126,"column":52}},"80":{"start":{"line":127,"column":27},"end":{"line":127,"column":56}},"81":{"start":{"line":128,"column":8},"end":{"line":133,"column":9}},"82":{"start":{"line":129,"column":12},"end":{"line":129,"column":73}},"83":{"start":{"line":132,"column":12},"end":{"line":132,"column":57}},"84":{"start":{"line":134,"column":8},"end":{"line":139,"column":9}},"85":{"start":{"line":135,"column":12},"end":{"line":135,"column":34}},"86":{"start":{"line":138,"column":12},"end":{"line":138,"column":57}},"87":{"start":{"line":140,"column":25},"end":{"line":140,"column":94}},"88":{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},"89":{"start":{"line":142,"column":12},"end":{"line":142,"column":77}},"90":{"start":{"line":144,"column":8},"end":{"line":146,"column":11}},"91":{"start":{"line":149,"column":0},"end":{"line":149,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":23},"end":{"line":19,"column":24}},"loc":{"start":{"line":19,"column":37},"end":{"line":42,"column":6}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":71},"end":{"line":19,"column":72}},"loc":{"start":{"line":19,"column":84},"end":{"line":42,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":43,"column":20},"end":{"line":43,"column":21}},"loc":{"start":{"line":43,"column":34},"end":{"line":74,"column":6}},"line":43},"11":{"name":"(anonymous_11)","decl":{"start":{"line":43,"column":68},"end":{"line":43,"column":69}},"loc":{"start":{"line":43,"column":81},"end":{"line":74,"column":5}},"line":43},"12":{"name":"(anonymous_12)","decl":{"start":{"line":75,"column":20},"end":{"line":75,"column":21}},"loc":{"start":{"line":75,"column":34},"end":{"line":107,"column":6}},"line":75},"13":{"name":"(anonymous_13)","decl":{"start":{"line":75,"column":68},"end":{"line":75,"column":69}},"loc":{"start":{"line":75,"column":81},"end":{"line":107,"column":5}},"line":75},"14":{"name":"(anonymous_14)","decl":{"start":{"line":108,"column":20},"end":{"line":108,"column":21}},"loc":{"start":{"line":108,"column":34},"end":{"line":122,"column":6}},"line":108},"15":{"name":"(anonymous_15)","decl":{"start":{"line":108,"column":68},"end":{"line":108,"column":69}},"loc":{"start":{"line":108,"column":81},"end":{"line":122,"column":5}},"line":108},"16":{"name":"(anonymous_16)","decl":{"start":{"line":123,"column":13},"end":{"line":123,"column":14}},"loc":{"start":{"line":123,"column":27},"end":{"line":147,"column":6}},"line":123},"17":{"name":"(anonymous_17)","decl":{"start":{"line":123,"column":61},"end":{"line":123,"column":62}},"loc":{"start":{"line":123,"column":74},"end":{"line":147,"column":5}},"line":123}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":27,"column":9}},{"start":{"line":22,"column":8},"end":{"line":27,"column":9}}],"line":22},"9":{"loc":{"start":{"line":28,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":33,"column":9}},{"start":{"line":28,"column":8},"end":{"line":33,"column":9}}],"line":28},"10":{"loc":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},{"start":{"line":36,"column":8},"end":{"line":38,"column":9}}],"line":36},"11":{"loc":{"start":{"line":46,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":50,"column":9}},{"start":{"line":46,"column":8},"end":{"line":50,"column":9}}],"line":46},"12":{"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":38}},"type":"binary-expr","locations":[{"start":{"line":46,"column":12},"end":{"line":46,"column":24}},{"start":{"line":46,"column":28},"end":{"line":46,"column":38}}],"line":46},"13":{"loc":{"start":{"line":51,"column":8},"end":{"line":54,"column":9}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":54,"column":9}},{"start":{"line":51,"column":8},"end":{"line":54,"column":9}}],"line":51},"14":{"loc":{"start":{"line":55,"column":8},"end":{"line":59,"column":9}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":59,"column":9}},{"start":{"line":55,"column":8},"end":{"line":59,"column":9}}],"line":55},"15":{"loc":{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},{"start":{"line":61,"column":8},"end":{"line":65,"column":9}}],"line":61},"16":{"loc":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},{"start":{"line":68,"column":8},"end":{"line":70,"column":9}}],"line":68},"17":{"loc":{"start":{"line":79,"column":8},"end":{"line":83,"column":9}},"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":83,"column":9}},{"start":{"line":79,"column":8},"end":{"line":83,"column":9}}],"line":79},"18":{"loc":{"start":{"line":85,"column":8},"end":{"line":89,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":89,"column":9}},{"start":{"line":85,"column":8},"end":{"line":89,"column":9}}],"line":85},"19":{"loc":{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":95,"column":9}},{"start":{"line":91,"column":8},"end":{"line":95,"column":9}}],"line":91},"20":{"loc":{"start":{"line":91,"column":12},"end":{"line":91,"column":38}},"type":"binary-expr","locations":[{"start":{"line":91,"column":12},"end":{"line":91,"column":24}},{"start":{"line":91,"column":28},"end":{"line":91,"column":38}}],"line":91},"21":{"loc":{"start":{"line":96,"column":8},"end":{"line":99,"column":9}},"type":"if","locations":[{"start":{"line":96,"column":8},"end":{"line":99,"column":9}},{"start":{"line":96,"column":8},"end":{"line":99,"column":9}}],"line":96},"22":{"loc":{"start":{"line":101,"column":8},"end":{"line":103,"column":9}},"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":103,"column":9}},{"start":{"line":101,"column":8},"end":{"line":103,"column":9}}],"line":101},"23":{"loc":{"start":{"line":110,"column":8},"end":{"line":114,"column":9}},"type":"if","locations":[{"start":{"line":110,"column":8},"end":{"line":114,"column":9}},{"start":{"line":110,"column":8},"end":{"line":114,"column":9}}],"line":110},"24":{"loc":{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},"type":"if","locations":[{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},{"start":{"line":116,"column":8},"end":{"line":118,"column":9}}],"line":116},"25":{"loc":{"start":{"line":128,"column":8},"end":{"line":133,"column":9}},"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":133,"column":9}},{"start":{"line":128,"column":8},"end":{"line":133,"column":9}}],"line":128},"26":{"loc":{"start":{"line":134,"column":8},"end":{"line":139,"column":9}},"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":139,"column":9}},{"start":{"line":134,"column":8},"end":{"line":139,"column":9}}],"line":134},"27":{"loc":{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},{"start":{"line":141,"column":8},"end":{"line":143,"column":9}}],"line":141}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/schedule/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/schedule/controller.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\nimport scheduleService from './service';\r\nimport formatDate from '../../utils/formatDate';\r\n\r\nconst scheduleController = {\r\n  getEntireSchedule: async (req: Request, res: Response) => {\r\n    let { atDate, toDate } = req.params;\r\n    // console.log (atDate, toDate);\r\n    if (atDate === undefined) {\r\n      atDate = new Date().toJSON().slice(0, 10).replace(/-/g, '-'); // tähtaeg tänasest juhul kui kuupäeva pole\r\n    } else {\r\n      atDate = formatDate.forSql(atDate);\r\n    }\r\n\r\n    if (toDate === undefined) {\r\n      toDate = '3000-12-12'; // tähtaeg kuni selle kuupäevani juhul kui kuupäeva pole\r\n    } else {\r\n      toDate = formatDate.forSql(toDate);\r\n    }\r\n    // console.log (atDate, toDate);\r\n    const schedule = await scheduleService.getEntireSchedule(atDate, toDate);\r\n    if (schedule) {\r\n      return res.status(responseCodes.ok).json({ schedule });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n\r\n  createSchedule: async (req: Request, res: Response) => {\r\n    const {\r\n      rooms, comment, courses, lecturers, subjectCode, distanceLink,\r\n    } = req.body;\r\n    let { startTime, endTime, subjectId } = req.body;\r\n\r\n    if (!subjectCode && !subjectId) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'subjectCode or subjectId is missing',\r\n      });\r\n    }\r\n    if (!subjectId) {\r\n      const resultSubjectId = await scheduleService.getSubjectByCode(\r\n        subjectCode,\r\n      );\r\n\r\n      subjectId = resultSubjectId.id;\r\n    }\r\n\r\n    if (!startTime) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'startTime is missing',\r\n      });\r\n    }\r\n    startTime = formatDate.forSqlDateTime(startTime);\r\n\r\n    if (!endTime) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'endTime is missing',\r\n      });\r\n    }\r\n    endTime = formatDate.forSqlDateTime(endTime);\r\n\r\n    const scheduleId = await scheduleService.createSchedule(\r\n      startTime,\r\n      endTime,\r\n      rooms,\r\n      comment,\r\n      courses,\r\n      subjectId,\r\n      lecturers,\r\n      distanceLink,\r\n    );\r\n    if (scheduleId) {\r\n      return res.status(responseCodes.ok).json({ scheduleId });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n\r\n  updateSchedule: async (req: Request, res: Response) => {\r\n    const {\r\n      rooms, comment, courses, subjectCode, lecturers, distanceLink,\r\n    } = req.body;\r\n    let { startTime, endTime, subjectId } = req.body;\r\n    const id: number = parseInt(req.params.id, 10);\r\n\r\n    if (!startTime) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'startTime is missing',\r\n      });\r\n    }\r\n    startTime = formatDate.forSqlDateTime(startTime);\r\n\r\n    if (!endTime) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'endTime is missing',\r\n      });\r\n    }\r\n    endTime = formatDate.forSqlDateTime(endTime);\r\n\r\n    if (!subjectCode && !subjectId) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'subjectCode or subjectId is missing',\r\n      });\r\n    }\r\n    if (!subjectId) {\r\n      const resultSubjectId = await scheduleService.getSubjectByCode(\r\n        subjectCode,\r\n      );\r\n\r\n      subjectId = resultSubjectId.id;\r\n    }\r\n\r\n    const updated = await scheduleService.updateSchedule(\r\n      id,\r\n      startTime,\r\n      endTime,\r\n      rooms,\r\n      comment,\r\n      courses,\r\n      subjectId,\r\n      lecturers,\r\n      distanceLink,\r\n    );\r\n    if (updated) {\r\n      return res.status(responseCodes.ok).json({ updated });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n\r\n  deleteSchedule: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'id is missing',\r\n      });\r\n    }\r\n\r\n    const scheduleId = await scheduleService.deleteSchedule(id);\r\n    if (scheduleId) {\r\n      return res.status(responseCodes.ok).json({ scheduleId });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n\r\n  getgcal: async (req: Request, res: Response) => {\r\n    let { atDate } = req.params;\r\n    let { toDate } = req.params;\r\n    const courseId: number = Number(req.params.courseId);\r\n    const lecturerId: number = Number(req.params.lecturerId);\r\n\r\n    if (atDate === undefined) {\r\n      atDate = new Date().toJSON().slice(0, 10).replace(/-/g, '-'); // tähtaeg kuni selle kuupäevani juhul kui kuupäeva pole\r\n    } else {\r\n      atDate = formatDate.forSql(atDate);\r\n    }\r\n\r\n    if (toDate === undefined) {\r\n      toDate = '3000-12-12'; // tähtaeg kuni selle kuupäevani juhul kui kuupäeva pole\r\n    } else {\r\n      toDate = formatDate.forSql(toDate);\r\n    }\r\n\r\n    const schedule = await scheduleService.getgcal(\r\n      atDate,\r\n      toDate,\r\n      courseId,\r\n      lecturerId,\r\n    );\r\n    if (schedule) {\r\n      return res.status(responseCodes.ok).json({ schedule });\r\n    }\r\n    return res.status(responseCodes.ServerError).json({\r\n      error: 'Server error',\r\n    });\r\n  },\r\n};\r\n\r\nexport default scheduleController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2a10c2287f05eece575992728de553c32e927867","contentHash":"a512403ff8cd8da6b0c930dee38136dc43815958fa8f934d7c7126714d72eb0f"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\schedule\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\schedule\\service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":65}},"17":{"start":{"line":17,"column":24},"end":{"line":393,"column":1}},"18":{"start":{"line":18,"column":43},"end":{"line":146,"column":6}},"19":{"start":{"line":19,"column":8},"end":{"line":145,"column":9}},"20":{"start":{"line":20,"column":31},"end":{"line":42,"column":56}},"21":{"start":{"line":43,"column":20},"end":{"line":43,"column":21}},"22":{"start":{"line":44,"column":12},"end":{"line":139,"column":13}},"23":{"start":{"line":45,"column":35},"end":{"line":45,"column":37}},"24":{"start":{"line":46,"column":16},"end":{"line":46,"column":54}},"25":{"start":{"line":47,"column":16},"end":{"line":47,"column":65}},"26":{"start":{"line":48,"column":16},"end":{"line":48,"column":68}},"27":{"start":{"line":49,"column":16},"end":{"line":49,"column":49}},"28":{"start":{"line":50,"column":16},"end":{"line":50,"column":45}},"29":{"start":{"line":51,"column":16},"end":{"line":51,"column":54}},"30":{"start":{"line":52,"column":40},"end":{"line":52,"column":51}},"31":{"start":{"line":53,"column":35},"end":{"line":53,"column":101}},"32":{"start":{"line":55,"column":33},"end":{"line":55,"column":106}},"33":{"start":{"line":56,"column":16},"end":{"line":72,"column":17}},"34":{"start":{"line":57,"column":41},"end":{"line":57,"column":43}},"35":{"start":{"line":58,"column":28},"end":{"line":58,"column":29}},"36":{"start":{"line":59,"column":20},"end":{"line":70,"column":21}},"37":{"start":{"line":60,"column":44},"end":{"line":60,"column":46}},"38":{"start":{"line":61,"column":24},"end":{"line":61,"column":56}},"39":{"start":{"line":62,"column":24},"end":{"line":62,"column":74}},"40":{"start":{"line":63,"column":24},"end":{"line":63,"column":66}},"41":{"start":{"line":64,"column":24},"end":{"line":64,"column":72}},"42":{"start":{"line":65,"column":24},"end":{"line":65,"column":74}},"43":{"start":{"line":66,"column":24},"end":{"line":66,"column":74}},"44":{"start":{"line":67,"column":24},"end":{"line":67,"column":74}},"45":{"start":{"line":68,"column":24},"end":{"line":68,"column":55}},"46":{"start":{"line":69,"column":24},"end":{"line":69,"column":31}},"47":{"start":{"line":71,"column":20},"end":{"line":71,"column":57}},"48":{"start":{"line":73,"column":31},"end":{"line":73,"column":33}},"49":{"start":{"line":74,"column":16},"end":{"line":90,"column":17}},"50":{"start":{"line":75,"column":41},"end":{"line":75,"column":74}},"51":{"start":{"line":76,"column":42},"end":{"line":76,"column":73}},"52":{"start":{"line":77,"column":28},"end":{"line":77,"column":29}},"53":{"start":{"line":78,"column":20},"end":{"line":78,"column":34}},"54":{"start":{"line":79,"column":20},"end":{"line":85,"column":21}},"55":{"start":{"line":80,"column":40},"end":{"line":80,"column":42}},"56":{"start":{"line":81,"column":24},"end":{"line":81,"column":65}},"57":{"start":{"line":82,"column":24},"end":{"line":82,"column":56}},"58":{"start":{"line":83,"column":24},"end":{"line":83,"column":47}},"59":{"start":{"line":84,"column":24},"end":{"line":84,"column":31}},"60":{"start":{"line":86,"column":20},"end":{"line":86,"column":49}},"61":{"start":{"line":89,"column":20},"end":{"line":89,"column":45}},"62":{"start":{"line":91,"column":16},"end":{"line":109,"column":17}},"63":{"start":{"line":92,"column":44},"end":{"line":92,"column":79}},"64":{"start":{"line":93,"column":45},"end":{"line":93,"column":78}},"65":{"start":{"line":94,"column":46},"end":{"line":94,"column":83}},"66":{"start":{"line":95,"column":28},"end":{"line":95,"column":29}},"67":{"start":{"line":96,"column":39},"end":{"line":96,"column":41}},"68":{"start":{"line":97,"column":20},"end":{"line":104,"column":21}},"69":{"start":{"line":98,"column":42},"end":{"line":98,"column":44}},"70":{"start":{"line":99,"column":24},"end":{"line":99,"column":68}},"71":{"start":{"line":100,"column":24},"end":{"line":100,"column":67}},"72":{"start":{"line":101,"column":24},"end":{"line":101,"column":68}},"73":{"start":{"line":102,"column":24},"end":{"line":102,"column":51}},"74":{"start":{"line":103,"column":24},"end":{"line":103,"column":31}},"75":{"start":{"line":105,"column":20},"end":{"line":105,"column":53}},"76":{"start":{"line":108,"column":20},"end":{"line":108,"column":47}},"77":{"start":{"line":110,"column":16},"end":{"line":128,"column":17}},"78":{"start":{"line":111,"column":46},"end":{"line":111,"column":83}},"79":{"start":{"line":112,"column":49},"end":{"line":112,"column":93}},"80":{"start":{"line":113,"column":48},"end":{"line":113,"column":91}},"81":{"start":{"line":114,"column":28},"end":{"line":114,"column":29}},"82":{"start":{"line":115,"column":41},"end":{"line":115,"column":43}},"83":{"start":{"line":116,"column":20},"end":{"line":123,"column":21}},"84":{"start":{"line":117,"column":44},"end":{"line":117,"column":46}},"85":{"start":{"line":118,"column":24},"end":{"line":118,"column":74}},"86":{"start":{"line":119,"column":24},"end":{"line":119,"column":72}},"87":{"start":{"line":120,"column":24},"end":{"line":120,"column":70}},"88":{"start":{"line":121,"column":24},"end":{"line":121,"column":55}},"89":{"start":{"line":122,"column":24},"end":{"line":122,"column":31}},"90":{"start":{"line":124,"column":20},"end":{"line":124,"column":57}},"91":{"start":{"line":127,"column":20},"end":{"line":127,"column":49}},"92":{"start":{"line":129,"column":16},"end":{"line":129,"column":47}},"93":{"start":{"line":130,"column":16},"end":{"line":130,"column":46}},"94":{"start":{"line":131,"column":16},"end":{"line":131,"column":44}},"95":{"start":{"line":132,"column":16},"end":{"line":132,"column":48}},"96":{"start":{"line":133,"column":16},"end":{"line":133,"column":46}},"97":{"start":{"line":134,"column":16},"end":{"line":134,"column":50}},"98":{"start":{"line":135,"column":16},"end":{"line":135,"column":50}},"99":{"start":{"line":136,"column":16},"end":{"line":136,"column":57}},"100":{"start":{"line":137,"column":16},"end":{"line":137,"column":56}},"101":{"start":{"line":138,"column":16},"end":{"line":138,"column":23}},"102":{"start":{"line":140,"column":12},"end":{"line":140,"column":28}},"103":{"start":{"line":144,"column":12},"end":{"line":144,"column":25}},"104":{"start":{"line":148,"column":103},"end":{"line":237,"column":6}},"105":{"start":{"line":150,"column":8},"end":{"line":158,"column":9}},"106":{"start":{"line":151,"column":37},"end":{"line":153,"column":77}},"107":{"start":{"line":154,"column":12},"end":{"line":154,"column":56}},"108":{"start":{"line":157,"column":12},"end":{"line":157,"column":25}},"109":{"start":{"line":173,"column":8},"end":{"line":187,"column":12}},"110":{"start":{"line":173,"column":32},"end":{"line":187,"column":10}},"111":{"start":{"line":174,"column":12},"end":{"line":186,"column":13}},"112":{"start":{"line":175,"column":30},"end":{"line":178,"column":7}},"113":{"start":{"line":179,"column":16},"end":{"line":179,"column":88}},"114":{"start":{"line":180,"column":16},"end":{"line":180,"column":28}},"115":{"start":{"line":184,"column":16},"end":{"line":184,"column":95}},"116":{"start":{"line":185,"column":16},"end":{"line":185,"column":29}},"117":{"start":{"line":198,"column":8},"end":{"line":211,"column":12}},"118":{"start":{"line":198,"column":36},"end":{"line":211,"column":10}},"119":{"start":{"line":199,"column":26},"end":{"line":201,"column":25}},"120":{"start":{"line":202,"column":12},"end":{"line":210,"column":13}},"121":{"start":{"line":203,"column":16},"end":{"line":203,"column":92}},"122":{"start":{"line":204,"column":16},"end":{"line":204,"column":28}},"123":{"start":{"line":208,"column":16},"end":{"line":208,"column":101}},"124":{"start":{"line":209,"column":16},"end":{"line":209,"column":29}},"125":{"start":{"line":222,"column":8},"end":{"line":235,"column":12}},"126":{"start":{"line":222,"column":40},"end":{"line":235,"column":10}},"127":{"start":{"line":223,"column":26},"end":{"line":225,"column":25}},"128":{"start":{"line":226,"column":12},"end":{"line":234,"column":13}},"129":{"start":{"line":227,"column":16},"end":{"line":227,"column":96}},"130":{"start":{"line":228,"column":16},"end":{"line":228,"column":28}},"131":{"start":{"line":232,"column":16},"end":{"line":232,"column":107}},"132":{"start":{"line":233,"column":16},"end":{"line":233,"column":29}},"133":{"start":{"line":236,"column":8},"end":{"line":236,"column":33}},"134":{"start":{"line":239,"column":107},"end":{"line":337,"column":6}},"135":{"start":{"line":241,"column":8},"end":{"line":251,"column":9}},"136":{"start":{"line":242,"column":38},"end":{"line":244,"column":83}},"137":{"start":{"line":245,"column":12},"end":{"line":245,"column":55}},"138":{"start":{"line":249,"column":12},"end":{"line":249,"column":78}},"139":{"start":{"line":250,"column":12},"end":{"line":250,"column":25}},"140":{"start":{"line":252,"column":8},"end":{"line":257,"column":9}},"141":{"start":{"line":253,"column":12},"end":{"line":253,"column":108}},"142":{"start":{"line":256,"column":12},"end":{"line":256,"column":25}},"143":{"start":{"line":269,"column":8},"end":{"line":281,"column":12}},"144":{"start":{"line":269,"column":32},"end":{"line":281,"column":10}},"145":{"start":{"line":270,"column":26},"end":{"line":273,"column":7}},"146":{"start":{"line":274,"column":12},"end":{"line":280,"column":13}},"147":{"start":{"line":275,"column":16},"end":{"line":275,"column":73}},"148":{"start":{"line":276,"column":16},"end":{"line":276,"column":28}},"149":{"start":{"line":279,"column":16},"end":{"line":279,"column":29}},"150":{"start":{"line":282,"column":8},"end":{"line":289,"column":9}},"151":{"start":{"line":283,"column":12},"end":{"line":283,"column":110}},"152":{"start":{"line":287,"column":12},"end":{"line":287,"column":77}},"153":{"start":{"line":288,"column":12},"end":{"line":288,"column":25}},"154":{"start":{"line":302,"column":8},"end":{"line":309,"column":9}},"155":{"start":{"line":303,"column":12},"end":{"line":303,"column":111}},"156":{"start":{"line":307,"column":12},"end":{"line":307,"column":79}},"157":{"start":{"line":308,"column":12},"end":{"line":308,"column":25}},"158":{"start":{"line":321,"column":8},"end":{"line":335,"column":12}},"159":{"start":{"line":321,"column":40},"end":{"line":335,"column":10}},"160":{"start":{"line":322,"column":26},"end":{"line":325,"column":7}},"161":{"start":{"line":326,"column":12},"end":{"line":334,"column":13}},"162":{"start":{"line":327,"column":16},"end":{"line":327,"column":81}},"163":{"start":{"line":328,"column":16},"end":{"line":328,"column":28}},"164":{"start":{"line":332,"column":16},"end":{"line":332,"column":107}},"165":{"start":{"line":333,"column":16},"end":{"line":333,"column":29}},"166":{"start":{"line":336,"column":8},"end":{"line":336,"column":27}},"167":{"start":{"line":338,"column":32},"end":{"line":346,"column":6}},"168":{"start":{"line":339,"column":8},"end":{"line":345,"column":9}},"169":{"start":{"line":340,"column":30},"end":{"line":340,"column":141}},"170":{"start":{"line":341,"column":12},"end":{"line":341,"column":30}},"171":{"start":{"line":344,"column":12},"end":{"line":344,"column":25}},"172":{"start":{"line":347,"column":55},"end":{"line":380,"column":6}},"173":{"start":{"line":348,"column":23},"end":{"line":348,"column":26}},"174":{"start":{"line":349,"column":24},"end":{"line":349,"column":27}},"175":{"start":{"line":350,"column":8},"end":{"line":350,"column":45}},"176":{"start":{"line":351,"column":8},"end":{"line":351,"column":48}},"177":{"start":{"line":352,"column":8},"end":{"line":379,"column":9}},"178":{"start":{"line":353,"column":31},"end":{"line":370,"column":101}},"179":{"start":{"line":373,"column":12},"end":{"line":373,"column":28}},"180":{"start":{"line":378,"column":12},"end":{"line":378,"column":25}},"181":{"start":{"line":381,"column":28},"end":{"line":392,"column":6}},"182":{"start":{"line":382,"column":8},"end":{"line":391,"column":9}},"183":{"start":{"line":383,"column":29},"end":{"line":383,"column":130}},"184":{"start":{"line":384,"column":12},"end":{"line":386,"column":13}},"185":{"start":{"line":385,"column":16},"end":{"line":385,"column":28}},"186":{"start":{"line":387,"column":12},"end":{"line":387,"column":25}},"187":{"start":{"line":390,"column":12},"end":{"line":390,"column":25}},"188":{"start":{"line":394,"column":0},"end":{"line":394,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},"loc":{"start":{"line":18,"column":43},"end":{"line":146,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":77},"end":{"line":18,"column":78}},"loc":{"start":{"line":18,"column":90},"end":{"line":146,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":148,"column":20},"end":{"line":148,"column":21}},"loc":{"start":{"line":148,"column":103},"end":{"line":237,"column":6}},"line":148},"11":{"name":"(anonymous_11)","decl":{"start":{"line":148,"column":137},"end":{"line":148,"column":138}},"loc":{"start":{"line":148,"column":150},"end":{"line":237,"column":5}},"line":148},"12":{"name":"(anonymous_12)","decl":{"start":{"line":173,"column":22},"end":{"line":173,"column":23}},"loc":{"start":{"line":173,"column":32},"end":{"line":187,"column":10}},"line":173},"13":{"name":"(anonymous_13)","decl":{"start":{"line":173,"column":66},"end":{"line":173,"column":67}},"loc":{"start":{"line":173,"column":79},"end":{"line":187,"column":9}},"line":173},"14":{"name":"(anonymous_14)","decl":{"start":{"line":198,"column":24},"end":{"line":198,"column":25}},"loc":{"start":{"line":198,"column":36},"end":{"line":211,"column":10}},"line":198},"15":{"name":"(anonymous_15)","decl":{"start":{"line":198,"column":70},"end":{"line":198,"column":71}},"loc":{"start":{"line":198,"column":83},"end":{"line":211,"column":9}},"line":198},"16":{"name":"(anonymous_16)","decl":{"start":{"line":222,"column":26},"end":{"line":222,"column":27}},"loc":{"start":{"line":222,"column":40},"end":{"line":235,"column":10}},"line":222},"17":{"name":"(anonymous_17)","decl":{"start":{"line":222,"column":74},"end":{"line":222,"column":75}},"loc":{"start":{"line":222,"column":87},"end":{"line":235,"column":9}},"line":222},"18":{"name":"(anonymous_18)","decl":{"start":{"line":239,"column":20},"end":{"line":239,"column":21}},"loc":{"start":{"line":239,"column":107},"end":{"line":337,"column":6}},"line":239},"19":{"name":"(anonymous_19)","decl":{"start":{"line":239,"column":141},"end":{"line":239,"column":142}},"loc":{"start":{"line":239,"column":154},"end":{"line":337,"column":5}},"line":239},"20":{"name":"(anonymous_20)","decl":{"start":{"line":269,"column":22},"end":{"line":269,"column":23}},"loc":{"start":{"line":269,"column":32},"end":{"line":281,"column":10}},"line":269},"21":{"name":"(anonymous_21)","decl":{"start":{"line":269,"column":66},"end":{"line":269,"column":67}},"loc":{"start":{"line":269,"column":79},"end":{"line":281,"column":9}},"line":269},"22":{"name":"(anonymous_22)","decl":{"start":{"line":321,"column":26},"end":{"line":321,"column":27}},"loc":{"start":{"line":321,"column":40},"end":{"line":335,"column":10}},"line":321},"23":{"name":"(anonymous_23)","decl":{"start":{"line":321,"column":74},"end":{"line":321,"column":75}},"loc":{"start":{"line":321,"column":87},"end":{"line":335,"column":9}},"line":321},"24":{"name":"(anonymous_24)","decl":{"start":{"line":338,"column":22},"end":{"line":338,"column":23}},"loc":{"start":{"line":338,"column":32},"end":{"line":346,"column":6}},"line":338},"25":{"name":"(anonymous_25)","decl":{"start":{"line":338,"column":66},"end":{"line":338,"column":67}},"loc":{"start":{"line":338,"column":79},"end":{"line":346,"column":5}},"line":338},"26":{"name":"(anonymous_26)","decl":{"start":{"line":347,"column":13},"end":{"line":347,"column":14}},"loc":{"start":{"line":347,"column":55},"end":{"line":380,"column":6}},"line":347},"27":{"name":"(anonymous_27)","decl":{"start":{"line":347,"column":89},"end":{"line":347,"column":90}},"loc":{"start":{"line":347,"column":102},"end":{"line":380,"column":5}},"line":347},"28":{"name":"(anonymous_28)","decl":{"start":{"line":381,"column":20},"end":{"line":381,"column":21}},"loc":{"start":{"line":381,"column":28},"end":{"line":392,"column":6}},"line":381},"29":{"name":"(anonymous_29)","decl":{"start":{"line":381,"column":62},"end":{"line":381,"column":63}},"loc":{"start":{"line":381,"column":75},"end":{"line":392,"column":5}},"line":381}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":56,"column":16},"end":{"line":72,"column":17}},"type":"if","locations":[{"start":{"line":56,"column":16},"end":{"line":72,"column":17}},{"start":{"line":56,"column":16},"end":{"line":72,"column":17}}],"line":56},"9":{"loc":{"start":{"line":74,"column":16},"end":{"line":90,"column":17}},"type":"if","locations":[{"start":{"line":74,"column":16},"end":{"line":90,"column":17}},{"start":{"line":74,"column":16},"end":{"line":90,"column":17}}],"line":74},"10":{"loc":{"start":{"line":91,"column":16},"end":{"line":109,"column":17}},"type":"if","locations":[{"start":{"line":91,"column":16},"end":{"line":109,"column":17}},{"start":{"line":91,"column":16},"end":{"line":109,"column":17}}],"line":91},"11":{"loc":{"start":{"line":110,"column":16},"end":{"line":128,"column":17}},"type":"if","locations":[{"start":{"line":110,"column":16},"end":{"line":128,"column":17}},{"start":{"line":110,"column":16},"end":{"line":128,"column":17}}],"line":110},"12":{"loc":{"start":{"line":350,"column":19},"end":{"line":350,"column":44}},"type":"cond-expr","locations":[{"start":{"line":350,"column":36},"end":{"line":350,"column":39}},{"start":{"line":350,"column":42},"end":{"line":350,"column":44}}],"line":350},"13":{"loc":{"start":{"line":351,"column":20},"end":{"line":351,"column":47}},"type":"cond-expr","locations":[{"start":{"line":351,"column":39},"end":{"line":351,"column":42}},{"start":{"line":351,"column":45},"end":{"line":351,"column":47}}],"line":351},"14":{"loc":{"start":{"line":384,"column":12},"end":{"line":386,"column":13}},"type":"if","locations":[{"start":{"line":384,"column":12},"end":{"line":386,"column":13}},{"start":{"line":384,"column":12},"end":{"line":386,"column":13}}],"line":384}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/schedule/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/schedule/service.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { FieldPacket, ResultSetHeader, RowDataPacket } from 'mysql2';\r\nimport pool from '../../database';\r\nimport {\r\n  ISchedule, Iroom, Ilecturer, Icourse, IhomeW, Isubject,\r\n} from './interface';\r\nimport homeworkService from '../homework/service';\r\n\r\nconst scheduleService = {\r\n  getEntireSchedule: async (atDate:string, toDate:string): Promise<ISchedule[] | false> => {\r\n    try {\r\n      const [schedule]: [ISchedule[], FieldPacket[]] = await pool.query(`\r\n      SELECT distinct scheduled.id AS id, scheduled.startTime AS startTime, scheduled.endTime AS endTime, \r\n        subjects.id AS  subjectId, subjects.subjectCode AS subjectCode, subjects.subject AS subjectdescription, scheduled.distanceLink AS distanceLink, scheduled.comment, \r\n        group_concat( DISTINCT lecturers.id ORDER BY lecturers.id) As strLecturersId,\r\n        group_concat( DISTINCT lecturers.firstName ORDER BY lecturers.id) As strLecturersFirstName,\r\n        group_concat( DISTINCT lecturers.lastName ORDER BY lecturers.id) As strLecturersLastName,\r\n        group_concat( DISTINCT courses.id ORDER BY courses.id) AS strCoursesId,\r\n        group_concat( DISTINCT courses.course ORDER BY courses.id) AS strCourses,\r\n        group_concat( DISTINCT courses.courseLong ORDER BY courses.id) AS strCoursesName,    \r\n        group_concat( DISTINCT rooms.id ORDER BY rooms.id) as strRoomsId,\r\n        group_concat( DISTINCT rooms.room ORDER BY rooms.id) as strRooms\r\n      FROM scheduled left JOIN\r\n        subjects ON scheduled.subjects_id = subjects.id left JOIN\r\n        scheduled_has_lecturers ON scheduled.id = scheduled_has_lecturers.schedule_id left JOIN\r\n        lecturers ON scheduled_has_lecturers.lecturers_id = lecturers.id left JOIN\r\n        scheduled_has_courses ON scheduled.id = scheduled_has_courses.scheduled_id left JOIN\r\n        courses ON scheduled_has_courses.courses_id = courses.id left JOIN\r\n        scheduled_has_rooms ON scheduled.id = scheduled_has_rooms.scheduled_id left JOIN\r\n        rooms ON scheduled_has_rooms.rooms_id = rooms.id\r\n      WHERE scheduled.startTime >= ? AND scheduled.startTime <= DATE_ADD(?, INTERVAl 1 DAY) \r\n      AND scheduled.dateDeleted IS NULL\r\n      GROUP BY id, startTime, endTime, scheduled.comment, subjects.id, subjects.subjectCode, subjects.subject, scheduled.distanceLink\r\n      ORDER BY scheduled.startTime ;`, [atDate, toDate]);\r\n      let i = 0;\r\n      while (i < schedule.length) {\r\n        const objSubject: Isubject = {};\r\n        objSubject.id = schedule[i].subjectId;\r\n        objSubject.subjectCode = schedule[i].subjectCode;\r\n        objSubject.subject = schedule[i].subjectdescription;\r\n        schedule[i].subject = objSubject;\r\n        delete schedule[i].subjectId;\r\n        delete schedule[i].subjectdescription;\r\n\r\n        const { subjectCode } = schedule[i];\r\n        const actualDate = schedule[i].startTime.toISOString().slice(0, 11).replace('T', ' ');\r\n\r\n        // eslint-disable-next-line no-await-in-loop\r\n        const homework = await homeworkService.gethomeworkBySubjectCode(subjectCode, actualDate);\r\n\r\n        if (homework) {\r\n          const arrHomeworks = []; let h = 0;\r\n          while (h < homework.length) {\r\n            const objHomework: IhomeW = {};\r\n            objHomework.id = homework[h].id;\r\n            objHomework.description = homework[h].description;\r\n            objHomework.dueDate = homework[h].dueDate;\r\n            objHomework.extrasLink = homework[h].extrasLink;\r\n            objHomework.dateCreated = homework[h].dateCreated;\r\n            objHomework.dateUpdated = homework[h].dateUpdated;\r\n            objHomework.dateDeleted = homework[h].dateDeleted;\r\n            arrHomeworks.push(objHomework);\r\n            h += 1;\r\n          }\r\n          schedule[i].homeworks = arrHomeworks;\r\n        }\r\n\r\n        let arrRooms = [];\r\n        if (schedule[i].strRoomsId) {\r\n          const tmpArrRoomId = schedule[i].strRoomsId.split(',');\r\n          const tmpArrRoomVal = schedule[i].strRooms.split(',');\r\n          let n = 0;\r\n          arrRooms = [];\r\n          while (n < tmpArrRoomId.length) {\r\n            const objRoom:Iroom = {};\r\n            objRoom.roomId = Number(tmpArrRoomId[n]);\r\n            objRoom.room = tmpArrRoomVal[n];\r\n            arrRooms.push(objRoom);\r\n            n += 1;\r\n          }\r\n          schedule[i].rooms = arrRooms;\r\n        } else {\r\n          schedule[i].rooms = null;\r\n        }\r\n\r\n        if (schedule[i].strCoursesId) {\r\n          const tmpArrCoursesId = schedule[i].strCoursesId.split(',');\r\n          const tmpArrCoursesVal = schedule[i].strCourses.split(',');\r\n          const tmpArrCoursesName = schedule[i].strCoursesName.split(',');\r\n          let n = 0;\r\n          const arrCourses = [];\r\n          while (n < tmpArrCoursesId.length) {\r\n            const objCourse:Icourse = {};\r\n            objCourse.courseId = tmpArrCoursesId[n] * 1;\r\n            objCourse.courseCode = tmpArrCoursesVal[n];\r\n            objCourse.courseName = tmpArrCoursesName[n];\r\n            arrCourses.push(objCourse);\r\n\r\n            n += 1;\r\n          }\r\n          schedule[i].courses = arrCourses;\r\n        } else {\r\n          schedule[i].courses = null;\r\n        }\r\n\r\n        if (schedule[i].strLecturersId) {\r\n          const tmpArrLecturersId = schedule[i].strLecturersId.split(',');\r\n          const tmpArrLecturersFirst = schedule[i].strLecturersFirstName.split(',');\r\n          const tmpArrLecturersLast = schedule[i].strLecturersLastName.split(',');\r\n\r\n          let n = 0; const arrLecturers = [];\r\n\r\n          while (n < tmpArrLecturersId.length) {\r\n            const objLecturer:Ilecturer = {};\r\n            objLecturer.lecturerId = tmpArrLecturersId[n] * 1;\r\n            objLecturer.firstName = tmpArrLecturersFirst[n];\r\n            objLecturer.lastName = tmpArrLecturersLast[n];\r\n            arrLecturers.push(objLecturer);\r\n\r\n            n += 1;\r\n          }\r\n          schedule[i].lecturers = arrLecturers;\r\n        } else {\r\n          schedule[i].lecturers = null;\r\n        }\r\n\r\n        delete schedule[i].subjectCode;\r\n        delete schedule[i].strRoomsId;\r\n        delete schedule[i].strRooms;\r\n        delete schedule[i].strCoursesId;\r\n        delete schedule[i].strCourses;\r\n        delete schedule[i].strCoursesName;\r\n        delete schedule[i].strLecturersId;\r\n        delete schedule[i].strLecturersFirstName;\r\n        delete schedule[i].strLecturersLastName;\r\n        i += 1;\r\n      }\r\n      return schedule;\r\n    } catch (error) {\r\n      // console.log(error);\r\n      return false;\r\n    }\r\n  },\r\n\r\n  // ----------------------\r\n  createSchedule: async (\r\n    startTime:string,\r\n    endTime:string,\r\n    rooms: Array<Iroom>,\r\n    comment:string,\r\n    courses: Array<Icourse>,\r\n    subject:number,\r\n    lecturers: Array<Ilecturer>,\r\n    distanceLink:string,\r\n  ): Promise<number | false> => {\r\n    let createdscheduleId: number;\r\n\r\n    try {\r\n      const [createdChedule]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        `INSERT INTO scheduled \r\n        (startTime, endTime, comment, subjects_id, distanceLink) VALUES\r\n        ( ?,?,?,?,?);`,\r\n        [startTime, endTime, comment, subject, distanceLink],\r\n      );\r\n      createdscheduleId = createdChedule.insertId;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n\r\n    // Järgnevalt väljakommenteeritud kood on ESLint-i rakendamisel\r\n    // ümber kirjutatud, kuid on alles jäetud\r\n    // juhuks, kui testimisel selgub, et uus kood ei tööta.\r\n\r\n    /* for (var index in rooms) {\r\n      // console.log(\"uus kirje sceduled:\", createdscheduleId, \" Rooms_id:\", rooms[index].roomId);\r\n      try {\r\n        const [createdChedule]: [ResultSetHeader, FieldPacket[]] =\r\n          await pool.query(`INSERT INTO scheduled_has_rooms (scheduled_id, rooms_id)\r\n        VALUES ('?', '?');`, [createdscheduleId, rooms[index].roomId]);\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    } */\r\n\r\n    // Eelnev väljakommenteeritud kood ümber kirjutatud järgnevaga:\r\n    rooms.forEach(async (room) => {\r\n      try {\r\n        const query = `\r\n        INSERT INTO scheduled_has_rooms (scheduled_id, rooms_id)\r\n          VALUES (?, ?);\r\n      `;\r\n        await pool.query(query, [createdscheduleId, room.roomId]);\r\n        return true;\r\n      } catch (error) {\r\n        // eslint-disable-next-line no-console\r\n        console.error(`An error occurred while inserting room ${room.roomId}:`, error);\r\n        return false;\r\n      }\r\n    });\r\n\r\n    /* for (var index in courses) {\r\n      try {\r\n        const [createdChedule]: [ResultSetHeader, FieldPacket[]] =\r\n          await pool.query(`INSERT INTO scheduled_has_courses (scheduled_id, courses_id)\r\n        VALUES ('?', '?');`, [createdscheduleId, courses[index].courseId]);\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    } */\r\n\r\n    // Eelnev väljakommenteeritud kood ümber kirjutatud järgnevaga:\r\n    courses.forEach(async (course) => {\r\n      const query = `\r\n        INSERT INTO scheduled_has_courses (scheduled_id, courses_id)\r\n          VALUES (?, ?);`;\r\n      try {\r\n        await pool.query(query, [createdscheduleId, course.courseId]);\r\n        return true;\r\n      } catch (error) {\r\n        // eslint-disable-next-line no-console\r\n        console.error(`An error occurred while inserting course ${course.courseId}:`, error);\r\n        return false;\r\n      }\r\n    });\r\n\r\n    /* for (var index in lecturers) {\r\n      try {\r\n        const [createdChedule]: [ResultSetHeader, FieldPacket[]] =\r\n          await pool.query(`INSERT INTO scheduled_has_lecturers (schedule_id, lecturers_id)\r\n        VALUES ('?', '?');`, [createdscheduleId, lecturers[index].lecturerId]);\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    } */\r\n\r\n    // Eelnev väljakommenteeritud kood ümber kirjutatud järgnevaga:\r\n    lecturers.forEach(async (lecturer) => {\r\n      const query = `\r\n        INSERT INTO scheduled_has_lecturers (schedule_id, lecturers_id)\r\n          VALUES (?, ?);`;\r\n      try {\r\n        await pool.query(query, [createdscheduleId, lecturer.lecturerId]);\r\n        return true;\r\n      } catch (error) {\r\n        // eslint-disable-next-line no-console\r\n        console.error(`An error occurred while inserting lecturer ${lecturer.lecturerId}:`, error);\r\n        return false;\r\n      }\r\n    });\r\n\r\n    return createdscheduleId;\r\n  },\r\n\r\n  // ----------------------\r\n  updateSchedule: async (\r\n    id:number,\r\n    startTime:string,\r\n    endTime:string,\r\n    rooms: Array<Iroom>,\r\n    comment:string,\r\n    courses: Array<Icourse>,\r\n    subject:number,\r\n    lecturers: Array<Ilecturer>,\r\n    distanceLink:string,\r\n  ): Promise<number | false> => {\r\n    let updatedRows: number;\r\n\r\n    try {\r\n      const [updatedSchedule]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        `UPDATE scheduled\r\n          SET startTime = ?, endTime = ?, comment = ?, subjects_id = ?, distanceLink = ?  \r\n          WHERE id = ?;`,\r\n        [startTime, endTime, comment, subject, distanceLink, id],\r\n      );\r\n      updatedRows = updatedSchedule.affectedRows;\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error('An error occurred while updating schedule', error);\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      await pool.query(\r\n        'DELETE FROM scheduled_has_rooms WHERE scheduled_id = ?;',\r\n        [id],\r\n      );\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n\r\n    /* for (var index in rooms) {\r\n      // console.log(\"uus kirje sceduled:\", id, \" Rooms_id:\", rooms[index].roomId);\r\n      try {\r\n        const [createdChedule]: [ResultSetHeader, FieldPacket[]] =\r\n          await pool.query(`INSERT INTO scheduled_has_rooms (scheduled_id, rooms_id)\r\n        VALUES ('?', '?');`, [id, rooms[index].roomId]);\r\n      } catch (error) {\r\n        // console.log(error);\r\n        return false;\r\n      }\r\n    } */\r\n    rooms.forEach(async (room) => {\r\n      const query = `\r\n        INSERT INTO scheduled_has_rooms (scheduled_id, rooms_id)\r\n          VALUES (?, ?);\r\n      `;\r\n      try {\r\n        await pool.query(query, [id, room.roomId]);\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    });\r\n\r\n    try {\r\n      await pool.query(\r\n        'DELETE FROM scheduled_has_courses WHERE scheduled_id = ?;',\r\n        [id],\r\n      );\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error('An error occurred while deleting courses', error);\r\n      return false;\r\n    }\r\n\r\n    // console.log(courses);\r\n    /* for (var index in courses) {\r\n      console.log('uus kirje sceduled:', id, ' courses_id:', courses[index].courseId);\r\n      try {\r\n        const [createdChedule]: [ResultSetHeader, FieldPacket[]] =\r\n          await pool.query(`INSERT INTO scheduled_has_courses (scheduled_id, courses_id)\r\n        VALUES ('?', '?');`, [id, courses[index].courseId]);\r\n      } catch (error) {\r\n        // console.log(error);\r\n        return false;\r\n      }\r\n    } */\r\n\r\n    try {\r\n      await pool.query(\r\n        'DELETE FROM scheduled_has_lecturers WHERE schedule_id = ?;',\r\n        [id],\r\n      );\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error('An error occurred while deleting lecturers', error);\r\n      return false;\r\n    }\r\n\r\n    /* for (var index in lecturers) {\r\n      // console.log(\"uus kirje sceduled:\", id, \" lecturers_id:\", lecturers[index].lecturerId);\r\n      try {\r\n        const [createdChedule]: [ResultSetHeader, FieldPacket[]] =\r\n          await pool.query(`INSERT INTO scheduled_has_lecturers (schedule_id, lecturers_id)\r\n        VALUES ('?', '?');`, [id, lecturers[index].lecturerId]);\r\n      } catch (error) {\r\n        // console.log(error);\r\n        return false;\r\n      }\r\n    } */\r\n    lecturers.forEach(async (lecturer) => {\r\n      const query = `\r\n        INSERT INTO scheduled_has_lecturers (schedule_id, lecturers_id)\r\n        VALUES (?, ?);\r\n      `;\r\n      try {\r\n        await pool.query(query, [id, lecturer.lecturerId]);\r\n        return true;\r\n      } catch (error) {\r\n        // eslint-disable-next-line no-console\r\n        console.error(`An error occurred while inserting lecturer ${lecturer.lecturerId}:`, error);\r\n        return false;\r\n      }\r\n    });\r\n\r\n    return updatedRows;\r\n  },\r\n\r\n  getSubjectByCode: async (code: string): Promise<any> => {\r\n    try {\r\n      const [subject]: [RowDataPacket[][], FieldPacket[]] = await pool.query(\r\n        'SELECT id FROM subjects WHERE subjectCode = ? AND dateDeleted is NULL',\r\n        [code],\r\n      );\r\n      return subject[0];\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  getgcal: async (atDate:string, toDate:string, courseId:number, lecturerId:number):\r\n    Promise<ISchedule[] | false> => {\r\n    let isCourse = '%';\r\n    let isLecture = '%';\r\n    isCourse = courseId === 0 ? '%' : '';\r\n    isLecture = lecturerId === 0 ? '%' : '';\r\n\r\n    try {\r\n      const [schedule]: [ISchedule[], FieldPacket[]] = await pool.query(`\r\n      SELECT distinct scheduled.id AS id, scheduled.startTime AS startTime, scheduled.endTime AS endTime, \r\n        subjects.subjectCode AS subjectCode, subjects.subject AS subject, scheduled.distanceLink AS distanceLink, scheduled.comment, \r\n        group_concat( DISTINCT lecturers.id ORDER BY lecturers.id) As strLecturersId,\r\n        group_concat( DISTINCT courses.id ORDER BY courses.id) AS strCoursesId,\r\n        group_concat( DISTINCT rooms.id ORDER BY rooms.id) as strRoomsId\r\n        FROM scheduled left JOIN\r\n        subjects ON scheduled.subjects_id = subjects.id left JOIN\r\n        scheduled_has_lecturers ON scheduled.id = scheduled_has_lecturers.schedule_id left JOIN\r\n        lecturers ON scheduled_has_lecturers.lecturers_id = lecturers.id left JOIN\r\n        scheduled_has_courses ON scheduled.id = scheduled_has_courses.scheduled_id left JOIN\r\n        courses ON scheduled_has_courses.courses_id = courses.id left JOIN\r\n        scheduled_has_rooms ON scheduled.id = scheduled_has_rooms.scheduled_id left JOIN\r\n        rooms ON scheduled_has_rooms.rooms_id = rooms.id\r\n        WHERE scheduled.startTime >= ? AND scheduled.startTime <= DATE_ADD(?, INTERVAl 1 DAY) AND (courses.id = ? OR \"%\" = ?) AND (lecturers.id = ? OR \"%\" = ?)\r\n        AND scheduled.dateDeleted IS NULL\r\n        GROUP BY id, startTime, endTime, scheduled.comment, subjects.subjectCode, subjects.subject, scheduled.distanceLink\r\n        ORDER BY scheduled.startTime ;`, [atDate, toDate, courseId, isCourse, lecturerId, isLecture]);\r\n\r\n      // console.log(atDate, toDate, courseId, lecturerId);\r\n      // console.log(schedule);\r\n      return schedule;\r\n\r\n      // AND courses.id = ? AND lecturers.id = ?\r\n    } catch (error) {\r\n      // console.log(error);\r\n      return false;\r\n    }\r\n  },\r\n\r\n  deleteSchedule: async (id: number): Promise<boolean | undefined> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE scheduled SET dateDeleted = ? WHERE id = ?',\r\n        [new Date(), id],\r\n      );\r\n      if (result.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n\r\n};\r\n\r\nexport default scheduleService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7518c473e640ea21cc935688267fbc7318eda8a0","contentHash":"9fa7f4fe14d3facd9850a4cb5a8c0f5e531c0c80febba9b98719aad67d498e14"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\homework\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\homework\\service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":17,"column":24},"end":{"line":123,"column":1}},"17":{"start":{"line":18,"column":27},"end":{"line":26,"column":6}},"18":{"start":{"line":19,"column":8},"end":{"line":25,"column":9}},"19":{"start":{"line":20,"column":32},"end":{"line":20,"column":429}},"20":{"start":{"line":21,"column":12},"end":{"line":21,"column":29}},"21":{"start":{"line":24,"column":12},"end":{"line":24,"column":25}},"22":{"start":{"line":27,"column":27},"end":{"line":39,"column":6}},"23":{"start":{"line":28,"column":8},"end":{"line":38,"column":9}},"24":{"start":{"line":29,"column":29},"end":{"line":29,"column":437}},"25":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"26":{"start":{"line":32,"column":16},"end":{"line":32,"column":35}},"27":{"start":{"line":34,"column":12},"end":{"line":34,"column":25}},"28":{"start":{"line":37,"column":12},"end":{"line":37,"column":25}},"29":{"start":{"line":40,"column":71},"end":{"line":56,"column":6}},"30":{"start":{"line":41,"column":8},"end":{"line":55,"column":9}},"31":{"start":{"line":49,"column":25},"end":{"line":49,"column":197}},"32":{"start":{"line":50,"column":12},"end":{"line":50,"column":31}},"33":{"start":{"line":54,"column":12},"end":{"line":54,"column":25}},"34":{"start":{"line":57,"column":28},"end":{"line":68,"column":6}},"35":{"start":{"line":58,"column":8},"end":{"line":67,"column":9}},"36":{"start":{"line":59,"column":29},"end":{"line":59,"column":130}},"37":{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},"38":{"start":{"line":61,"column":16},"end":{"line":61,"column":28}},"39":{"start":{"line":63,"column":12},"end":{"line":63,"column":25}},"40":{"start":{"line":66,"column":12},"end":{"line":66,"column":25}},"41":{"start":{"line":69,"column":75},"end":{"line":80,"column":6}},"42":{"start":{"line":70,"column":8},"end":{"line":79,"column":9}},"43":{"start":{"line":71,"column":29},"end":{"line":71,"column":212}},"44":{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},"45":{"start":{"line":73,"column":16},"end":{"line":73,"column":28}},"46":{"start":{"line":75,"column":12},"end":{"line":75,"column":25}},"47":{"start":{"line":78,"column":12},"end":{"line":78,"column":25}},"48":{"start":{"line":81,"column":32},"end":{"line":89,"column":6}},"49":{"start":{"line":82,"column":8},"end":{"line":88,"column":9}},"50":{"start":{"line":83,"column":30},"end":{"line":83,"column":141}},"51":{"start":{"line":84,"column":12},"end":{"line":84,"column":30}},"52":{"start":{"line":87,"column":12},"end":{"line":87,"column":25}},"53":{"start":{"line":90,"column":55},"end":{"line":122,"column":6}},"54":{"start":{"line":91,"column":8},"end":{"line":121,"column":9}},"55":{"start":{"line":105,"column":29},"end":{"line":111,"column":172}},"56":{"start":{"line":113,"column":12},"end":{"line":115,"column":13}},"57":{"start":{"line":114,"column":16},"end":{"line":114,"column":35}},"58":{"start":{"line":116,"column":12},"end":{"line":116,"column":25}},"59":{"start":{"line":120,"column":12},"end":{"line":120,"column":25}},"60":{"start":{"line":124,"column":0},"end":{"line":124,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":21},"end":{"line":18,"column":22}},"loc":{"start":{"line":18,"column":27},"end":{"line":26,"column":6}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":61},"end":{"line":18,"column":62}},"loc":{"start":{"line":18,"column":74},"end":{"line":26,"column":5}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":27,"column":19},"end":{"line":27,"column":20}},"loc":{"start":{"line":27,"column":27},"end":{"line":39,"column":6}},"line":27},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":61},"end":{"line":27,"column":62}},"loc":{"start":{"line":27,"column":74},"end":{"line":39,"column":5}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":40,"column":20},"end":{"line":40,"column":21}},"loc":{"start":{"line":40,"column":71},"end":{"line":56,"column":6}},"line":40},"13":{"name":"(anonymous_13)","decl":{"start":{"line":40,"column":105},"end":{"line":40,"column":106}},"loc":{"start":{"line":40,"column":118},"end":{"line":56,"column":5}},"line":40},"14":{"name":"(anonymous_14)","decl":{"start":{"line":57,"column":20},"end":{"line":57,"column":21}},"loc":{"start":{"line":57,"column":28},"end":{"line":68,"column":6}},"line":57},"15":{"name":"(anonymous_15)","decl":{"start":{"line":57,"column":62},"end":{"line":57,"column":63}},"loc":{"start":{"line":57,"column":75},"end":{"line":68,"column":5}},"line":57},"16":{"name":"(anonymous_16)","decl":{"start":{"line":69,"column":20},"end":{"line":69,"column":21}},"loc":{"start":{"line":69,"column":75},"end":{"line":80,"column":6}},"line":69},"17":{"name":"(anonymous_17)","decl":{"start":{"line":69,"column":109},"end":{"line":69,"column":110}},"loc":{"start":{"line":69,"column":122},"end":{"line":80,"column":5}},"line":69},"18":{"name":"(anonymous_18)","decl":{"start":{"line":81,"column":22},"end":{"line":81,"column":23}},"loc":{"start":{"line":81,"column":32},"end":{"line":89,"column":6}},"line":81},"19":{"name":"(anonymous_19)","decl":{"start":{"line":81,"column":66},"end":{"line":81,"column":67}},"loc":{"start":{"line":81,"column":79},"end":{"line":89,"column":5}},"line":81},"20":{"name":"(anonymous_20)","decl":{"start":{"line":90,"column":30},"end":{"line":90,"column":31}},"loc":{"start":{"line":90,"column":55},"end":{"line":122,"column":6}},"line":90},"21":{"name":"(anonymous_21)","decl":{"start":{"line":90,"column":89},"end":{"line":90,"column":90}},"loc":{"start":{"line":90,"column":102},"end":{"line":122,"column":5}},"line":90}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},{"start":{"line":31,"column":12},"end":{"line":33,"column":13}}],"line":31},"9":{"loc":{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},"type":"if","locations":[{"start":{"line":60,"column":12},"end":{"line":62,"column":13}},{"start":{"line":60,"column":12},"end":{"line":62,"column":13}}],"line":60},"10":{"loc":{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},"type":"if","locations":[{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},{"start":{"line":72,"column":12},"end":{"line":74,"column":13}}],"line":72},"11":{"loc":{"start":{"line":113,"column":12},"end":{"line":115,"column":13}},"type":"if","locations":[{"start":{"line":113,"column":12},"end":{"line":115,"column":13}},{"start":{"line":113,"column":12},"end":{"line":115,"column":13}}],"line":113}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/homework/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/homework/service.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable camelcase */\r\n/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { RowDataPacket, FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport Ihomework from './interface';\r\n// import ISubject from \"./interface\";\r\n\r\nconst homeworkService = {\r\n  getAllhomeworks: async (): Promise<Ihomework[] | false> => {\r\n    try {\r\n      const [homeworks]: [Ihomework[], FieldPacket[]] = await pool.query(\r\n        'SELECT homeworks.id, subjects.subjectCode, subjects.id as subjects_id, subjects.subject, homeworks.description, homeworks.dueDate, homeworks.extrasLink, homeworks.dateCreated, homeworks.dateUpdated, homeworks.dateDeleted FROM scheduleDb.homeworks left join subjects ON homeworks.subjects_id = subjects.Id where homeworks.dateDeleted IS NULL order BY homeworks.id;',\r\n      );\r\n      return homeworks;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  gethomeworkId: async (\r\n    id: number,\r\n  ): Promise<Ihomework[] | false | undefined> => {\r\n    try {\r\n      const homework: [Ihomework[], FieldPacket[]] = await pool.query(\r\n        'SELECT homeworks.id, subjects.subjectCode, subjects.id as subjects_id, subjects.subject, homeworks.description, homeworks.dueDate, homeworks.extrasLink,homeworks.dateCreated, homeworks.dateUpdated, homeworks.dateDeleted FROM scheduleDb.homeworks left join subjects ON homeworks.subjects_id = subjects.Id WHERE homeworks.id = ? AND homeworks.dateDeleted IS NULL LIMIT 1',\r\n        [id],\r\n      );\r\n      // console.log(\"proovime id järgi leida kodutööd\");\r\n      if (homework[0][0] !== undefined) {\r\n        return homework[0];\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  createhomework: async (\r\n    description: string,\r\n    dueDate: string,\r\n    subjects_id: number,\r\n    extrasLink: string,\r\n  ): Promise<number | false | undefined> => {\r\n    try {\r\n      // console.log(\r\n      //   \"createHomework\",\r\n      //   description,\r\n      //   dueDate,\r\n      //   subjects_id,\r\n      //   extrasLink\r\n      // );\r\n      const [id]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'INSERT INTO homeworks (description, dueDate, subjects_id, extrasLink) VALUES (?, ?, ?, ?)',\r\n        [description, dueDate, subjects_id, extrasLink],\r\n      );\r\n      return id.insertId;\r\n    } catch (error) {\r\n      // console.log(error);\r\n      return false;\r\n    }\r\n  },\r\n  deletehomework: async (id: number): Promise<boolean | undefined> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE homeworks SET dateDeleted = ? WHERE id = ?',\r\n        [new Date(), id],\r\n      );\r\n      if (result.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  updatehomework: async (\r\n    id: number,\r\n    description: string,\r\n    dueDate: string,\r\n    subjects_id: number,\r\n    extrasLink: string,\r\n  ): Promise<boolean | undefined> => {\r\n    try {\r\n      const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(\r\n        'UPDATE homeworks SET description = ?, dueDate = ?, subjects_id = ? , extrasLink = ? WHERE id = ?',\r\n        [description, dueDate, subjects_id, extrasLink, id],\r\n      );\r\n      if (result.affectedRows > 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  getSubjectByCode: async (code: string): Promise<any> => {\r\n    try {\r\n      const [subject]: [RowDataPacket[][], FieldPacket[]] = await pool.query(\r\n        'SELECT id FROM subjects WHERE subjectCode = ? AND dateDeleted is NULL',\r\n        [code],\r\n      );\r\n      return subject[0];\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  },\r\n  gethomeworkBySubjectCode: async (\r\n    subCode: string | undefined,\r\n    actualDate: string,\r\n  ): Promise<Ihomework[] | false | undefined> => {\r\n    try {\r\n      // const homework: [Ihomework[], FieldPacket[]] = await pool.query(\r\n      //   `SELECT homeworks.id, homeworks.description,\r\n      // homeworks.dueDate, homeworks.extrasLink, homeworks.dateCreated, homeworks.dateUpdated,\r\n      //   homeworks.dateDeleted FROM scheduleDb.homeworks\r\n      //   WHERE subjects_id = (select id from subjects where subjectCode = ? )\r\n      //         AND homeworks.dueDate > (select scheduled.startTime from scheduleDb.scheduled\r\n      //          WHERE scheduled.subjects_id = (select id from subjects where subjectCode = ? )\r\n      //         AND scheduled.startTime < ? order by scheduled.startTime desc limit 1)\r\n      //         AND homeworks.dueDate <=      (select scheduled.startTime from scheduleDb.scheduled\r\n      //          WHERE scheduled.subjects_id = (select id from subjects where subjectCode = ? )\r\n      //         AND scheduled.startTime > ? order by scheduled.startTime LIMIT 1 ) `,\r\n      //   [subCode, subCode, actualDate, subCode, actualDate]\r\n      // );\r\n      const homework: [Ihomework[], FieldPacket[]] = await pool.query(\r\n        `SELECT homeworks.id, homeworks.description, homeworks.dueDate, homeworks.extrasLink, homeworks.dateCreated, homeworks.dateUpdated, \r\n        homeworks.dateDeleted FROM scheduleDb.homeworks \r\n        WHERE subjects_id = (select id from subjects where subjectCode = ? )\r\n              AND homeworks.dueDate > (select scheduled.startTime from scheduleDb.scheduled \r\n                                        WHERE scheduled.subjects_id = (select id from subjects where subjectCode = ? ) \r\n                                        AND scheduled.startTime < ? \r\n                                        AND homeworks.dateDeleted is NULL order by scheduled.startTime desc limit 1) `,\r\n        [subCode, subCode, actualDate, subCode, actualDate],\r\n      );\r\n      // console.log(actualDate, subCode);\r\n      if (homework[0][0] !== undefined) {\r\n        return homework[0];\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      // console.log(error);\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default homeworkService;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"13be07c08e7037f7821fa2cec2c7ebb4f4cd101d","contentHash":"5f7e00c3f1db27b6cd03e4c27ca75f0bfff2100d1e717fd73f00047be624dcc4"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\utils\\formatDate.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\utils\\formatDate.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":33,"column":1}},"2":{"start":{"line":12,"column":8},"end":{"line":15,"column":9}},"3":{"start":{"line":13,"column":36},"end":{"line":13,"column":56}},"4":{"start":{"line":14,"column":12},"end":{"line":14,"column":43}},"5":{"start":{"line":16,"column":8},"end":{"line":19,"column":9}},"6":{"start":{"line":17,"column":36},"end":{"line":17,"column":56}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":43}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":25}},"9":{"start":{"line":23,"column":29},"end":{"line":23,"column":31}},"10":{"start":{"line":24,"column":8},"end":{"line":30,"column":9}},"11":{"start":{"line":25,"column":12},"end":{"line":25,"column":57}},"12":{"start":{"line":26,"column":12},"end":{"line":26,"column":62}},"13":{"start":{"line":29,"column":12},"end":{"line":29,"column":61}},"14":{"start":{"line":31,"column":8},"end":{"line":31,"column":30}},"15":{"start":{"line":34,"column":0},"end":{"line":34,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":12},"end":{"line":4,"column":13}},"loc":{"start":{"line":4,"column":27},"end":{"line":21,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":22,"column":20},"end":{"line":22,"column":21}},"loc":{"start":{"line":22,"column":39},"end":{"line":32,"column":5}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":8},"end":{"line":15,"column":9}},"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":15,"column":9}},{"start":{"line":12,"column":8},"end":{"line":15,"column":9}}],"line":12},"1":{"loc":{"start":{"line":16,"column":8},"end":{"line":19,"column":9}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":19,"column":9}},{"start":{"line":16,"column":8},"end":{"line":19,"column":9}}],"line":16},"2":{"loc":{"start":{"line":24,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":30,"column":9}},{"start":{"line":24,"column":8},"end":{"line":30,"column":9}}],"line":24}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/utils/formatDate.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/utils/formatDate.ts"],"names":[],"mappings":";;AAAA,MAAM,UAAU,GAAG;IAEjB,MAAM,EAAE,CAAC,SAAgB,EAAE,EAAE;QAC3B,mBAAmB;QACnB,yBAAyB;QACzB,kCAAkC;QAClC,0CAA0C;QAC1C,cAAc;QACd,yCAAyC;QACzC,MAAM;QAEN,IAAI,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YAC3B,MAAM,eAAe,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC7C,SAAS,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;SAChC;QACD,IAAI,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YAC3B,MAAM,eAAe,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC7C,SAAS,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;SAChC;QACD,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,cAAc,EAAE,CAAC,aAAoB,EAAE,EAAE;QACvC,IAAI,cAAc,GAAG,EAAE,CAAC;QACxB,IAAI,aAAa,CAAC,MAAM,GAAG,EAAE,EAAE;YAC7B,cAAc,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAC7C,cAAc,GAAG,cAAc,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;SACnD;aAAM;YACL,cAAc,GAAG,aAAa,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;SAClD;QACD,OAAO,cAAc,CAAC;IACxB,CAAC;CAEF,CAAC;AAEF,kBAAe,UAAU,CAAC","sourcesContent":["const formatDate = {\r\n\r\n  forSql: (inputdate:string) => {\r\n    // let outTime =\"\";\r\n    // if (inTime.length>19){\r\n    // outTime = inTime.substr(0, 19);\r\n    //     outTime = outTime.replace(\"T\",\" \");\r\n    //   }  else {\r\n    //     outTime = inTime.replace(\"T\",\" \");\r\n    //   }\r\n\r\n    if (inputdate.includes('T')) {\r\n      const splitActualDate = inputdate.split('T');\r\n      inputdate = splitActualDate[0];\r\n    }\r\n    if (inputdate.includes(' ')) {\r\n      const splitActualDate = inputdate.split(' ');\r\n      inputdate = splitActualDate[0];\r\n    }\r\n    return inputdate;\r\n  },\r\n\r\n  forSqlDateTime: (inputDateTime:string) => {\r\n    let resultDateTime = '';\r\n    if (inputDateTime.length > 19) {\r\n      resultDateTime = inputDateTime.substr(0, 19);\r\n      resultDateTime = resultDateTime.replace('T', ' ');\r\n    } else {\r\n      resultDateTime = inputDateTime.replace('T', ' ');\r\n    }\r\n    return resultDateTime;\r\n  },\r\n\r\n};\r\n\r\nexport default formatDate;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"53183235da3afad0493f5d1ec687420d0d6bc6a0","contentHash":"b32688d653d86620ded4d68bd550a725e5962053f0e8770fd7864247352c4048"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\homework\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\homework\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":76}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":21},"end":{"line":17,"column":71}},"18":{"start":{"line":18,"column":27},"end":{"line":172,"column":1}},"19":{"start":{"line":19,"column":35},"end":{"line":29,"column":6}},"20":{"start":{"line":20,"column":26},"end":{"line":20,"column":67}},"21":{"start":{"line":21,"column":8},"end":{"line":25,"column":9}},"22":{"start":{"line":22,"column":12},"end":{"line":24,"column":15}},"23":{"start":{"line":26,"column":8},"end":{"line":28,"column":11}},"24":{"start":{"line":30,"column":35},"end":{"line":51,"column":6}},"25":{"start":{"line":31,"column":19},"end":{"line":31,"column":46}},"26":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"27":{"start":{"line":33,"column":12},"end":{"line":35,"column":15}},"28":{"start":{"line":37,"column":25},"end":{"line":37,"column":66}},"29":{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},"30":{"start":{"line":39,"column":12},"end":{"line":41,"column":15}},"31":{"start":{"line":43,"column":8},"end":{"line":47,"column":9}},"32":{"start":{"line":44,"column":12},"end":{"line":46,"column":15}},"33":{"start":{"line":48,"column":8},"end":{"line":50,"column":11}},"34":{"start":{"line":52,"column":37},"end":{"line":80,"column":6}},"35":{"start":{"line":53,"column":28},"end":{"line":53,"column":43}},"36":{"start":{"line":54,"column":29},"end":{"line":54,"column":39}},"37":{"start":{"line":55,"column":8},"end":{"line":60,"column":9}},"38":{"start":{"line":56,"column":12},"end":{"line":56,"column":38}},"39":{"start":{"line":59,"column":12},"end":{"line":59,"column":65}},"40":{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},"41":{"start":{"line":62,"column":12},"end":{"line":64,"column":15}},"42":{"start":{"line":66,"column":25},"end":{"line":66,"column":98}},"43":{"start":{"line":67,"column":8},"end":{"line":71,"column":9}},"44":{"start":{"line":68,"column":12},"end":{"line":70,"column":15}},"45":{"start":{"line":72,"column":8},"end":{"line":76,"column":9}},"46":{"start":{"line":73,"column":12},"end":{"line":75,"column":15}},"47":{"start":{"line":77,"column":8},"end":{"line":79,"column":11}},"48":{"start":{"line":81,"column":31},"end":{"line":114,"column":6}},"49":{"start":{"line":82,"column":58},"end":{"line":82,"column":66}},"50":{"start":{"line":83,"column":39},"end":{"line":83,"column":47}},"51":{"start":{"line":85,"column":8},"end":{"line":89,"column":9}},"52":{"start":{"line":86,"column":12},"end":{"line":88,"column":15}},"53":{"start":{"line":90,"column":8},"end":{"line":94,"column":9}},"54":{"start":{"line":91,"column":12},"end":{"line":93,"column":15}},"55":{"start":{"line":95,"column":8},"end":{"line":95,"column":63}},"56":{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},"57":{"start":{"line":97,"column":12},"end":{"line":99,"column":15}},"58":{"start":{"line":101,"column":8},"end":{"line":104,"column":9}},"59":{"start":{"line":102,"column":30},"end":{"line":102,"column":83}},"60":{"start":{"line":103,"column":12},"end":{"line":103,"column":39}},"61":{"start":{"line":105,"column":19},"end":{"line":105,"column":104}},"62":{"start":{"line":106,"column":8},"end":{"line":110,"column":9}},"63":{"start":{"line":107,"column":12},"end":{"line":109,"column":15}},"64":{"start":{"line":111,"column":8},"end":{"line":113,"column":11}},"65":{"start":{"line":115,"column":34},"end":{"line":134,"column":6}},"66":{"start":{"line":116,"column":19},"end":{"line":116,"column":46}},"67":{"start":{"line":117,"column":8},"end":{"line":121,"column":9}},"68":{"start":{"line":118,"column":12},"end":{"line":120,"column":15}},"69":{"start":{"line":122,"column":30},"end":{"line":122,"column":72}},"70":{"start":{"line":123,"column":8},"end":{"line":127,"column":9}},"71":{"start":{"line":124,"column":12},"end":{"line":126,"column":15}},"72":{"start":{"line":128,"column":8},"end":{"line":132,"column":9}},"73":{"start":{"line":129,"column":12},"end":{"line":131,"column":15}},"74":{"start":{"line":133,"column":8},"end":{"line":133,"column":68}},"75":{"start":{"line":135,"column":38},"end":{"line":171,"column":6}},"76":{"start":{"line":136,"column":19},"end":{"line":136,"column":46}},"77":{"start":{"line":137,"column":58},"end":{"line":137,"column":66}},"78":{"start":{"line":138,"column":39},"end":{"line":138,"column":47}},"79":{"start":{"line":139,"column":8},"end":{"line":143,"column":9}},"80":{"start":{"line":140,"column":12},"end":{"line":142,"column":15}},"81":{"start":{"line":144,"column":8},"end":{"line":148,"column":9}},"82":{"start":{"line":145,"column":12},"end":{"line":147,"column":15}},"83":{"start":{"line":149,"column":8},"end":{"line":149,"column":63}},"84":{"start":{"line":150,"column":8},"end":{"line":154,"column":9}},"85":{"start":{"line":151,"column":12},"end":{"line":153,"column":15}},"86":{"start":{"line":155,"column":8},"end":{"line":158,"column":9}},"87":{"start":{"line":156,"column":30},"end":{"line":156,"column":83}},"88":{"start":{"line":157,"column":12},"end":{"line":157,"column":39}},"89":{"start":{"line":159,"column":31},"end":{"line":159,"column":120}},"90":{"start":{"line":160,"column":8},"end":{"line":164,"column":9}},"91":{"start":{"line":161,"column":12},"end":{"line":163,"column":15}},"92":{"start":{"line":165,"column":8},"end":{"line":169,"column":9}},"93":{"start":{"line":166,"column":12},"end":{"line":168,"column":15}},"94":{"start":{"line":170,"column":8},"end":{"line":170,"column":68}},"95":{"start":{"line":173,"column":0},"end":{"line":173,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":21},"end":{"line":19,"column":22}},"loc":{"start":{"line":19,"column":35},"end":{"line":29,"column":6}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":69},"end":{"line":19,"column":70}},"loc":{"start":{"line":19,"column":82},"end":{"line":29,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":30,"column":21},"end":{"line":30,"column":22}},"loc":{"start":{"line":30,"column":35},"end":{"line":51,"column":6}},"line":30},"11":{"name":"(anonymous_11)","decl":{"start":{"line":30,"column":69},"end":{"line":30,"column":70}},"loc":{"start":{"line":30,"column":82},"end":{"line":51,"column":5}},"line":30},"12":{"name":"(anonymous_12)","decl":{"start":{"line":52,"column":23},"end":{"line":52,"column":24}},"loc":{"start":{"line":52,"column":37},"end":{"line":80,"column":6}},"line":52},"13":{"name":"(anonymous_13)","decl":{"start":{"line":52,"column":71},"end":{"line":52,"column":72}},"loc":{"start":{"line":52,"column":84},"end":{"line":80,"column":5}},"line":52},"14":{"name":"(anonymous_14)","decl":{"start":{"line":81,"column":17},"end":{"line":81,"column":18}},"loc":{"start":{"line":81,"column":31},"end":{"line":114,"column":6}},"line":81},"15":{"name":"(anonymous_15)","decl":{"start":{"line":81,"column":65},"end":{"line":81,"column":66}},"loc":{"start":{"line":81,"column":78},"end":{"line":114,"column":5}},"line":81},"16":{"name":"(anonymous_16)","decl":{"start":{"line":115,"column":20},"end":{"line":115,"column":21}},"loc":{"start":{"line":115,"column":34},"end":{"line":134,"column":6}},"line":115},"17":{"name":"(anonymous_17)","decl":{"start":{"line":115,"column":68},"end":{"line":115,"column":69}},"loc":{"start":{"line":115,"column":81},"end":{"line":134,"column":5}},"line":115},"18":{"name":"(anonymous_18)","decl":{"start":{"line":135,"column":24},"end":{"line":135,"column":25}},"loc":{"start":{"line":135,"column":38},"end":{"line":171,"column":6}},"line":135},"19":{"name":"(anonymous_19)","decl":{"start":{"line":135,"column":72},"end":{"line":135,"column":73}},"loc":{"start":{"line":135,"column":85},"end":{"line":171,"column":5}},"line":135}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":21,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":25,"column":9}},{"start":{"line":21,"column":8},"end":{"line":25,"column":9}}],"line":21},"9":{"loc":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},{"start":{"line":32,"column":8},"end":{"line":36,"column":9}}],"line":32},"10":{"loc":{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},{"start":{"line":38,"column":8},"end":{"line":42,"column":9}}],"line":38},"11":{"loc":{"start":{"line":43,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":47,"column":9}},{"start":{"line":43,"column":8},"end":{"line":47,"column":9}}],"line":43},"12":{"loc":{"start":{"line":55,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":60,"column":9}},{"start":{"line":55,"column":8},"end":{"line":60,"column":9}}],"line":55},"13":{"loc":{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},{"start":{"line":61,"column":8},"end":{"line":65,"column":9}}],"line":61},"14":{"loc":{"start":{"line":67,"column":8},"end":{"line":71,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":71,"column":9}},{"start":{"line":67,"column":8},"end":{"line":71,"column":9}}],"line":67},"15":{"loc":{"start":{"line":72,"column":8},"end":{"line":76,"column":9}},"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":76,"column":9}},{"start":{"line":72,"column":8},"end":{"line":76,"column":9}}],"line":72},"16":{"loc":{"start":{"line":85,"column":8},"end":{"line":89,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":89,"column":9}},{"start":{"line":85,"column":8},"end":{"line":89,"column":9}}],"line":85},"17":{"loc":{"start":{"line":90,"column":8},"end":{"line":94,"column":9}},"type":"if","locations":[{"start":{"line":90,"column":8},"end":{"line":94,"column":9}},{"start":{"line":90,"column":8},"end":{"line":94,"column":9}}],"line":90},"18":{"loc":{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},"type":"if","locations":[{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},{"start":{"line":96,"column":8},"end":{"line":100,"column":9}}],"line":96},"19":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":40}},"type":"binary-expr","locations":[{"start":{"line":96,"column":12},"end":{"line":96,"column":24}},{"start":{"line":96,"column":28},"end":{"line":96,"column":40}}],"line":96},"20":{"loc":{"start":{"line":101,"column":8},"end":{"line":104,"column":9}},"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":104,"column":9}},{"start":{"line":101,"column":8},"end":{"line":104,"column":9}}],"line":101},"21":{"loc":{"start":{"line":106,"column":8},"end":{"line":110,"column":9}},"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":110,"column":9}},{"start":{"line":106,"column":8},"end":{"line":110,"column":9}}],"line":106},"22":{"loc":{"start":{"line":117,"column":8},"end":{"line":121,"column":9}},"type":"if","locations":[{"start":{"line":117,"column":8},"end":{"line":121,"column":9}},{"start":{"line":117,"column":8},"end":{"line":121,"column":9}}],"line":117},"23":{"loc":{"start":{"line":123,"column":8},"end":{"line":127,"column":9}},"type":"if","locations":[{"start":{"line":123,"column":8},"end":{"line":127,"column":9}},{"start":{"line":123,"column":8},"end":{"line":127,"column":9}}],"line":123},"24":{"loc":{"start":{"line":128,"column":8},"end":{"line":132,"column":9}},"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":132,"column":9}},{"start":{"line":128,"column":8},"end":{"line":132,"column":9}}],"line":128},"25":{"loc":{"start":{"line":139,"column":8},"end":{"line":143,"column":9}},"type":"if","locations":[{"start":{"line":139,"column":8},"end":{"line":143,"column":9}},{"start":{"line":139,"column":8},"end":{"line":143,"column":9}}],"line":139},"26":{"loc":{"start":{"line":144,"column":8},"end":{"line":148,"column":9}},"type":"if","locations":[{"start":{"line":144,"column":8},"end":{"line":148,"column":9}},{"start":{"line":144,"column":8},"end":{"line":148,"column":9}}],"line":144},"27":{"loc":{"start":{"line":150,"column":8},"end":{"line":154,"column":9}},"type":"if","locations":[{"start":{"line":150,"column":8},"end":{"line":154,"column":9}},{"start":{"line":150,"column":8},"end":{"line":154,"column":9}}],"line":150},"28":{"loc":{"start":{"line":150,"column":12},"end":{"line":150,"column":68}},"type":"binary-expr","locations":[{"start":{"line":150,"column":12},"end":{"line":150,"column":24}},{"start":{"line":150,"column":28},"end":{"line":150,"column":36}},{"start":{"line":150,"column":40},"end":{"line":150,"column":52}},{"start":{"line":150,"column":56},"end":{"line":150,"column":68}}],"line":150},"29":{"loc":{"start":{"line":155,"column":8},"end":{"line":158,"column":9}},"type":"if","locations":[{"start":{"line":155,"column":8},"end":{"line":158,"column":9}},{"start":{"line":155,"column":8},"end":{"line":158,"column":9}}],"line":155},"30":{"loc":{"start":{"line":160,"column":8},"end":{"line":164,"column":9}},"type":"if","locations":[{"start":{"line":160,"column":8},"end":{"line":164,"column":9}},{"start":{"line":160,"column":8},"end":{"line":164,"column":9}}],"line":160},"31":{"loc":{"start":{"line":165,"column":8},"end":{"line":169,"column":9}},"type":"if","locations":[{"start":{"line":165,"column":8},"end":{"line":169,"column":9}},{"start":{"line":165,"column":8},"end":{"line":169,"column":9}}],"line":165}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0,0,0],"29":[0,0],"30":[0,0],"31":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/homework/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/homework/controller.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable camelcase */\r\n/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\nimport homeworkService from './service';\r\nimport formatDate from '../../utils/formatDate';\r\n\r\nconst homeworkController = {\r\n  getAllHomeworks: async (req: Request, res: Response) => {\r\n    const homeworks = await homeworkService.getAllhomeworks();\r\n    if (!homeworks) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      homeworks,\r\n    });\r\n  },\r\n\r\n  getHomeworkById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id or subjectCode provided',\r\n      });\r\n    }\r\n\r\n    const homework = await homeworkService.gethomeworkId(id);\r\n\r\n    if (homework === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No homework found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!homework) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      homework,\r\n    });\r\n  },\r\n\r\n  getHomeworkByCode: async (req: Request, res: Response) => {\r\n    const subjectCode: string = req.params.code;\r\n    let { actualDate } = req.params;\r\n    if (actualDate === undefined) {\r\n      actualDate = '3000-12-12'; // tähtaeg kuni selle kuupäevani juhul kui kuupäeva pole\r\n    } else {\r\n      actualDate = formatDate.forSql(actualDate);\r\n    }\r\n\r\n    if (!subjectCode) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No subjectCode provided',\r\n      });\r\n    }\r\n\r\n    const homework = await homeworkService.gethomeworkBySubjectCode(\r\n      subjectCode,\r\n      actualDate,\r\n    );\r\n\r\n    if (homework === undefined) {\r\n      return res.status(responseCodes.ok).json({\r\n        // error: `No homework found with id: ${subjectCode}`,\r\n      });\r\n    }\r\n    if (!homework) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.ok).json({\r\n      homework,\r\n    });\r\n  },\r\n\r\n  addHomework: async (req: Request, res: Response) => {\r\n    const {\r\n      description, subjectCode, extrasLink,\r\n    } = req.body;\r\n    let { dueDate, subjects_id } = req.body;\r\n    // console.log(description, dueDate, subjectCode, subjects_id, extrasLink);\r\n    if (!description) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'homework description is missing',\r\n      });\r\n    }\r\n\r\n    if (!dueDate) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'homework dueDate is missing',\r\n      });\r\n    }\r\n    dueDate = formatDate.forSqlDateTime(dueDate);\r\n\r\n    if (!subjectCode && !subjects_id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'homework subjectCode or subjects_id is missing',\r\n      });\r\n    }\r\n    if (!subjects_id) {\r\n      const subjectId = await homeworkService.getSubjectByCode(subjectCode);\r\n\r\n      subjects_id = subjectId.id;\r\n    }\r\n\r\n    const id = await homeworkService.createhomework(\r\n      description,\r\n      dueDate,\r\n      subjects_id,\r\n      extrasLink,\r\n    );\r\n    if (!id) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.created).json({\r\n      id,\r\n    });\r\n  },\r\n\r\n  deleteHomework: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    const subjectExists = await homeworkService.deletehomework(id);\r\n    if (subjectExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        message: `homework not found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!subjectExists) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.noContent).send();\r\n  },\r\n  updateHomeworkById: async (req: Request, res: Response) => {\r\n    const id: number = parseInt(req.params.id, 10);\r\n    const {\r\n      description, subjectCode, extrasLink,\r\n    } = req.body;\r\n    let { dueDate, subjects_id } = req.body;\r\n    if (!id) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'No valid id provided',\r\n      });\r\n    }\r\n    if (!dueDate) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'homework dueDate is missing',\r\n      });\r\n    }\r\n    dueDate = formatDate.forSqlDateTime(dueDate);\r\n\r\n    if (!description && !dueDate && !subjects_id && !subjectCode) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: 'Nothing to update',\r\n      });\r\n    }\r\n    if (!subjects_id) {\r\n      const subjectId = await homeworkService.getSubjectByCode(subjectCode);\r\n      subjects_id = subjectId.id;\r\n    }\r\n\r\n    const homeworkExists = await homeworkService.updatehomework(\r\n      id,\r\n      description,\r\n      dueDate,\r\n      subjects_id,\r\n      extrasLink,\r\n    );\r\n\r\n    if (homeworkExists === undefined) {\r\n      return res.status(responseCodes.badRequest).json({\r\n        error: `No homework found with id: ${id}`,\r\n      });\r\n    }\r\n    if (!homeworkExists) {\r\n      return res.status(responseCodes.ServerError).json({\r\n        error: 'Server error',\r\n      });\r\n    }\r\n    return res.status(responseCodes.noContent).send();\r\n  },\r\n};\r\n\r\nexport default homeworkController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"243821e0b43489bd0ec8ca44dc58cdc9950c6443","contentHash":"3ee04603d27bd1125597c5107806edf90861dcf608c755a56a3e3fdeb3f7a097"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\middleware\\checkLetterMiddleware.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\middleware\\checkLetterMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":24},"end":{"line":6,"column":68}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":65}},"5":{"start":{"line":8,"column":22},"end":{"line":24,"column":1}},"6":{"start":{"line":9,"column":36},"end":{"line":9,"column":44}},"7":{"start":{"line":10,"column":20},"end":{"line":10,"column":24}},"8":{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},"9":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"10":{"start":{"line":13,"column":8},"end":{"line":13,"column":58}},"11":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":56}},"13":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"14":{"start":{"line":19,"column":8},"end":{"line":19,"column":22}},"15":{"start":{"line":21,"column":4},"end":{"line":23,"column":7}},"16":{"start":{"line":25,"column":0},"end":{"line":25,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":22},"end":{"line":8,"column":23}},"loc":{"start":{"line":8,"column":42},"end":{"line":24,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},{"start":{"line":12,"column":4},"end":{"line":14,"column":5}}],"line":12},"4":{"loc":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},{"start":{"line":15,"column":4},"end":{"line":17,"column":5}}],"line":15},"5":{"loc":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},{"start":{"line":18,"column":4},"end":{"line":20,"column":5}}],"line":18},"6":{"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":29}},"type":"binary-expr","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":17}},{"start":{"line":18,"column":21},"end":{"line":18,"column":29}}],"line":18}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1},"f":{"0":2,"1":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/middleware/checkLetterMiddleware.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/middleware/checkLetterMiddleware.ts"],"names":[],"mappings":";;;;;AAGA,qEAA6C;AAC7C,kEAAgD;AAEhD,MAAM,aAAa,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACxE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;IACzC,IAAI,SAAS,GAAG,IAAI,CAAC;IACrB,IAAI,QAAQ,GAAG,IAAI,CAAC;IACpB,IAAI,SAAS,EAAE;QACb,SAAS,GAAG,iBAAa,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;KAC/C;IACD,IAAI,QAAQ,EAAE;QACZ,QAAQ,GAAG,iBAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;KAC7C;IACD,IAAI,SAAS,IAAI,QAAQ,EAAE;QACzB,OAAO,IAAI,EAAE,CAAC;KACf;IACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;QAC/C,KAAK,EAAE,iCAAiC;KACzC,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport responseCodes from '../responseCodes';\r\nimport validateField from '../services/service';\r\n\r\nconst checkAlphabet = (req: Request, res: Response, next: NextFunction) => {\r\n  const { firstName, lastName } = req.body;\r\n  let testFirst = true;\r\n  let testLast = true;\r\n  if (firstName) {\r\n    testFirst = validateField.testName(firstName);\r\n  }\r\n  if (lastName) {\r\n    testLast = validateField.testName(lastName);\r\n  }\r\n  if (testFirst && testLast) {\r\n    return next();\r\n  }\r\n  return res.status(responseCodes.badRequest).json({\r\n    error: 'Insert only letters, space or -',\r\n  });\r\n};\r\n\r\nexport default checkAlphabet;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f22b1ae6e16e6d40971685c85f8d97739fcab06c","contentHash":"47d07edafcdc622a41fba83ef342bf550c611d0ccb7199817526ea5c6866bf42"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\services\\service.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\services\\service.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":18,"column":1}},"2":{"start":{"line":5,"column":23},"end":{"line":5,"column":61}},"3":{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},"4":{"start":{"line":7,"column":12},"end":{"line":7,"column":24}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":21}},"6":{"start":{"line":12,"column":23},"end":{"line":12,"column":54}},"7":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"8":{"start":{"line":14,"column":12},"end":{"line":14,"column":24}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":21}},"10":{"start":{"line":19,"column":0},"end":{"line":19,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},"loc":{"start":{"line":4,"column":26},"end":{"line":10,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":14},"end":{"line":11,"column":15}},"loc":{"start":{"line":11,"column":24},"end":{"line":17,"column":5}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},"type":"if","locations":[{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},{"start":{"line":6,"column":8},"end":{"line":8,"column":9}}],"line":6},"1":{"loc":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},{"start":{"line":13,"column":8},"end":{"line":15,"column":9}}],"line":13},"2":{"loc":{"start":{"line":13,"column":13},"end":{"line":13,"column":74}},"type":"cond-expr","locations":[{"start":{"line":13,"column":52},"end":{"line":13,"column":58}},{"start":{"line":13,"column":61},"end":{"line":13,"column":74}}],"line":13},"3":{"loc":{"start":{"line":13,"column":13},"end":{"line":13,"column":49}},"type":"binary-expr","locations":[{"start":{"line":13,"column":13},"end":{"line":13,"column":28}},{"start":{"line":13,"column":32},"end":{"line":13,"column":49}}],"line":13}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/services/service.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/services/service.ts"],"names":[],"mappings":";;AAAA,MAAM,aAAa,GAAG;IACpB,UAAU,EAAE,CAAC,IAAY,EAAO,EAAE;QAChC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;QACtD,IAAI,MAAO,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE;YAClC,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IACD,QAAQ,EAAE,CAAC,IAAY,EAAE,EAAE;QACzB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;QAC/C,IAAI,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,MAAK,IAAI,CAAC,MAAM,EAAE;YAClC,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;IACf,CAAC;CACF,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["const validateField = {\r\n  testFields: (name: string): any => {\r\n    const result = name.match(/[0-9A-Za-zÄÖÜäöü -.,!?]/g);\r\n    if (result!.length === name.length) {\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n  testName: (name: string) => {\r\n    const result = name.match(/[A-Za-zÄÖÜäöü -]/g);\r\n    if (result?.length === name.length) {\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n};\r\n\r\nexport default validateField;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"32ab5c213ff2a524fd1cc8c42d610c415624a9b9","contentHash":"ee70455f8d7b6f8d7830e38fdb6ad7a7d5404d3a07285647a301ada1e6e35005"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\ping\\controller.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\ping\\controller.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":24},"end":{"line":6,"column":76}},"4":{"start":{"line":7,"column":13},"end":{"line":11,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":10,"column":7}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":13},"end":{"line":7,"column":14}},"loc":{"start":{"line":7,"column":27},"end":{"line":11,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/ping/controller.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/ping/controller.ts"],"names":[],"mappings":";;;;;AAGA,6EAAqD;AAErD,MAAM,IAAI,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;IAC3C,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;QAChC,OAAO,EAAE,OAAO;KACjB,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,kBAAe,IAAI,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\n\r\nconst ping = (req: Request, res: Response) => {\r\n  res.status(responseCodes.ok).json({\r\n    message: 'Alive',\r\n  });\r\n};\r\n\r\nexport default ping;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"64ca27352ee0abe6b86fcc55fb617672b45a8dfc","contentHash":"263f99c4932a6ea5ae90ee942a14ad373371064e0c93a08552497283f4897596"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\logger.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\logger.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":83}},"16":{"start":{"line":18,"column":18},"end":{"line":18,"column":53}},"17":{"start":{"line":19,"column":19},"end":{"line":19,"column":57}},"18":{"start":{"line":21,"column":0},"end":{"line":34,"column":3}},"19":{"start":{"line":44,"column":4},"end":{"line":48,"column":7}},"20":{"start":{"line":45,"column":27},"end":{"line":45,"column":59}},"21":{"start":{"line":46,"column":8},"end":{"line":46,"column":101}},"22":{"start":{"line":47,"column":8},"end":{"line":47,"column":29}},"23":{"start":{"line":50,"column":0},"end":{"line":50,"column":38}},"24":{"start":{"line":52,"column":4},"end":{"line":65,"column":7}},"25":{"start":{"line":53,"column":27},"end":{"line":53,"column":67}},"26":{"start":{"line":55,"column":8},"end":{"line":58,"column":11}},"27":{"start":{"line":56,"column":12},"end":{"line":56,"column":61}},"28":{"start":{"line":57,"column":12},"end":{"line":57,"column":63}},"29":{"start":{"line":60,"column":8},"end":{"line":63,"column":11}},"30":{"start":{"line":61,"column":12},"end":{"line":61,"column":66}},"31":{"start":{"line":62,"column":12},"end":{"line":62,"column":68}},"32":{"start":{"line":64,"column":8},"end":{"line":64,"column":26}},"33":{"start":{"line":67,"column":0},"end":{"line":67,"column":60}},"34":{"start":{"line":68,"column":0},"end":{"line":68,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"logToDatabase","decl":{"start":{"line":43,"column":9},"end":{"line":43,"column":22}},"loc":{"start":{"line":43,"column":39},"end":{"line":49,"column":1}},"line":43},"9":{"name":"(anonymous_9)","decl":{"start":{"line":44,"column":43},"end":{"line":44,"column":44}},"loc":{"start":{"line":44,"column":56},"end":{"line":48,"column":5}},"line":44},"10":{"name":"createDatabaseConnection","decl":{"start":{"line":51,"column":9},"end":{"line":51,"column":33}},"loc":{"start":{"line":51,"column":36},"end":{"line":66,"column":1}},"line":51},"11":{"name":"(anonymous_11)","decl":{"start":{"line":52,"column":43},"end":{"line":52,"column":44}},"loc":{"start":{"line":52,"column":56},"end":{"line":65,"column":5}},"line":52},"12":{"name":"(anonymous_12)","decl":{"start":{"line":55,"column":33},"end":{"line":55,"column":34}},"loc":{"start":{"line":55,"column":44},"end":{"line":58,"column":9}},"line":55},"13":{"name":"(anonymous_13)","decl":{"start":{"line":60,"column":31},"end":{"line":60,"column":32}},"loc":{"start":{"line":60,"column":42},"end":{"line":63,"column":9}},"line":60}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,1],"7":[2,2]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/logger.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/logger.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,yCAAyC;AACzC,sCAAsC;AACtC,sDAA8B;AAE9B,0DAA8B;AAE9B,0BAA0B;AAEb,QAAA,MAAM,GAAG,iBAAO,CAAC,YAAY,CAAC;IACzC,KAAK,EAAE,MAAM;IACb,MAAM,EAAE,iBAAO,CAAC,MAAM,CAAC,IAAI,EAAE;IAC7B,WAAW,EAAE,EAAE,OAAO,EAAE,cAAc,EAAE;IACxC,UAAU,EAAE;QACZ,EAAE;QACF,2EAA2E;QAC3E,6EAA6E;QAC7E,EAAE;QACA,IAAI,iBAAO,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC;QACtE,IAAI,iBAAO,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,cAAc,EAAE,CAAC;QACzD,IAAI,iBAAO,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,iBAAO,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC;KACpE;CACF,CAAC,CAAC;AAEH,+CAA+C;AAC/C,kBAAkB;AAClB,2DAA2D;AAC3D,+DAA+D;AAC/D,4EAA4E;AAC5E,OAAO;AACP,oCAAoC;AACpC,MAAM;AAEN,SAAsB,aAAa,CAAC,KAAa,EAAE,OAAe;;QAChE,MAAM,UAAU,GAAG,MAAM,wBAAwB,EAAE,CAAC;QAEpD,MAAM,UAAU,CAAC,OAAO,CAAC,gDAAgD,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;QAE7F,UAAU,CAAC,OAAO,EAAE,CAAC;IACvB,CAAC;CAAA;AAND,sCAMC;AAED,SAAsB,wBAAwB;;QAC5C,MAAM,UAAU,GAAG,MAAM,kBAAI,CAAC,aAAa,EAAE,CAAC;QAE9C,kBAAkB;QAClB,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,KAAa,EAAE,EAAE;YACzC,cAAM,CAAC,IAAI,CAAC,oBAAoB,KAAK,EAAE,CAAC,CAAC;YACzC,aAAa,CAAC,MAAM,EAAE,oBAAoB,KAAK,EAAE,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;QAEH,gBAAgB;QAChB,UAAU,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,KAAY,EAAE,EAAE;YACtC,cAAM,CAAC,KAAK,CAAC,gBAAgB,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YAC9C,aAAa,CAAC,OAAO,EAAE,gBAAgB,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC1D,CAAC,CAAC,CAAC;QAEH,OAAO,UAAU,CAAC;IACpB,CAAC;CAAA;AAhBD,4DAgBC;AAED,kBAAe,cAAM,CAAC","sourcesContent":["/* eslint-disable import/no-unresolved */\r\n/* eslint-disable import/extensions */\r\nimport winston from 'winston';\r\nimport { PoolConnection } from 'mysql2/promise';\r\nimport pool from './database';\r\n\r\n// Loome Winston'i loggeri\r\n\r\nexport const logger = winston.createLogger({\r\n  level: 'info',\r\n  format: winston.format.json(),\r\n  defaultMeta: { service: 'user-service' },\r\n  transports: [\r\n  //\r\n  // - Write all logs with importance level of `error` or less to `error.log`\r\n  // - Write all logs with importance level of `info` or less to `combined.log`\r\n  //\r\n    new winston.transports.File({ filename: 'error.log', level: 'error' }),\r\n    new winston.transports.File({ filename: 'combined.log' }),\r\n    new winston.transports.Console({ format: winston.format.simple() }),\r\n  ],\r\n});\r\n\r\n// export const logger = winston.createLogger({\r\n//   transports: [\r\n//     new winston.transports.Console(), // Logime konsooli\r\n//     new winston.transports.File({ filename: 'queries.log' })\r\n//     new winston.transports.File({ filename: 'errors.log'})// Logime faili\r\n//   ],\r\n//   format: winston.format.simple()\r\n// });\r\n\r\nexport async function logToDatabase(level: string, message: string): Promise<void> {\r\n  const connection = await createDatabaseConnection();\r\n\r\n  await connection.execute('INSERT INTO log (level, message) VALUES (?, ?)', [level, message]);\r\n\r\n  connection.release();\r\n}\r\n\r\nexport async function createDatabaseConnection(): Promise<PoolConnection> {\r\n  const connection = await pool.getConnection();\r\n\r\n  // Logime päringud\r\n  connection.on('enqueue', (query: string) => {\r\n    logger.info(`Executing query: ${query}`);\r\n    logToDatabase('info', `Executing query: ${query}`);\r\n  });\r\n\r\n  // Käitleme vead\r\n  connection.on('error', (error: Error) => {\r\n    logger.error(`MySQL Error: ${error.message}`);\r\n    logToDatabase('error', `MySQL Error: ${error.message}`);\r\n  });\r\n\r\n  return connection;\r\n}\r\n\r\nexport default logger;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8b601e5bf0ae74e94662ce7828344b29e8ffa295","contentHash":"680bab213d75b044e1f2978d8894619630792aa5e4a297969e0389c2d1f5c05a"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\auth\\isAdminMiddleware.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\auth\\isAdminMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":76}},"16":{"start":{"line":16,"column":16},"end":{"line":24,"column":2}},"17":{"start":{"line":16,"column":36},"end":{"line":24,"column":2}},"18":{"start":{"line":17,"column":21},"end":{"line":17,"column":31}},"19":{"start":{"line":18,"column":4},"end":{"line":22,"column":5}},"20":{"start":{"line":19,"column":8},"end":{"line":21,"column":11}},"21":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"22":{"start":{"line":25,"column":0},"end":{"line":25,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":16},"end":{"line":16,"column":17}},"loc":{"start":{"line":16,"column":36},"end":{"line":24,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":70},"end":{"line":16,"column":71}},"loc":{"start":{"line":16,"column":83},"end":{"line":24,"column":1}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":18,"column":4},"end":{"line":22,"column":5}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":22,"column":5}},{"start":{"line":18,"column":4},"end":{"line":22,"column":5}}],"line":18}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/auth/isAdminMiddleware.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/auth/isAdminMiddleware.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA,6EAAqD;AAErD,MAAM,OAAO,GAAG,CAAO,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACxE,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;IAC5B,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;QACzB,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;YAClD,KAAK,EAAE,yCAAyC;SACjD,CAAC,CAAC;KACJ;IACD,OAAO,IAAI,EAAE,CAAC;AAChB,CAAC,CAAA,CAAC;AAEF,kBAAe,OAAO,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport responseCodes from '../general/responseCodes';\r\n\r\nconst isAdmin = async (req: Request, res: Response, next: NextFunction) => {\r\n  const { user } = res.locals;\r\n  if (user.role !== 'Admin') {\r\n    return res.status(responseCodes.notAuthorized).json({\r\n      error: 'You have to be admin for this operation',\r\n    });\r\n  }\r\n  return next();\r\n};\r\n\r\nexport default isAdmin;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"be27c03bc7e0d3567521ac8586d28249bce1b55a","contentHash":"0c6f81c741eb0359cd34b802c4d6940ec019805c3f50e51ef6012684e7a36bd1"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\auth\\isLoggedInMiddleware.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\auth\\isLoggedInMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":21},"end":{"line":6,"column":79}},"4":{"start":{"line":7,"column":24},"end":{"line":7,"column":76}},"5":{"start":{"line":8,"column":19},"end":{"line":24,"column":1}},"6":{"start":{"line":9,"column":23},"end":{"line":9,"column":48}},"7":{"start":{"line":10,"column":18},"end":{"line":10,"column":98}},"8":{"start":{"line":11,"column":4},"end":{"line":15,"column":5}},"9":{"start":{"line":12,"column":8},"end":{"line":14,"column":11}},"10":{"start":{"line":16,"column":20},"end":{"line":16,"column":54}},"11":{"start":{"line":17,"column":4},"end":{"line":21,"column":5}},"12":{"start":{"line":18,"column":8},"end":{"line":20,"column":11}},"13":{"start":{"line":22,"column":4},"end":{"line":22,"column":30}},"14":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"15":{"start":{"line":25,"column":0},"end":{"line":25,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":19},"end":{"line":8,"column":20}},"loc":{"start":{"line":8,"column":39},"end":{"line":24,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":18},"end":{"line":10,"column":98}},"type":"cond-expr","locations":[{"start":{"line":10,"column":65},"end":{"line":10,"column":71}},{"start":{"line":10,"column":74},"end":{"line":10,"column":98}}],"line":10},"4":{"loc":{"start":{"line":10,"column":18},"end":{"line":10,"column":62}},"type":"binary-expr","locations":[{"start":{"line":10,"column":18},"end":{"line":10,"column":37}},{"start":{"line":10,"column":41},"end":{"line":10,"column":62}}],"line":10},"5":{"loc":{"start":{"line":11,"column":4},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":15,"column":5}},{"start":{"line":11,"column":4},"end":{"line":15,"column":5}}],"line":11},"6":{"loc":{"start":{"line":17,"column":4},"end":{"line":21,"column":5}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":21,"column":5}},{"start":{"line":17,"column":4},"end":{"line":21,"column":5}}],"line":17}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"f":{"0":2,"1":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/auth/isLoggedInMiddleware.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/auth/isLoggedInMiddleware.ts"],"names":[],"mappings":";;;;;AAGA,gFAAwD;AACxD,6EAAqD;AAErD,MAAM,UAAU,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACrE,MAAM,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;IAC7C,MAAM,KAAK,GAAG,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;IACxC,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;YAClD,KAAK,EAAE,mBAAmB;SAC3B,CAAC,CAAC;KACJ;IACD,MAAM,OAAO,GAAG,oBAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACzC,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;YAClD,KAAK,EAAE,eAAe;SACvB,CAAC,CAAC;KACJ;IACD,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC;IAC1B,OAAO,IAAI,EAAE,CAAC;AAChB,CAAC,CAAC;AAEF,kBAAe,UAAU,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport jwtService from '../general/services/jwtService';\r\nimport responseCodes from '../general/responseCodes';\r\n\r\nconst isLoggedIn = (req: Request, res: Response, next: NextFunction) => {\r\n  const authHeader = req.headers.authorization;\r\n  const token = authHeader?.split(' ')[1];\r\n  if (!token) {\r\n    return res.status(responseCodes.notAuthorized).json({\r\n      error: 'No token provided',\r\n    });\r\n  }\r\n  const payload = jwtService.verify(token);\r\n  if (!payload) {\r\n    return res.status(responseCodes.notAuthorized).json({\r\n      error: 'Invalid token',\r\n    });\r\n  }\r\n  res.locals.user = payload;\r\n  return next();\r\n};\r\n\r\nexport default isLoggedIn;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d4567ea76e83df72c5e0af154688811a4c486ba5","contentHash":"3f006351a8bd84f92edf84d8fd6ae3fb14184bdee23082ccce6a664fcc8d62e5"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\course\\interface.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\course\\interface.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/course/interface.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/course/interface.ts"],"names":[],"mappings":"","sourcesContent":["import { RowDataPacket } from 'mysql2';\r\n\r\ninterface ICourse extends RowDataPacket {\r\n  id: number;\r\n  courseCode: string;\r\n  courseName: string;\r\n  dateCreated: Date;\r\n  dateUpdated: Date;\r\n  dateDeleted: Date | null;\r\n}\r\n\r\nexport default ICourse;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"82dd3a2ea54fa2e94243fd77cfa4a81f35327b4e","contentHash":"682765d821f39770ba77a02a26d178cb61c26feabce99f97d2471e7e84942114"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\middleware\\checkLetterAndNumberMiddleware.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\general\\middleware\\checkLetterAndNumberMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":24},"end":{"line":6,"column":68}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":65}},"5":{"start":{"line":8,"column":31},"end":{"line":23,"column":1}},"6":{"start":{"line":9,"column":35},"end":{"line":9,"column":43}},"7":{"start":{"line":10,"column":24},"end":{"line":10,"column":28}},"8":{"start":{"line":11,"column":22},"end":{"line":11,"column":26}},"9":{"start":{"line":15,"column":4},"end":{"line":15,"column":60}},"10":{"start":{"line":16,"column":4},"end":{"line":16,"column":56}},"11":{"start":{"line":17,"column":4},"end":{"line":19,"column":5}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":22}},"13":{"start":{"line":20,"column":4},"end":{"line":22,"column":7}},"14":{"start":{"line":24,"column":0},"end":{"line":24,"column":41}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":31},"end":{"line":8,"column":32}},"loc":{"start":{"line":8,"column":51},"end":{"line":23,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":17,"column":4},"end":{"line":19,"column":5}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":19,"column":5}},{"start":{"line":17,"column":4},"end":{"line":19,"column":5}}],"line":17},"4":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":36}},"type":"binary-expr","locations":[{"start":{"line":17,"column":8},"end":{"line":17,"column":21}},{"start":{"line":17,"column":25},"end":{"line":17,"column":36}}],"line":17}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1},"f":{"0":2,"1":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/middleware/checkLetterAndNumberMiddleware.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/general/middleware/checkLetterAndNumberMiddleware.ts"],"names":[],"mappings":";;;;;AAGA,qEAA6C;AAC7C,kEAAgD;AAEhD,MAAM,sBAAsB,GAAG,CAC7B,GAAY,EACZ,GAAa,EACb,IAAkB,EAClB,EAAE;IACF,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;IACxC,IAAI,aAAa,GAAG,IAAI,CAAC;IACzB,IAAI,WAAW,GAAG,IAAI,CAAC;IAEvB,+DAA+D;IAC/D,4EAA4E;IAC5E,sEAAsE;IAEtE,aAAa,GAAG,iBAAa,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;IACpD,WAAW,GAAG,iBAAa,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;IAEhD,IAAI,aAAa,IAAI,WAAW,EAAE;QAChC,OAAO,IAAI,EAAE,CAAC;KACf;IACD,OAAO,GAAG,CAAC,MAAM,CAAC,uBAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;QAC/C,KAAK,EAAE,sCAAsC;KAC9C,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,kBAAe,sBAAsB,CAAC","sourcesContent":["/* eslint-disable import/extensions */\r\n/* eslint-disable import/no-unresolved */\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport responseCodes from '../responseCodes';\r\nimport validateField from '../services/service';\r\n\r\nconst checkAlphabetAndNumber = (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction,\r\n) => {\r\n  const { scheduled, subject } = req.body;\r\n  let testScheduled = true;\r\n  let testSubject = true;\r\n\r\n  // Järgnevad kaks rida välja kommenteeritud ja ümber kirjutatud\r\n  // scheduled ? (testScheduled = validateField.testFields(scheduled)) : true;\r\n  // subject ? (testSubject = validateField.testFields(subject)) : true;\r\n\r\n  testScheduled = validateField.testFields(scheduled);\r\n  testSubject = validateField.testFields(subject);\r\n\r\n  if (testScheduled && testSubject) {\r\n    return next();\r\n  }\r\n  return res.status(responseCodes.badRequest).json({\r\n    error: 'Insert only letters, numbers or -.,!',\r\n  });\r\n};\r\n\r\nexport default checkAlphabetAndNumber;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7ef0dbe9d2294ed8ffc586c7b927c5086e135557","contentHash":"9b0bd487d03c1218ac9fbd4009ca8edd334ff96cd3b7a9bf62408763f984a376"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\homework\\interface.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\homework\\interface.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/homework/interface.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/homework/interface.ts"],"names":[],"mappings":"","sourcesContent":["import { RowDataPacket } from 'mysql2';\r\n\r\ninterface Ihomework extends RowDataPacket {\r\n  id: number;\r\n  description?: string;\r\n  dueDate?: Date | null;\r\n  extrasLink?:string | null;\r\n  subjectCode?: number | null;\r\n  subjects_Id?: number | null;\r\n  dateCreated?: Date;\r\n  dateUpdated?: Date;\r\n  dateDeleted?: Date | null;\r\n}\r\n\r\nexport default Ihomework;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a9b85c5123048373c5d6312915c9a03608111a8b","contentHash":"394fd9bfeaa7ecc592788c91052544e4543e1a121daae692c02c0005cd272264"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\lector\\interfaces.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\lector\\interfaces.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/lector/interfaces.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/lector/interfaces.ts"],"names":[],"mappings":"","sourcesContent":["import { RowDataPacket } from 'mysql2';\r\n\r\ninterface ILector extends RowDataPacket {\r\n  id: number;\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  dateCreated: Date;\r\n  dateUpdated: Date;\r\n  dateDeleted: Date | null;\r\n}\r\ninterface INewLector {\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n}\r\ninterface ILecturerSubjects extends RowDataPacket {\r\n  fullName: string;\r\n  activeSubjects: number;\r\n}\r\n\r\nexport { ILector, INewLector, ILecturerSubjects };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0163a4e901e775a06e12b95002f882360bea7c56","contentHash":"82607cb40c93ff3a749a48ca8caf13fcf60b8816d2cfe96ee54de52bf2fe92d2"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\room\\interface.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\room\\interface.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/room/interface.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/room/interface.ts"],"names":[],"mappings":"","sourcesContent":["import { RowDataPacket } from 'mysql2';\r\n\r\ninterface IRoom extends RowDataPacket {\r\n  id: number;\r\n  room: string;\r\n  dateCreated: Date;\r\n  dateUpdated: Date;\r\n  dateDeleted: Date | null;\r\n}\r\n\r\nexport default IRoom;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"06435801aa538ea8eac602b9668d933dfa3f4acd","contentHash":"fc52ba78b09ae0b565b98c074860b4bb879dcb81aaccb103dd7e71851b40c9bb"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\schedule\\interface.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\schedule\\interface.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/schedule/interface.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/schedule/interface.ts"],"names":[],"mappings":"","sourcesContent":["import { RowDataPacket } from 'mysql2';\r\n\r\ninterface Iroom {\r\n roomId?:number;\r\n  room?:string ;\r\n\r\n}\r\ninterface Icourse {\r\n  courseId?:number;\r\n  courseCode?:string;\r\n  courseName?:string;\r\n}\r\ninterface Ilecturer {\r\n  lecturerId?:number\r\n  firstName?:string\r\n  lastName?:string\r\n}\r\ninterface ISchedule extends RowDataPacket {\r\n  id: number;\r\n  startTime: Date;\r\n  endTime: Date;\r\n  rooms: Iroom[] | null;\r\n  comment: string;\r\n  courses: Icourse[] | null;\r\n  subject: {};\r\n  subjectId?: number;\r\n  subjectCode?: string;\r\n  lecturers: Ilecturer[] | null;\r\n  atDate?:Date;\r\n  toDate?:Date;\r\n}\r\n\r\ninterface IhomeW {\r\n  id?: number;\r\n  description?: string;\r\n  dueDate?: Date | null;\r\n  extrasLink?: string | null;\r\n  subjectCode?: number | null;\r\n  subjects_Id?: number | null;\r\n  dateCreated?: Date;\r\n  dateUpdated?: Date;\r\n  dateDeleted?: Date | null;\r\n\r\n}\r\ninterface Isubject {\r\n  id?: number;\r\n  subjectCode?: string ;\r\n  subject?: string;\r\n\r\n }\r\nexport {\r\n  ISchedule, Iroom, Icourse, Ilecturer, IhomeW, Isubject,\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c21ac2074da3df7f0b44c5c61fa455d9a5fde57e","contentHash":"a6d608c9d736faa8a17b8920c2426a4ad3d1d2353f5944fa25bb7f1fbdf0e6cd"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\subjects\\interfaces.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\subjects\\interfaces.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/subjects/interfaces.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/subjects/interfaces.ts"],"names":[],"mappings":"","sourcesContent":["import { RowDataPacket } from 'mysql2';\r\n\r\n// interface ISubject extends RowDataPacket {\r\n//   id: number;\r\n//   lecturers_id: number;\r\n//   coursesid: number;\r\n//   subject: string;\r\n//   scheduled: string;\r\n//   dateCreated: Date;\r\n//   dateUpdated: Date;\r\n//   dateDeleted: Date | null;\r\n// }\r\n\r\n// interface INewSubject {\r\n//   lecturers_id: number;\r\n//   courses_id: number;\r\n//   subject: string;\r\n//   scheduled: string;\r\n// }\r\n\r\ninterface ISubject extends RowDataPacket {\r\n  id: number;\r\n  subject: string;\r\n  subjectCode: string;\r\n  creditPoint: number;\r\n  dateCreated: Date;\r\n  dateUpdated: Date;\r\n  dateDeleted: Date | null;\r\n}\r\n\r\ninterface INewSubject {\r\n  subject: string;\r\n  subjectCode: string;\r\n  creditPoint: number;\r\n}\r\n\r\nexport { ISubject, INewSubject };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b33bb44c94171850d960e92ed92ddfba53ddb479","contentHash":"455c6a002acdbfcb72d18f65e7dc6554fbbe0e3141f4406b8c0f1a5baf561283"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\users\\interfaces.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\components\\users\\interfaces.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/users/interfaces.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/components/users/interfaces.ts"],"names":[],"mappings":"","sourcesContent":["import { RowDataPacket } from 'mysql2';\r\n\r\ninterface INewUser {\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  role: 'Admin' | 'User';\r\n}\r\n\r\ninterface IUser extends INewUser, RowDataPacket {\r\n  id: number;\r\n  dateCreated: Date;\r\n  dateUpdated: Date;\r\n  dateDeleted: Date | null;\r\n}\r\n\r\ninterface IUpdateUser {\r\n  id: number;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  email?: string;\r\n  role?: 'admin' | 'user'| 'lecturer'| 'student';\r\n}\r\n\r\nexport { IUser, IUpdateUser, INewUser };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"aa79bb06077c4a79549ec9c17a23c0d153e41d76","contentHash":"d161a0c33afbb7808a3146dee8b5147d8472b320d0b4319ecfbdfeefd036d070"},"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\index.ts":{"path":"C:\\Users\\Andrus\\Desktop\\Kool\\Valikpraktika\\hk-tunniplaan\\development\\api\\src\\index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":8,"column":14},"end":{"line":8,"column":47}},"4":{"start":{"line":9,"column":13},"end":{"line":9,"column":17}},"5":{"start":{"line":11,"column":0},"end":{"line":14,"column":3}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":27},"end":{"line":11,"column":28}},"loc":{"start":{"line":11,"column":33},"end":{"line":14,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/index.ts","sources":["C:/Users/Andrus/Desktop/Kool/Valikpraktika/hk-tunniplaan/development/api/src/index.ts"],"names":[],"mappings":";;;;;AAAA,yCAAyC;AACzC,sCAAsC;AACtC,gDAAwB;AAExB,MAAM,IAAI,GAAG,IAAI,CAAC;AAClB,YAAY;AACZ,aAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE;IACpB,sCAAsC;IACtC,OAAO,CAAC,GAAG,CAAC,0BAA0B,IAAI,EAAE,CAAC,CAAC;AAChD,CAAC,CAAC,CAAC","sourcesContent":["/* eslint-disable import/no-unresolved */\r\n/* eslint-disable import/extensions */\r\nimport app from './app';\r\n\r\nconst port = 4000;\r\n// Start API\r\napp.listen(port, () => {\r\n  // eslint-disable-next-line no-console\r\n  console.log(`App is running on port ${port}`);\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1bf164ee46cb5586ff8a8ee9b416dcc28468cd23","contentHash":"7771c058b33620c1a7b29fcf2574340d7398a8bda20f936dc58dfd7450bd5468"}}